<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä¸€è‡´æ€§å“ˆå¸Œä¸è™šæ‹ŸèŠ‚ç‚¹</title>
      <link href="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/"/>
      <url>/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>ä»‹ç» <strong>ä¸€è‡´æ€§å“ˆå¸Œ</strong>ä¸<strong>è™šæ‹ŸèŠ‚ç‚¹</strong>æ˜¯æ€æ ·å¤„ç†åˆ†å¸ƒå¼æ•°æ®ç®¡ç†çš„ã€‚</p><h4 id="ä¸€è‡´æ€§å“ˆå¸Œ"><a class="markdownIt-Anchor" href="#ä¸€è‡´æ€§å“ˆå¸Œ"></a> ä¸€è‡´æ€§å“ˆå¸Œ</h4><h5 id="æ¦‚å¿µä»‹ç»"><a class="markdownIt-Anchor" href="#æ¦‚å¿µä»‹ç»"></a> æ¦‚å¿µä»‹ç»</h5><p><strong>ä¼ ç»Ÿå“ˆå¸Œ</strong>å¯¹èŠ‚ç‚¹å’Œæ•°æ®çš„æ˜ å°„å½“é›†ç¾¤ä¸­èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶ï¼Œä¼šå‡ºç°éœ€è¦è¿ç§»å¤§é‡æ•°æ®çš„é—®é¢˜ã€‚</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/6db4c123a50921c292c4ef85b98f01f3.png" alt="æˆªå›¾"></p><p>ä¸€è‡´æ€§å“ˆå¸Œé€šè¿‡å°†<strong>èŠ‚ç‚¹</strong>ä¸<strong>æ•°æ®</strong>æ˜ å°„åˆ°ä¸€ä¸ªæ•°æ®ç©ºé—´åœ¨é€»è¾‘ä¸Šé¦–å°¾ç›¸è¿çš„<strong>å“ˆå¸Œç¯</strong>ä¸Šï¼Œå¯ä»¥è§£å†³é‡‡ç”¨ä¼ ç»Ÿå“ˆå¸Œå‡½æ•°æ¥è¿›è¡Œæ•°æ®åˆ†å¸ƒå¼ç®¡ç†æ—¶ï¼Œå¯¹é›†ç¾¤æ‰©å®¹å’Œç¼©å®¹æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°éœ€è¦<strong>è¿ç§»å¤§é‡æ•°æ®</strong>è€Œé‡‡ç”¨çš„ä¸€ç§ç‰¹æ®Šå“ˆå¸Œç®—æ³•ã€‚</p><p>åœ¨å“ˆå¸Œç¯ä¸Šçš„æ•°æ®æ²¿ç€ä¸€ä¸ªç»Ÿä¸€çš„æ–¹å‘å»å¯»æ‰¾ç¬¬ä¸€ä¸ªé‡åˆ°çš„èŠ‚ç‚¹ï¼Œå³ä¸ºè¯¥æ•°æ®çš„å­˜å‚¨èŠ‚ç‚¹ã€‚</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/960b4f5bfc7247a7aa2849de9798aead.png" alt="æˆªå›¾"></p><p>å½“èŠ‚ç‚¹å˜åŒ–æ—¶ï¼Œè‡³å¤šéœ€è¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®è¿›è¡Œè¿ç§»</p><ul><li><p>å¢åŠ </p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/5d50af1d1c36a06b52e4171b5a40452a.png" alt="æˆªå›¾"></p></li><li><p>å‡å°‘ï¼š</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/c824f305af3a2431322d07388859969f.png" alt="æˆªå›¾"></p></li></ul><h5 id="å­˜åœ¨çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#å­˜åœ¨çš„é—®é¢˜"></a> å­˜åœ¨çš„é—®é¢˜</h5><p>å“ˆå¸Œç¯çš„æ•°æ®ç©ºé—´å¾ˆå¤§: 0-<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{32}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œè€Œå®é™…çš„éƒ¨ç½²èŠ‚ç‚¹ç›¸æ¯”å¤ªè¿‡ç¨€ç–ï¼Œå¯¼è‡´æ•°æ®å¯¹èŠ‚ç‚¹çš„åˆ†é…ä¸å‡ï¼š</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/297b8d1e13a534cd4725fb4b78324054.png" alt="æˆªå›¾"></p><p>å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œçƒ­ç‚¹èŠ‚ç‚¹çš„è´Ÿè½½ä¼šæ¯”è¾ƒé«˜ï¼Œå½“çƒ­ç‚¹èŠ‚ç‚¹å®•æœºæ—¶ï¼Œæˆ–è€…æ‰©å®¹å’Œç¼©å®¹æ—¶ï¼Œçƒ­ç‚¹èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ä¼šçªç„¶æ‰¿å—è¾ƒå¤§å‹åŠ›ï¼Œä»è€Œå®¹æ˜“å¼•èµ·é›ªå´©å¼ååº”ã€‚</p><h4 id="è™šæ‹ŸèŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#è™šæ‹ŸèŠ‚ç‚¹"></a> è™šæ‹ŸèŠ‚ç‚¹</h4><p>é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹æé«˜èŠ‚ç‚¹å‡åŒ€åº¦ã€‚</p><ul><li>æ¯ä¸ªç‰©ç†èŠ‚ç‚¹ä¼šè¢«åˆ†åŒ–ä¸ºå¾ˆå¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹</li><li>å¯¹æ‰€æœ‰ç‰©ç†èŠ‚ç‚¹ä¸‹çš„è™šæ‹ŸèŠ‚ç‚¹è¿›è¡Œåˆ°å“ˆå¸Œç¯ä¸Šçš„æ˜ å°„ï¼Œç¡®ä¿åˆ†é…å‡åŒ€</li><li>æ•°æ®å…ˆæ‰¾åˆ°çš„æ˜¯è™šæ‹ŸèŠ‚ç‚¹ï¼Œç„¶åå†å»æ‰¾åˆ°çœŸå®ç‰©ç†èŠ‚ç‚¹</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/06/redis/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E4%B8%8E%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/ad77d7fcc911bb082f2aacca8ee95a7a.png" alt="æˆªå›¾"></p><p>è™šæ‹ŸèŠ‚ç‚¹çš„å¤šå°‘è¿˜å¯ä»¥æ ¹æ®ç‰©ç†èŠ‚ç‚¹çš„ç¡¬ä»¶é…ç½®æ¥å†³å®šã€‚</p><p>èŠ‚ç‚¹è®¿é—®å‡åŒ€åº¦çš„æå‡å¯¹æ‰©å®¹å’Œç¼©å®¹è¿™æ ·èŠ‚ç‚¹è§„æ¨¡å˜åŒ–çš„åœºæ™¯ä¸‹çš„ç³»ç»Ÿç¨³å®šæ€§çš„æå‡æœ‰ä¸€å®šä½œç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸€è‡´æ€§å“ˆå¸Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MurmurHash2ç®—æ³•ç®€ä»‹</title>
      <link href="/2025/01/05/redis/MurmurHash2%E7%AE%97%E6%B3%95%E7%AE%80%E4%BB%8B/"/>
      <url>/2025/01/05/redis/MurmurHash2%E7%AE%97%E6%B3%95%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>ä»‹ç» MurmurHash2 ç®—æ³•çš„ç‰¹ç‚¹ï¼Œä¼˜åŠ¿ï¼Œç¼ºç‚¹ï¼Œåº”ç”¨åœºæ™¯ï¼ŒåŸºæœ¬å®ç°ï¼ŒMurmurHash2 æ˜¯ä¸€ç§å“ˆå¸Œç®—æ³•ï¼Œé«˜æ•ˆï¼ŒéåŠ å¯†ã€‚</p><h4 id="ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#ç‰¹ç‚¹"></a> ç‰¹ç‚¹</h4><ol><li><strong>éåŠ å¯†</strong>ï¼š<ul><li>ä¸é€‚ç”¨äºå¯†ç å­¦ã€‚</li><li>è®¾è®¡ç›®æ ‡ä¸ä¸º é«˜ç¢°æ’æ€§ä¸å®‰å…¨æ€§ã€‚</li></ul></li><li><strong>é«˜æ€§èƒ½ï¼š</strong><ul><li>ä½¿ç”¨ä½è¿ç®—ï¼Œæ··åˆå‡½æ•°å®ç°ï¼Œè®¡ç®—é€Ÿåº¦å¿«ã€‚</li></ul></li><li><strong>åˆ†å¸ƒå‡åŒ€ï¼š</strong><ul><li>ä½“ç°è¾“å…¥ä¸­å„ä¸ªä½çš„å½±å“ï¼Œhash å€¼åˆ†å¸ƒå‡åŒ€ã€‚</li></ul></li></ol><br><h4 id="ç®—æ³•æ€æƒ³"><a class="markdownIt-Anchor" href="#ç®—æ³•æ€æƒ³"></a> ç®—æ³•æ€æƒ³</h4><ol><li><strong>åˆ†å—å¤„ç†ï¼š</strong><ul><li>æŠŠè¾“å…¥æŒ‰ç…§æ¯ 32/64 ä½åˆ†ä¸ºä¸€ç»„å¤„ç†ã€‚</li></ul></li><li><strong>æ··åˆæ“ä½œï¼š</strong><ul><li>å¯¹æ¯ä¸ªåˆ†å—è¿›è¡Œæ··åˆè®¡ç®—ï¼ŒåŒ…æ‹¬ä¸å¸¸æ•°ç›¸ä¹˜ï¼Œç§»ä½å¼‚æˆ–ï¼Œä¸å½“å‰ç»“æœæ··åˆã€‚</li></ul></li><li><strong>æœ€ç»ˆæ··åˆï¼š</strong><ul><li>å°†å‰©ä¸‹çš„ä¸è¶³ 4/8 å­—èŠ‚çš„æ•°ç»„æ··åˆè¿›ç»“æœï¼Œç„¶ååœ¨å¯¹ç»“æœåšæ··åˆï¼Œç¡®ä¿æ‰€æœ‰è¾“å…¥ä½éƒ½å¯¹ç»“æœæœ‰å½±å“ã€‚</li></ul></li></ol><p><strong>ä¼ªä»£ç ï¼š</strong></p><p>ä»¥ 32 ä½ç‰ˆæœ¬çš„ MurmurHash2 ä¸ºä¾‹ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">uint m(const void *key,int len)&#123;<br>  uint seed = gen();<br>  const uint m;<br>  const int r;<br>  uint h = len ^ seed;<br>  <br>  const uchar *data = (const uchar *)key;<br>  while(len&gt;=4)&#123;<br>    uint k = *(uint *)data;<br>    <br>    // mix m r h<br>    /*<br>    ....<br>    */<br>    <br>    data += 4;<br>    len -= 4;<br>  &#125;<br>  // rest bytes<br>  /*<br>  swich(len)<br>  */<br>  <br>  // final mix m h<br>  /*<br>  ...<br>  */<br>  return h;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>redis ä¸­çš„å®ç°ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">/* MurmurHash2, by Austin Appleby<br> * Note - This code makes a few assumptions about how your machine behaves -<br> * 1. We can read a 4-byte value from any address without crashing<br> * 2. sizeof(int) == 4<br> *<br> * And it has a few limitations -<br> *<br> * 1. It will not work incrementally. liyazzi: ä¹Ÿå°±æ˜¯keyéœ€è¦ä¸€æ¬¡æ€§å®Œæ•´çŸ¥é“ï¼Œä¸é€‚åˆåŠ¨æ€æ•°æ®æµï¼Œå› ä¸ºæ¯ä¸€æ¬¡çš„æ··åˆè®¡ç®—éƒ½ä¾èµ–äºå‰é¢çš„æ•°æ®ï¼Œç„¶åæœ€åçš„æ··åˆä¾èµ–äºæ•´ä¸ªæ•°æ®<br> * 2. It will not produce the same results on little-endian and big-endian å½±å“è·¨å¹³å°æ€§<br> *    machines.<br> */<br>unsigned int dictGenHashFunction(const void *key, int len) &#123;<br>    /* &#x27;m&#x27; and &#x27;r&#x27; are mixing constants generated offline.<br>     They&#x27;re not really &#x27;magic&#x27;, they just happen to work well.  */<br>    uint32_t seed = dict_hash_function_seed;<br>    const uint32_t m = 0x5bd1e995;<br>    const int r = 24;<br><br>    /* Initialize the hash to a &#x27;random&#x27; value */<br>    uint32_t h = seed ^ len;<br><br>    /* Mix 4 bytes at a time into the hash */<br>    const unsigned char *data = (const unsigned char *)key;<br><br>    while(len &gt;= 4) &#123;<br>        uint32_t k = *(uint32_t*)data;<br><br>        k *= m;<br>        k ^= k &gt;&gt; r;<br>        k *= m;<br><br>        h *= m;<br>        h ^= k;<br><br>        data += 4;<br>        len -= 4;<br>    &#125;<br><br>    /* Handle the last few bytes of the input array  */<br>    switch(len) &#123;<br>    case 3: h ^= data[2] &lt;&lt; 16;<br>    case 2: h ^= data[1] &lt;&lt; 8;<br>    case 1: h ^= data[0]; h *= m;<br>    &#125;;<br><br>    /* Do a few final mixes of the hash to ensure the last few<br>     * bytes are well-incorporated. */<br>    h ^= h &gt;&gt; 13;<br>    h *= m;<br>    h ^= h &gt;&gt; 15;<br><br>    return (unsigned int)h;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å“ˆå¸Œå‡½æ•°ä¸­å¤§å¤šæ··æ·†æ“ä½œé€‰ç”¨ <code>^</code> çš„åŸå› ï¼š</p><ul><li>å¼‚æˆ–æ“ä½œèƒ½æ··åˆæ•°æ®çš„å„ä¸ªä½çš„ç‰¹å¾ï¼Œå¼‚æˆ–æ“ä½œæ‹¥æœ‰è‡ªåæ€§</li><li>æ¶ˆé™¤åç½®ï¼šé¿å…ç®€å•çš„åŠ æ³•ä¸ä¹˜æ³•å¸¦æ¥çš„ç´¯è®¡åç½®</li><li>æ€§èƒ½é«˜æ•ˆï¼šCPUçº§åˆ«è¿ç®—ï¼Œä½è¿ç®—é€šå¸¸é€Ÿåº¦è¾ƒå¿«</li></ul></blockquote><h4 id="redisä¸­çš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#redisä¸­çš„ä½¿ç”¨"></a> Redisä¸­çš„ä½¿ç”¨</h4><p>åœ¨ redis ä¸­ï¼ŒMurmurHash2 è¢«ç”¨ä½œé»˜è®¤å“ˆå¸Œå‡½æ•°å®ç°ï¼Œä¸»è¦ç”¨äºï¼š</p><ol><li><strong>è®¡ç®—å“ˆå¸Œè¡¨çš„ key ç´¢å¼•</strong></li><li><strong>è®¡ç®—ä¸€è‡´æ€§å“ˆå¸Œä¸­è™šæ‹ŸèŠ‚ç‚¹çš„ä½ç½®</strong></li></ol><p>é€‰æ‹© MurmurHash2 çš„åŸå› ï¼š</p><ul><li>å¿«é€Ÿï¼šé€‚åˆ redis é«˜æ€§èƒ½çš„éœ€æ±‚</li><li>å‡åŒ€ï¼šå‡å°‘å“ˆå¸Œå†²çª</li><li>ç®€å•ï¼šå®ç°ç®€å•</li></ul><h4 id="ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ç¼ºç‚¹"></a> ç¼ºç‚¹</h4><p>MurmurHash2 åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°å“ˆå¸Œç¢°æ’ç‡ç•¥é«˜çš„é—®é¢˜ã€‚</p><blockquote><p>Hash functions can be vulnerable to collision attacks, where a user can choose input data in such a way so as to intentionally cause hash collisions. Jean-Philippe Aumasson and Daniel J. Bernstein were able to show that even implementations of MurmurHash using a randomized seed are vulnerable to so-called HashDoS attacks.[51] With the use of differential cryptanalysis, they were able to generate inputs that would lead to a hash collision. The authors of the attack recommend using their own SipHash instead.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ReidsåŸºç¡€æ•°æ®ç»“æ„ï¼ˆä¸Šï¼‰</title>
      <link href="/2025/01/04/redis/Redis%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
      <url>/2025/01/04/redis/Redis%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ä»‹ç» redis ä¸­å¤šç§åŸºç¡€çš„æ•°æ®ç»“æ„, åŒ…æ‹¬ sds, adlist, dict, skipList, intset, ziplist, redisObject.</p><h3 id="sds"><a class="markdownIt-Anchor" href="#sds"></a> sds</h3><p>Redis ä½¿ç”¨ sds æ¥å¤„ç†å­—ç¬¦ä¸²ï¼Œç”¨æ¥è§£å†³ c è¯­è¨€ä¸­ä¼ ç»Ÿå­—ç¬¦ä¸²çš„ä¸€äº›é™åˆ¶é—®é¢˜ï¼Œæ¯”å¦‚ äºŒè¿›åˆ¶å®‰å…¨ï¼Œé¿å…å†…å­˜é¢‘ç¹é‡åˆ†é…ï¼Œé˜²æ­¢å­—ç¬¦æ•°ç»„è®¿é—®è¶Šç•Œï¼Œå®ç°O(1) å¤æ‚åº¦è·å–å­—ç¬¦ä¸²é•¿åº¦ï¼Œå‡å°‘é¢‘ç¹å†…å­˜åˆ†é…äº§ç”Ÿçš„å†…å­˜ç¢ç‰‡ã€‚</p><p>Redis ä½¿ç”¨ sds æ¥å­˜å‚¨ keyï¼Œç”¨æ¥ä½œä¸º AOF çš„ç¼“å†²åŒºå’Œä¸å®¢æˆ·ç«¯é€šä¿¡ä¸­çš„ç¼“å†²åŒºï¼Œç”¨æ¥å®ç°æ—¥å¿—ç³»ç»Ÿçš„æ¶ˆæ¯ï¼Œæ„å»ºåè®®ï¼ˆRESPï¼‰ã€‚</p><h4 id="æ•°æ®ç»“æ„å®ç°"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„å®ç°"></a> æ•°æ®ç»“æ„å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">// simple dynamic string header<br>struct sdshdr &#123;<br>    <br>    // buf ä¸­å·²å ç”¨ç©ºé—´çš„é•¿åº¦<br>    // é€šè¿‡ len æ¥ç¡®å®šæœ‰æ•ˆæ•°æ®èŒƒå›´ï¼Œä¿è¯ &#x27;\0&#x27; ä¹Ÿå¯ä»¥ä½œä¸ºæ•°æ®éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶å®‰å…¨<br>    int len;<br><br>    // buf ä¸­å‰©ä½™å¯ç”¨ç©ºé—´çš„é•¿åº¦<br>    int free;<br><br>    // buf.size = len + free + 1<br>    char buf[];<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="é¿å…å†…å­˜é¢‘ç¹é‡åˆ†é…çš„æ–¹æ³•"><a class="markdownIt-Anchor" href="#é¿å…å†…å­˜é¢‘ç¹é‡åˆ†é…çš„æ–¹æ³•"></a> é¿å…å†…å­˜é¢‘ç¹é‡åˆ†é…çš„æ–¹æ³•</h4><p>å½“éœ€è¦ä¿®æ”¹å­—ç¬¦ä¸²é•¿åº¦çš„æ“ä½œæ—¶ï¼Œä¼ ç»Ÿçš„cå‡½æ•°åœ¨næ¬¡æ“ä½œä¸‹åŸºæœ¬ä¼šæœ‰næ¬¡å†…å­˜é‡åˆ†é…æ“ä½œï¼Œsds é€šè¿‡ä½¿ç”¨ free å­—æ®µå’Œç©ºé—´é¢„åˆ†é…ã€æœªä½¿ç”¨ç©ºé—´æƒ°æ€§åˆ é™¤æ¥é¿å…é¢‘ç¹çš„å†…å­˜é‡åˆ†é…ï¼Œä¼˜åŒ–ä¸ºè‡³å¤šnæ¬¡å†…å­˜é‡åˆ†é…ã€‚</p><h5 id="ç©ºé—´ä¸åˆ†é…"><a class="markdownIt-Anchor" href="#ç©ºé—´ä¸åˆ†é…"></a> ç©ºé—´ä¸åˆ†é…</h5><p>ç­–ç•¥ä¼ªä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">addlen &lt;= nowfree return;<br>oldSds =  getSdsPrt(s);<br>len = oldSds-&gt;len;<br>newlen = addlen + len;<br>if(newlen &lt; PRE) newlen *= 2;<br>else newlen += PRE<br>newSds = zrealloc(oldSds, newlen + 1 + size(sds))<br>newSds-&gt;free = newlen - len;<br></code></pre></td></tr></table></figure><p>ç­–ç•¥ï¼šå½“éœ€è¦æ‰©å±• buf éƒ¨åˆ†æ—¶ï¼Œæ ¹æ®å½“å‰ <code>len</code> ä¸éœ€æ±‚å¤§å°<code>addlen</code> çš„å’Œæ¥å†³å®šé™¤äº†è¦åˆ†é…æ»¡è¶³ <code>addlen</code> å¤§å°çš„ç©ºé—´è¿˜å°†è¦å¤šé¢„åˆ†é…å¤šå°‘ç©ºé—´å¤§å°ä»¥ä¾¿åœ¨ä¸‹æ¬¡è¿˜éœ€è¦æ‰©å±•ç©ºé—´æ—¶å¯ä»¥é€‚å½“åœ°å‘½ä¸­è¯¥æ¬¡å¤šé¢„åˆ†é…çš„ç©ºé—´ï¼Œä»è€Œå‡å°‘å†…å­˜é‡åˆ†é…æ¬¡æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">/*<br> *  T = O(N)<br> *  1. å¦‚æœ oldlen+ addlen &lt; 1MB åˆ™ newMaxLen =  2 (oldlen + addlen); newFree = newmaxlen - oldlen; å®é™…ä¸Šçš„é¢„æ‰©å……æ“ä½œæ˜¯<br> *  åœ¨caller è°ƒç”¨åä½¿å¾—ï¼š sds åœ¨æ»¡è¶³ addlen åï¼Œä½¿å¾— newfree çš„å¤§å°ä¸ caller è°ƒç”¨åä½¿ç”¨æ‰ addlenè¿™éƒ¨åˆ†ç©ºé—´å sds çš„ len çš„å¤§å°ä¸€æ ·<br> *  2. oldlen+ addlen &gt;= 1MB, åˆ™ newMaxLen = oldlen + addlen + 1MB, caller ä½¿ç”¨ addlen è¿™éƒ¨åˆ†åçš„ free å›ºå®š= 1MB<br> *  æ€»ç»“ï¼š<br> *  1. åœ¨å½“å‰ sds buf å¤§å°è¾ƒå°æ—¶ï¼Œæ¯æ¬¡æ‰©å……æ“ä½œä½¿å¾— ä¸‹ä¸€æ¬¡åœ¨éœ€è¦æ‰©å……çš„ addlen é˜ˆå€¼ï¼ˆä¹Ÿå°±æ˜¯ newfreeï¼‰ä¸º = oldlen + addlen.<br> *  å¯ä»¥å‘ç° newfree æ˜¯æ ¹æ® sds çš„ä¸Šä¸€æ¬¡å­—ç¬¦ä½¿ç”¨é‡ ä¸ è¯¥æ¬¡æ‰€éœ€è¦çš„addlen åŠ¨æ€ç”Ÿæˆçš„ï¼Œ<br> *  å¦‚æœå¯¹ sds æ‰©å……æ“ä½œéœ€æ±‚æ˜¯è¾ƒä¸º è¿ç»­å¹³å‡çš„ï¼Œå°†ä¼šå¤§å¤§é™ä½æ•´ä¸ªè¿‡ç¨‹ä¸­ å¼•å‘çš„å†…å­˜æ‰©å……é‡åˆ†é…æ¬¡æ•°<br> *  2. åœ¨ sds buf æœ¬èº«å·²ç»è¾ƒå¤§æ—¶ï¼Œ ç›´æ¥ä½¿å¾— newfree = 1MB<br> *  è¿™ç§é¢„ç•™åˆ†é…ç­–ç•¥ä½¿å¾—ä»¥å‰çš„ næ¬¡ concat æ“ä½œçš„ n æ¬¡æ‰©å®¹ä¼˜åŒ–ä¸º æœ€å¤š n æ¬¡<br> */<br>sds sdsMakeRoomFor(sds s, size_t addlen) &#123;<br><br>    struct sdshdr *sh, *newsh;<br><br>    // è·å– s ç›®å‰ free<br>    size_t free = sdsavail(s);<br><br>    size_t len, newlen;<br><br>    // s ç›®å‰çš„ç©ºä½™ç©ºé—´å·²ç»è¶³å¤Ÿï¼Œæ— é¡»å†è¿›è¡Œæ‰©å±•ï¼Œç›´æ¥è¿”å›<br>    if (free &gt;= addlen) return s;<br><br>    // è·å– s ç›®å‰å·²å ç”¨ç©ºé—´çš„é•¿åº¦<br>    len = sdslen(s);<br>    // s å…¶å®æ˜¯ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆï¼ŒæŒ‡å‘ buf çš„èµ·å§‹åœ°å€ï¼Œå‡å» sdshdr çš„å¤§å°å…¶å®å°±æ˜¯æŒ‡å‘è¯¥ç»“æ„ä½“èµ·å§‹åœ°å€çš„æŒ‡é’ˆ<br>    // ç”¨è¿™ç§æ“ä½œæ¥è·å–ç»™å®š buf æ‰€å±çš„ç»“æ„ä½“æŒ‡é’ˆï¼Œå¾ˆå·§å¦™<br>    sh = (void*) (s-(sizeof(struct sdshdr)));<br><br>    // newlen ä¸ºåˆ†é…å len çš„æœ€å°å€¼<br>    newlen = (len+addlen);<br><br>    // æ ¹æ®æ–°é•¿åº¦ï¼Œä¸º s åˆ†é…æ–°ç©ºé—´æ‰€éœ€çš„å¤§å°<br>    if (newlen &lt; SDS_MAX_PREALLOC)<br>        // å¦‚æœæ–°é•¿åº¦å°äº SDS_MAX_PREALLOC <br>        // é‚£ä¹ˆä¸ºå®ƒåˆ†é…ä¸¤å€äºæ‰€éœ€é•¿åº¦çš„ç©ºé—´<br>        newlen *= 2;<br>    else<br>        // å¦åˆ™ï¼Œåˆ†é…é•¿åº¦ä¸ºç›®å‰é•¿åº¦åŠ ä¸Š SDS_MAX_PREALLOC<br>        newlen += SDS_MAX_PREALLOC;<br>    // T = O(N)<br>    newsh = zrealloc(sh, sizeof(struct sdshdr)+newlen+1);<br><br>    // å†…å­˜ä¸è¶³ï¼Œåˆ†é…å¤±è´¥ï¼Œè¿”å›<br>    if (newsh == NULL) return NULL;<br><br>    // æ›´æ–° sds çš„ç©ºä½™é•¿åº¦<br>    newsh-&gt;free = newlen - len;<br><br>    // è¿”å› sds<br>    return newsh-&gt;buf;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="ç©ºé—´æƒ°æ€§é‡Šæ”¾"><a class="markdownIt-Anchor" href="#ç©ºé—´æƒ°æ€§é‡Šæ”¾"></a> ç©ºé—´æƒ°æ€§é‡Šæ”¾</h5><p>å½“éœ€è¦è£å‰ª sds å†…å®¹æ—¶ï¼Œredis ä¸ä¼šç«‹é©¬é‡Šæ”¾æ‰å½“å‰ä¸éœ€è¦çš„ç©ºé—´ï¼Œè€Œæ˜¯é€šè¿‡ <code>len</code> ä¸ <code>free</code> å­—æ®µæ¥å®ç°â€é€»è¾‘â€œåˆ é™¤ã€‚</p><p><strong>trim</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">sds sdstrim(sds s, const char *cset) &#123;<br>    struct sdshdr *sh = (void*) (s-(sizeof(struct sdshdr)));<br>    char *start, *end, *sp, *ep;<br>    size_t len;<br><br>    sp = start = s;<br>    ep = end = s+sdslen(s)-1;<br><br>    // åŒæŒ‡é’ˆå¯»æ‰¾å·¦å³ç•Œé™ï¼Œéƒ½æ˜¯ä¸€ç›´ç§»åŠ¨ç›´åˆ°é‡åˆ°ä¸å±äº cset ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦<br>    while(sp &lt;= end &amp;&amp; strchr(cset, *sp)) sp++;<br>    while(ep &gt; start &amp;&amp; strchr(cset, *ep)) ep--;<br><br>    len = (sp &gt; ep) ? 0 : ((ep-sp)+1);<br>    <br>    if (sh-&gt;buf != sp) memmove(sh-&gt;buf, sp, len);<br>    <br>    sh-&gt;buf[len] = &#x27;\0&#x27;;<br><br>    sh-&gt;free = sh-&gt;free+(sh-&gt;len-len);<br>    sh-&gt;len = len;<br><br>    return s;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>clear</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">void sdsclear(sds s) &#123;<br><br>    struct sdshdr *sh = (void*) (s-(sizeof(struct sdshdr)));<br><br>    sh-&gt;free += sh-&gt;len;<br>    sh-&gt;len = 0;<br>    <br>    sh-&gt;buf[0] = &#x27;\0&#x27;;<br>&#125;<br></code></pre></td></tr></table></figure><br><h3 id="adlist"><a class="markdownIt-Anchor" href="#adlist"></a> adlist</h3><p>adlist( abstract doubly linked list) æ˜¯redisçš„æŠ½è±¡åŒç«¯é“¾è¡¨ï¼Œç‰¹ç‚¹ åŒç«¯ï¼Œæ— ç¯ï¼Œæœ‰è¡¨å¤´å’Œè¡¨å°¾æŒ‡é’ˆï¼ŒèŠ‚ç‚¹æ”¯æŒå¤šç§ç±»å‹æ•°æ®ã€‚</p><p>adlist ä½œä¸ºåŸºç¡€æ•°æ®ç»“æ„ï¼Œç”¨äº Pub/Sub è®¢é˜…æ¨¡å‹åˆ—è¡¨ï¼Œç­‰å¾…é˜Ÿåˆ—ï¼Œå’Œä½œä¸ºåŸºç¡€æ•°æ®ç»“æ„ã€‚</p><h4 id="æ•°æ®ç»“æ„å®ç°-2"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„å®ç°-2"></a> æ•°æ®ç»“æ„å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">typedef struct listNode &#123;<br><br>    // å‰ç½®èŠ‚ç‚¹<br>    struct listNode *prev;<br><br>    // åç½®èŠ‚ç‚¹<br>    struct listNode *next;<br><br>    // èŠ‚ç‚¹çš„å€¼ï¼Œæ³¨æ„ç±»å‹æ˜¯ void *ï¼Œå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹æ•°æ®çš„æŒ‡é’ˆ<br>    void *value;<br><br>&#125; listNode;<br><br>typedef struct list &#123;<br><br>    // è¡¨å¤´èŠ‚ç‚¹<br>    listNode *head;<br><br>    // è¡¨å°¾èŠ‚ç‚¹<br>    listNode *tail;<br><br>    // èŠ‚ç‚¹å€¼å¤åˆ¶å‡½æ•°<br>    void *(*dup)(void *ptr);<br><br>    // èŠ‚ç‚¹å€¼é‡Šæ”¾å‡½æ•°<br>    void (*free)(void *ptr);<br><br>    // èŠ‚ç‚¹å€¼å¯¹æ¯”å‡½æ•°<br>    int (*match)(void *ptr, void *key);<br><br>    // é“¾è¡¨æ‰€åŒ…å«çš„èŠ‚ç‚¹æ•°é‡<br>    unsigned long len;<br><br>&#125; list;<br></code></pre></td></tr></table></figure><br><h3 id="dict"><a class="markdownIt-Anchor" href="#dict"></a> dict</h3><p>dictï¼Œå­—å…¸æ˜¯redisçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œç”¨æ¥å¿«é€ŸæŸ¥æ‰¾å…ƒç´ ï¼Œredis é‡‡ç”¨é“¾è¡¨æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œå“ˆå¸Œç®—æ³•ä½¿ç”¨ MurmurHash2ã€‚</p><h4 id="æ•°æ®ç»“æ„å®ç°-3"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„å®ç°-3"></a> æ•°æ®ç»“æ„å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">typedef struct dictEntry &#123;<br>    <br>    // é”®<br>    void *key;<br><br>    // å€¼<br>    union &#123;<br>        void *val;<br>        uint64_t u64;<br>        int64_t s64;<br>    &#125; v;<br><br>    // æŒ‡å‘ä¸‹ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹ï¼Œå½¢æˆé“¾è¡¨<br>    struct dictEntry *next;<br><br>&#125; dictEntry;<br><br><br>/*<br> * å­—å…¸ç±»å‹ç‰¹å®šå‡½æ•°<br> */<br>typedef struct dictType &#123;<br><br>    // è®¡ç®—å“ˆå¸Œå€¼çš„å‡½æ•°<br>    unsigned int (*hashFunction)(const void *key);<br><br>    // å¤åˆ¶é”®çš„å‡½æ•°<br>    void *(*keyDup)(void *privdata, const void *key);<br><br>    // å¤åˆ¶å€¼çš„å‡½æ•°<br>    void *(*valDup)(void *privdata, const void *obj);<br><br>    // å¯¹æ¯”é”®çš„å‡½æ•°<br>    int (*keyCompare)(void *privdata, const void *key1, const void *key2);<br><br>    // é”€æ¯é”®çš„å‡½æ•°<br>    void (*keyDestructor)(void *privdata, void *key);<br>    <br>    // é”€æ¯å€¼çš„å‡½æ•°<br>    void (*valDestructor)(void *privdata, void *obj);<br><br>&#125; dictType;<br><br><br>/* This is our hash table structure. Every dictionary has two of this as we<br> * implement incremental rehashing, for the old to the new table. */<br>/*<br> * å“ˆå¸Œè¡¨<br> *<br> * æ¯ä¸ªå­—å…¸éƒ½ä½¿ç”¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œä»è€Œå®ç°æ¸è¿›å¼ rehash ã€‚<br> */<br>typedef struct dictht &#123;<br>    <br>    // å“ˆå¸Œè¡¨æ•°ç»„<br>    dictEntry **table;<br><br>    // å“ˆå¸Œè¡¨å¤§å°<br>    unsigned long size;<br>    <br>    // å“ˆå¸Œè¡¨å¤§å°æ©ç ï¼Œç”¨äºè®¡ç®—ç´¢å¼•å€¼<br>    // æ€»æ˜¯ç­‰äº size - 1<br>    unsigned long sizemask;<br><br>    // è¯¥å“ˆå¸Œè¡¨å·²æœ‰èŠ‚ç‚¹çš„æ•°é‡<br>    unsigned long used;<br><br>&#125; dictht;<br><br>/*<br> * å­—å…¸<br> * å®šä¹‰ä¸€ç»„æ“ä½œ(dictType)ä¸æ•°æ®<br> */<br>typedef struct dict &#123;<br><br>    // ç±»å‹ç‰¹å®šå‡½æ•°<br>    dictType *type;<br><br>    // ç§æœ‰æ•°æ®<br>    void *privdata;<br><br>    // å“ˆå¸Œè¡¨ï¼Œæ³¨æ„æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨ä»¥ rehash<br>    dictht ht[2];<br><br>    // rehash ç´¢å¼•<br>    // å½“ rehash ä¸åœ¨è¿›è¡Œæ—¶ï¼Œå€¼ä¸º -1<br>    int rehashidx; /* rehashing not in progress if rehashidx == -1 */<br><br>    // ç›®å‰æ­£åœ¨è¿è¡Œçš„å®‰å…¨è¿­ä»£å™¨çš„æ•°é‡<br>    int iterators; /* number of iterators currently running */<br><br>&#125; dict;<br></code></pre></td></tr></table></figure><br><h4 id="rehash"><a class="markdownIt-Anchor" href="#rehash"></a> rehash</h4><p>ç›®çš„ï¼šä¸ºäº†ç»´æŒdictä¸­è´Ÿè½½å› å­åœ¨ä¸€ä¸ªåˆç†çš„èŒƒå›´ï¼Œä»¥ä¾¿ä¸å½±å“æ•°æ®åº“æ€§èƒ½ï¼Œå¯¹dictçš„ hash table å¤§å°è¿›è¡Œè°ƒæ•´ï¼Œç„¶åå¯¹ç°æœ‰çš„ k-v å¯¹è¿›è¡Œ rehash åˆ°æ–°çš„ hash table ä¸Šã€‚</p><p><strong>rehash çš„æ—¶æœº</strong>ï¼š</p><ol><li><p>å½“å‰ è´Ÿè½½å› å­ &gt;=1 å¹¶ä¸”æ²¡æœ‰è¿›è¡Œ AOF RDB çš„é˜»å¡æ“ä½œ</p></li><li><p>å¦‚æœå½“å‰é˜»å¡ï¼Œè´Ÿè½½å› å­ &gt;= 5 ä¹Ÿä¼šå¼ºåˆ¶è¿›è¡Œrehash</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">static int _dictExpandIfNeeded(dict *d)<br>&#123;<br>    /* Incremental rehashing already in progress. Return. */<br>    // æ¸è¿›å¼ rehash å·²ç»åœ¨è¿›è¡Œäº†ï¼Œç›´æ¥è¿”å›<br>    if (dictIsRehashing(d)) return DICT_OK;<br><br>    /* If the hash table is empty expand it to the initial size. */<br>    // å¦‚æœå­—å…¸ï¼ˆçš„ 0 å·å“ˆå¸Œè¡¨ï¼‰ä¸ºç©ºï¼Œé‚£ä¹ˆåˆ›å»ºå¹¶è¿”å›åˆå§‹åŒ–å¤§å°çš„ 0 å·å“ˆå¸Œè¡¨<br>    // T = O(1)<br>    if (d-&gt;ht[0].size == 0) return dictExpand(d, DICT_HT_INITIAL_SIZE);<br><br>    /* If we reached the 1:1 ratio, and we are allowed to resize the hash<br>     * table (global setting) or we should avoid it but the ratio between<br>     * elements/buckets is over the &quot;safe&quot; threshold, we resize doubling<br>     * the number of buckets. */<br>    // ä¸€ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ä¸ºçœŸæ—¶ï¼Œå¯¹å­—å…¸è¿›è¡Œæ‰©å±•<br>    // 1ï¼‰å­—å…¸å·²ä½¿ç”¨èŠ‚ç‚¹æ•°å’Œå­—å…¸å¤§å°ä¹‹é—´çš„æ¯”ç‡æ¥è¿‘ 1ï¼š1<br>    //    å¹¶ä¸” dict_can_resize ä¸ºçœŸ<br>    // 2ï¼‰å·²ä½¿ç”¨èŠ‚ç‚¹æ•°å’Œå­—å…¸å¤§å°ä¹‹é—´çš„æ¯”ç‡è¶…è¿‡ dict_force_resize_ratio<br>    if (d-&gt;ht[0].used &gt;= d-&gt;ht[0].size &amp;&amp;<br>        (dict_can_resize ||<br>         d-&gt;ht[0].used/d-&gt;ht[0].size &gt; dict_force_resize_ratio))<br>    &#123;<br>        // æ–°å“ˆå¸Œè¡¨çš„å¤§å°è‡³å°‘æ˜¯ç›®å‰å·²ä½¿ç”¨èŠ‚ç‚¹æ•°çš„ä¸¤å€<br>        // T = O(N)<br>        return dictExpand(d, d-&gt;ht[0].used*2);<br>    &#125;<br><br>    return DICT_OK;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å…³äºç¬¬äºŒç‚¹</strong>ï¼š</p><blockquote><p>redis åœ¨è¿›è¡ŒæŒä¹…åŒ–æ“ä½œæ—¶ï¼Œä½¿ç”¨ fork å­è¿›ç¨‹æ¥å®ç°ï¼Œè€Œå¤§å¤šæ•°æ“ä½œç³»ç»Ÿé‡‡ç”¨ COW æ¥ä¼˜åŒ–å­è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨ï¼Œåœ¨å­è¿›ç¨‹åˆ›å»ºæ—¶ï¼Œå’Œçˆ¶è¿›ç¨‹æ‹¥æœ‰ç›¸åŒçš„å†…å­˜é¡µï¼Œåªæœ‰å½“å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹å°è¯•ä¿®æ”¹å†…å­˜å†…å®¹æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰å»å…ˆ copy è¿™éƒ¨åˆ†é¡µé¢åˆ°éœ€è¦ä¿®æ”¹çš„è¿›ç¨‹ç©ºé—´ä¸­ï¼Œè¿™æ ·é¿å…äº†åœ¨å­è¿›ç¨‹åˆ›å»ºæ—¶å…¨é‡ copy çˆ¶è¿›ç¨‹çš„å†…å­˜å†…å®¹ï¼Œé¿å…äº†å¤§é‡ä¸å¿…è¦çš„å†…å­˜å¼€é”€ã€‚æ‰€ä»¥å¯¹äº rehash ï¼Œå½“æœ‰ AOF RDB æŒä¹…åŒ–æ‰€åˆ›å»ºçš„å­è¿›ç¨‹æ—¶ï¼Œä¸ºäº†é¿å…ä¸€äº›ä¸å¿…è¦çš„ COW å¼•èµ·çš„å†…å­˜å¼€é”€ï¼Œrehash çš„é˜ˆå€¼è¦æ±‚ä¼šæ›´ä¸¥æ ¼ä¸€äº›ï¼›å¹¶ä¸” redish æä¾›äº† <code>dictEnableResize() / dictDisableResize()</code> æ¥ä¸»åŠ¨æ§åˆ¶ rehash çš„è¿›è¡Œï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯å½“è´Ÿè½½å› å­ &gt;= 5 æ—¶ï¼Œä¼šå¼ºåˆ¶ rehash.</p></blockquote><p><strong>rehash è¿‡ç¨‹ï¼š</strong></p><ol><li>åˆ†é…æ–°çš„ hash table -&gt; ht[1], ä¸”æ–° table çš„å¤§å°æ»¡è¶³ï¼šå§‹ç»ˆæ˜¯ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">2^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span>  ï¼Œå¦‚æœæ˜¯æ‰©å®¹ï¼Œåˆ™æ˜¯å¤§äºç­‰äº ht[0] * 2 çš„çš„ç¬¬ä¸€ä¸ª <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">2^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span>, è‹¥æ˜¯æ”¶ç¼©ï¼Œåˆ™æ˜¯å¤§äºç­‰äº ht[0]/2 çš„ç¬¬ä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">2^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span>.</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c_cpp">static unsigned long _dictNextPower(unsigned long size)<br>&#123;<br>    unsigned long i = DICT_HT_INITIAL_SIZE;<br><br>    if (size &gt;= LONG_MAX) return LONG_MAX;<br>    while(1) &#123;<br>        if (i &gt;= size)<br>            return i;<br>        i *= 2;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>æ¸è¿›å¼ rehashï¼Œé€æ­¥è¿ç§»æ•°æ®ï¼Œåˆ†è€Œæ²»ä¹‹ï¼Œé€šå¸¸ redis ä¸­ dict ä¸­ k-v å¯¹ä¼šéå¸¸å¤šï¼Œé¿å…ä¸€æ¬¡æ€§è¿ç§»å¯¼è‡´å¤§é‡æ•°æ®çš„è¯»å†™ä¼šè®©æœåŠ¡æš‚åœï¼Œæ‰€ä»¥æŠŠæ•°æ®è¿ç§»æ“ä½œåˆ†æ‘Šåœ¨å¯¹å¤–éƒ¨æ•°æ®çš„æ“ä½œä¹‹ä¸­ã€‚æ¯æ¬¡å¯¹ dict è¿›è¡Œå¢åˆ æ”¹æŸ¥æ—¶ï¼Œé™¤äº†å®Œæˆç‰¹å®šçš„æ“ä½œå¤–ï¼Œè¿˜ä¼šé¡ºå¸¦å°† <code>rehashidx</code> æ‰€æŒ‡ç¤ºçš„ hash æ§½ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹è¿ç§»åˆ° ht[1] ä¸­ï¼Œæ›´æ–° <code>rehashidx</code>. éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ•´ä¸ª rehash è¿‡ç¨‹ä¸­ï¼Œä»ç„¶å“åº”å—å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¯¹äºæŸ¥è¯¢ï¼Œåˆ™ä¼šä¾æ¬¡æŸ¥æ‰¾ ht[0], ht[1]. æ›´æ–°ä¸åˆ é™¤ç±»ä¼¼ã€‚å¯¹äºæ–°å¢ï¼Œåˆ™åªä¼šåœ¨ ht[1] ä¸­æ“ä½œã€‚</li><li>åˆ°æŸä¸€ä¸ªæ—¶é—´ç‚¹ <code>rehashidx == ht[0].size</code>ï¼Œè¿ç§»å®Œæˆï¼Œå°† <code>rehashidx</code> è®¾ç½®ä¸º -1ï¼Œé‡Šæ”¾ ht[0]çš„ç©ºé—´ï¼Œå°†ht[1] è®¾ç½®ä¸º ht[0].</li></ol><blockquote><p>rehash å¹¶ä¸æ˜¯ä¸€ä¸ªç”±å¦å¤–çš„çº¿ç¨‹æˆ–è€…è¿›ç¨‹è¿›è¡Œçš„å­ä»»åŠ¡ï¼Œè€Œæ˜¯è¢«ä¸€ä¸ªæ ‡å¿—ä½æŒ‡ç¤ºï¼š<code>rehashidx != -1</code>ï¼Œå¹¶ä¸”ä¸æ˜¯ä¸€ä¸ªè¿ç»­ä¸è¢«æ‰“æ–­çš„æ“ä½œï¼Œè€Œæ˜¯åˆ†æ•£äºå¯¹ dict çš„æ•°æ®æ“ä½œä¹‹ä¸­ï¼Œä¿è¯äº†æœåŠ¡çš„å¯ç”¨æ€§ã€‚</p><p>redis çš„ä¸»è¦æ•°æ®å·¥ä½œæ¨¡å¼æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„å•çº¿ç¨‹æ¨¡å‹ï¼ŒLinux ä¸Šé€šè¿‡ IOå¤šè·¯å¤ç”¨(epoll) æ¥æ¥å—å®¢æˆ·ç«¯è¯·æ±‚ã€‚å•çº¿ç¨‹çš„æ•°æ®å·¥ä½œæ¨¡å¼é¿å…äº†å¤šçº¿ç¨‹ä¸‹çš„æ•°æ®ç«äº‰ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å’Œå› é”æœºåˆ¶å¯¼è‡´çš„æ€§èƒ½æŸå¤±ã€‚ä½†åæ¥çš„ç‰ˆæœ¬å¼•å…¥äº†å¤šçº¿ç¨‹æ¥ä½¿å¾— ç½‘ç»œIO æ–¹é¢çš„ å¤„ç†è¯·æ±‚ä¸è¿”å›å“åº”è¢« ç‹¬ç«‹çš„çº¿ç¨‹å¤„ç†ï¼Œä¼˜åŒ–äº†ç½‘ç»œ IO çš„æ€§èƒ½ç“¶é¢ˆã€‚</p></blockquote><br><p>å‚è€ƒï¼š</p><blockquote><ul><li>Redisè®¾è®¡ä¸å®ç°</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WSL å®‰è£…åŠå…¶ç›¸å…³é…ç½®</title>
      <link href="/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"/>
      <url>/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="install"><a class="markdownIt-Anchor" href="#install"></a> install</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">wsl -l -o<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ç°å¯ä¸‹è½½åˆ†å‘ç‰ˆåˆ—è¡¨.ï¼ˆæœ€å¥½å¼€ä»£ç†ï¼‰</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs powershell">~ wsl <span class="hljs-literal">-l</span> <span class="hljs-literal">-o</span><br>ä»¥ä¸‹æ˜¯å¯å®‰è£…çš„æœ‰æ•ˆåˆ†å‘çš„åˆ—è¡¨ã€‚<br>ä½¿ç”¨ <span class="hljs-string">&#x27;wsl.exe --install &lt;Distr&gt;&#x27;</span> å®‰è£…ã€‚<br><br>NAME                            FRIENDLY NAME<br>Ubuntu                          Ubuntu<br>Debian                          Debian GNU/Linux<br>kali<span class="hljs-literal">-linux</span>                      Kali Linux Rolling<br>Ubuntu<span class="hljs-literal">-18</span>.<span class="hljs-number">04</span>                    Ubuntu <span class="hljs-number">18.04</span> LTS<br>Ubuntu<span class="hljs-literal">-20</span>.<span class="hljs-number">04</span>                    Ubuntu <span class="hljs-number">20.04</span> LTS<br>Ubuntu<span class="hljs-literal">-22</span>.<span class="hljs-number">04</span>                    Ubuntu <span class="hljs-number">22.04</span> LTS<br>Ubuntu<span class="hljs-literal">-24</span>.<span class="hljs-number">04</span>                    Ubuntu <span class="hljs-number">24.04</span> LTS<br>OracleLinux_7_9                 Oracle Linux <span class="hljs-number">7.9</span><br>OracleLinux_8_7                 Oracle Linux <span class="hljs-number">8.7</span><br>OracleLinux_9_1                 Oracle Linux <span class="hljs-number">9.1</span><br>openS<span class="hljs-built_in">USE-Leap</span><span class="hljs-literal">-15</span>.<span class="hljs-number">6</span>              openSUSE Leap <span class="hljs-number">15.6</span><br>S<span class="hljs-built_in">USE-Linux</span><span class="hljs-literal">-Enterprise-15-SP5</span>    SUSE Linux Enterprise <span class="hljs-number">15</span> SP5<br>S<span class="hljs-built_in">USE-Linux</span><span class="hljs-literal">-Enterprise-15-SP6</span>    SUSE Linux Enterprise <span class="hljs-number">15</span> SP6<br>openS<span class="hljs-built_in">USE-Tumbleweed</span>             openSUSE Tumbleweed<br></code></pre></td></tr></table></figure><h4 id="ç§»åŠ¨å­˜å‚¨æ–‡ä»¶"><a class="markdownIt-Anchor" href="#ç§»åŠ¨å­˜å‚¨æ–‡ä»¶"></a> ç§»åŠ¨å­˜å‚¨æ–‡ä»¶</h4><p><code>wsl --install &lt;distr-name&gt;</code> å°†ä¼š -&gt; <strong>dir</strong>: <code>C:\Users\&lt;username&gt;\AppData\Local\Packages\&lt;ditr-name&gt;</code>ï¼Œwsl çš„è™šæ‹Ÿå­˜å‚¨æ–‡ä»¶ä½äº <code>dir/LocalState</code>.</p><p>ç§»åŠ¨è¯¥<code>ext4.vhdx</code> :</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">wsl <span class="hljs-literal">--manage</span> &lt;distr<span class="hljs-literal">-name</span>&gt; <span class="hljs-literal">--move</span> &lt;/path/<span class="hljs-built_in">dir</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="æ›´æ”¹-distro-name"><a class="markdownIt-Anchor" href="#æ›´æ”¹-distro-name"></a> æ›´æ”¹ distro-name</h4><p>å®é™…ä¹Ÿæ›´æ”¹äº†<code>ext4.vhdx</code> çš„ä½ç½®.</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell">~ wsl <span class="hljs-literal">-l</span> <span class="hljs-literal">-v</span><br>  NAME            STATE           VERSION<br>* Ubuntu<span class="hljs-literal">-18</span>.<span class="hljs-number">04</span>    Running         <span class="hljs-number">2</span><br>  docker          Running         <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ç›®å‰å¥½åƒåªèƒ½é€šè¿‡å¯¼å‡ºå†å¯¼å…¥ (çœŸéº»çƒ¦ )-: ğŸ˜“</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">wsl <span class="hljs-literal">--export</span> &lt;distr<span class="hljs-literal">-name</span>&gt; &lt;/path/backup.tar&gt;<br>wsl <span class="hljs-literal">--import</span> &lt;<span class="hljs-built_in">new-distr</span><span class="hljs-literal">-name</span>&gt; &lt;/path/to<span class="hljs-literal">-vhdx-dir</span>&gt; &lt;/path/backup.tar&gt;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–°å¼-windows-ç»ˆç«¯-è®¿é—®wsl"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ–°å¼-windows-ç»ˆç«¯-è®¿é—®wsl"></a> ä½¿ç”¨æ–°å¼ Windows ç»ˆç«¯ è®¿é—®wsl</h2><ul><li>å¯åŠ¨å‘½ä»¤è¡Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># å¯åŠ¨æ—¶ cd åˆ° home<br>C:\Windows\system32\wsl.exe -d &lt;distr-name&gt; --cd ~<br></code></pre></td></tr></table></figure><ul><li>å›¾æ ‡ï¼š<code>https://assets.ubuntu.com/v1/49a1a858-favicon-32x32.png</code></li><li>Ubuntuç»ˆç«¯ç»å…¸å¤–è§‚é…è‰²</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/8d8c6cd6db88c543cce7b682c3d4c027.png" alt="screen-capture"></p><h2 id="ç½‘ç»œ"><a class="markdownIt-Anchor" href="#ç½‘ç»œ"></a> ç½‘ç»œ</h2><p>wsl é»˜è®¤ç½‘ç»œæ¨¡å¼ä¸º <code>NAT</code>ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ localhost ä»£ç†ï¼Œå¤šä¸ªdistrobutionå…±äº«åŒä¸€ä¸ªç½‘ç»œæ ˆï¼ˆæ„å‘³ç€æœ‰ç›¸åŒçš„ip ğŸ˜“ )-:</p><p>ä»€ä¹ˆæ˜¯ <code>NAT</code>: é€šè¿‡å¯¹ IP æ•°æ®åŒ…ä¸­æº IP / ç«¯å£ï¼Œç›®çš„ IP / ç«¯å£ä¿®æ”¹ï¼Œä½¿å¾—åœ¨åŒä¸€ä¸ªç§æœ‰å­ç½‘ä¸­çš„ä¸»æœºé€šè¿‡ä¸€ä¸ªå…±æœ‰ IP å¯¹å¤–è®¿é—®çš„ç½‘ç»œæŠ€æœ¯ã€‚</p><p>å‡ ç§ NAT ç±»å‹</p><p>å‰ä¸‰ç§ï¼š<code>æ˜ å°„ IP / port</code> ä¸ <code>ç›®çš„ IP / port</code> æ— å…³ï¼Œå‰è€…å›ºå®šã€‚</p><p>å¯¹ç§°NATï¼šå¯¹äºæ¯ä¸€ä¸ªä¸åŒçš„ <code>ç›®çš„ IP / port</code> å…¶ <code>æ˜ å°„ IP / port</code> éƒ½ä¸åŒï¼Œ<strong>åŠ¨æ€</strong>ç”Ÿæˆã€‚</p><table><thead><tr><th>Name</th><th>ç¤ºä¾‹å›¾</th></tr></thead><tbody><tr><td>å®Œå…¨åœ†é”¥å‹NATï¼ˆFull cone NATï¼Œä¹Ÿå«NAT1ï¼‰<br>1. ä¸€æ—¦å†…éƒ¨åœ°å€ï¼ˆiAddr:iPortï¼‰æ˜ å°„åˆ°å¤–éƒ¨åœ°å€ï¼ˆeAddr:ePortï¼‰ï¼Œæ‰€æœ‰å‘è‡ªiAddr:iPortçš„æ•°æ®åŒ…éƒ½ç»ç”±eAddr:ePortå‘å¤–å‘é€ã€‚ <br>2. ä»»æ„å¤–éƒ¨ä¸»æœºéƒ½èƒ½ç»ç”±å‘é€æ•°æ®åŒ…ç»™eAddr:ePortåˆ°è¾¾iAddr:iPortã€‚</td><td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/f959905884b8f13a8b2db18f420d2c9e.png" alt="æˆªå›¾"></td></tr><tr><td>å—é™åœ†é”¥å‹NATï¼ˆRestricted cone NATï¼Œä¹Ÿå«NAT2ï¼‰ <br>1. ä¸€æ—¦å†…éƒ¨åœ°å€ï¼ˆiAddr:iPortï¼‰æ˜ å°„åˆ°å¤–éƒ¨åœ°å€ï¼ˆeAddr:ePortï¼‰ï¼Œæ‰€æœ‰å‘è‡ªiAddr:iPortçš„æ•°æ®åŒ…éƒ½ç»ç”±eAddr:ePortå‘å¤–å‘é€ã€‚ <br>2. å”¯iAddr:iPortæ›¾ç»å‘é€æ•°æ®åŒ…åˆ°å¤–éƒ¨ä¸»æœºï¼ˆnAddr:anyï¼‰ï¼Œå¤–éƒ¨ä¸»æœºæ‰èƒ½ç»ç”±å‘é€æ•°æ®åŒ…ç»™eAddr:ePortåˆ°è¾¾iAddr:iPortã€‚ï¼ˆæ³¨ï¼šanyæŒ‡å¤–éƒ¨ä¸»æœºæºç«¯å£ä¸å—é™åˆ¶ã€‚ï¼‰</td><td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/653ac91a75604219cd939402dc3c64dd.png" alt="æˆªå›¾"></td></tr><tr><td>ç«¯å£å—é™åœ†é”¥å‹NATï¼ˆPort-Restricted cone NATï¼Œä¹Ÿå«NAT3ï¼‰ ç±»ä¼¼å—é™åˆ¶é”¥å½¢NATï¼Œä½†æ˜¯è¿˜æœ‰ç«¯å£é™åˆ¶ã€‚ <br>1.  ä¸€æ—¦å†…éƒ¨åœ°å€ï¼ˆiAddr:iPortï¼‰æ˜ å°„åˆ°å¤–éƒ¨åœ°å€ï¼ˆeAddr:ePortï¼‰ï¼Œæ‰€æœ‰å‘è‡ªiAddr:iPortçš„æ•°æ®åŒ…éƒ½ç»ç”±eAddr:ePortå‘å¤–å‘é€ã€‚ <br>2. åœ¨å—é™åœ†é”¥å‹NATåŸºç¡€ä¸Šå¢åŠ äº†å¤–éƒ¨ä¸»æœºæºç«¯å£å¿…é¡»æ˜¯å›ºå®šçš„</td><td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/ed4537e078f93a31382893730f72077a.png" alt="æˆªå›¾"></td></tr><tr><td>å¯¹ç§°NATï¼ˆSymmetric NATï¼Œä¹Ÿå«NAT4ï¼‰ <br>1. æ¯ä¸€ä¸ªæ¥è‡ªç›¸åŒå†…éƒ¨IPä¸ç«¯å£ï¼Œåˆ°ä¸€ä¸ªç‰¹å®šç›®çš„åœ°IPå’Œç«¯å£çš„è¯·æ±‚ï¼Œéƒ½æ˜ å°„åˆ°ä¸€ä¸ªç‹¬ç‰¹çš„å¤–éƒ¨IPå’Œç«¯å£ã€‚ åŒä¸€å†…éƒ¨IPä¸ç«¯å£å‘åˆ°ä¸åŒçš„ç›®çš„åœ°å’Œç«¯å£çš„ä¿¡æ¯åŒ…ï¼Œéƒ½ä½¿ç”¨ä¸åŒçš„æ˜ å°„ã€‚ <br>2. åªæœ‰æ›¾ç»æ”¶åˆ°è¿‡å†…éƒ¨ä¸»æœºæ•°æ®çš„å¤–éƒ¨ä¸»æœºï¼Œæ‰èƒ½å¤ŸæŠŠæ•°æ®åŒ…å‘å›ã€‚</td><td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/02/tools/WSL%20%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/68ccbc65d8d30b41cd6904a1446b7206.png" alt="æˆªå›¾"></td></tr></tbody></table><h3 id="è§£å†³å¤šä¸ªdistrå…±äº«åŒä¸€ä¸ªip"><a class="markdownIt-Anchor" href="#è§£å†³å¤šä¸ªdistrå…±äº«åŒä¸€ä¸ªip"></a> è§£å†³å¤šä¸ªdistrå…±äº«åŒä¸€ä¸ªip</h3><p>é¢ã€‚ã€‚æ²¡å¾—è§£å†³ï¼Œè‡³å°‘ä¸èƒ½é€šè¿‡ç°æœ‰çš„é…ç½®é¡¹è§£å†³ï¼Œæ‰€æœ‰çš„ wsl distr éƒ½æ˜¯å…±äº«ä¸€ä¸ª  wsl vm ï¼Œæœ¬è´¨ä¸Šå¤„äºåŒä¸€ network namespaceï¼Œä¹Ÿæœ‰ä¸€äº› â€œå¥‡æ·«æŠ€å·§â€å¯ä»¥å®ç°ä¸åŒipï¼Œä½†éƒ½æœ‰ä¸€äº›è¿™æ ·é‚£æ ·çš„é™åˆ¶ï¼Œä¸å¤Ÿé€šç”¨ --_â€“</p><h3 id="è§£å†³ä»£ç†é—®é¢˜"><a class="markdownIt-Anchor" href="#è§£å†³ä»£ç†é—®é¢˜"></a> è§£å†³ä»£ç†é—®é¢˜</h3><blockquote><p>æœ€å¥½å…³é—­wslçš„é˜²ç«å¢™</p><p>~/.wslconfig</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[wsl2]<br>firewall=false<br></code></pre></td></tr></table></figure></blockquote><p>ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>é€šè¿‡å±€åŸŸç½‘å½¢å¼æ‰‹åŠ¨è®¾ç½®åˆ°å®¿ä¸»æœºçš„ä»£ç†.</li><li>ä½¿ç”¨ <code>mirror</code>ç½‘ç»œæ¨¡å¼. ï¼ˆè¯¥ç§æ–¹å¼ä¸‹å®¿ä¸»æœºé€šè¿‡ <code>localhost:port</code> è®¿é—® docker å®¹å™¨ ä¼šæœ‰äº›é—®é¢˜ï¼Œé€šè¿‡ <code>LAN IP</code>  è®¿é—®æ˜¯æ²¡é—®é¢˜çš„ã€‚ï¼‰</li></ol><h4 id="mirror"><a class="markdownIt-Anchor" href="#mirror"></a> mirror</h4><h4 id="å±€åŸŸç½‘ä»£ç†"><a class="markdownIt-Anchor" href="#å±€åŸŸç½‘ä»£ç†"></a> å±€åŸŸç½‘ä»£ç†</h4><ol><li>å¼€å¯ä»£ç†è½¯ä»¶çš„å±€åŸŸç½‘è®¿é—®ã€‚</li><li>å›ºå®šå®¿ä¸»æœº wsl è™šæ‹Ÿç½‘å¡çš„ ip ï¼ˆç”µè„‘é‡å¯åä¼šå¤±æ•ˆ ğŸ˜“ï¼‰</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># å…ˆçœ‹çœ‹ç°åœ¨çš„ ip ä¸ mask</span><br>ipconfig<br><span class="hljs-comment"># PS ä¸‹ç®¡ç†å‘˜</span><br>netsh interface ip <span class="hljs-built_in">set</span> address name=<span class="hljs-string">&quot;&lt;wsl-vEthernet-name&gt;&quot;</span> <span class="hljs-keyword">static</span> &lt;host<span class="hljs-literal">-ip</span>&gt; &lt;mask&gt;<br></code></pre></td></tr></table></figure><ol start="3"><li>å›ºå®š wsl å®ä¾‹ ip ï¼ˆæ–¹ä¾¿åé¢è®¿é—® wsl å†…æœåŠ¡ï¼‰</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> vim /etc/netplan/01-netcfg.yaml<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">network:</span><br> <span class="hljs-attr">version:</span> <span class="hljs-number">2</span><br> <span class="hljs-attr">ethernets:</span><br>   <span class="hljs-attr">eth0:</span><br>     <span class="hljs-attr">dhcp4:</span> <span class="hljs-literal">no</span><br>     <span class="hljs-attr">addresses:</span><br>       <span class="hljs-bullet">-</span> <span class="hljs-string">&lt;ip&gt;/N</span>  <span class="hljs-comment"># é™æ€ IP åœ°å€å’Œå­ç½‘æ©ç ï¼Œå¯ä»¥å‚ç…§ ip addr shouw eth0</span><br>     <span class="hljs-attr">gateway4:</span> <span class="hljs-string">&lt;host-ip&gt;</span> <span class="hljs-comment"># å®¿ä¸»æœºå›ºå®šçš„ ip</span><br>     <span class="hljs-attr">nameservers:</span><br>       <span class="hljs-attr">addresses:</span><br>         <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>           <span class="hljs-comment"># é¦–é€‰ DNS</span><br>         <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.4</span><span class="hljs-number">.4</span>           <span class="hljs-comment"># å¤‡ç”¨ DNS</span><br></code></pre></td></tr></table></figure><p>åº”ç”¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> netplan apply<br></code></pre></td></tr></table></figure><ol start="4"><li>ä¸º aptï¼Œcurlï¼Œdockerï¼Œgit è®¾ç½®ä»£ç†</li></ol><p>ä½¿ç”¨ zsh çš„é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰çš„ ç¯å¢ƒå˜é‡å¯¼å‡ºè„šæœ¬ä»£ç† apt curl</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-function"><span class="hljs-title">proxy</span></span> () &#123;<br>  host_proxy=&lt;host-ip&gt;:&lt;port&gt;<br>  <span class="hljs-built_in">export</span> ALL_PROXY=<span class="hljs-string">&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>&quot;</span><br>  <span class="hljs-built_in">export</span> HTTP_PROXY=<span class="hljs-string">&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>&quot;</span><br>  <span class="hljs-built_in">export</span> HTTPS_PROXY=<span class="hljs-string">&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>&quot;</span><br>  <span class="hljs-built_in">export</span> NO_PROXY=localhost,127.0.0.1<br>  git config --global http.proxy <span class="hljs-string">&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>&quot;</span><br>  git config --global https.proxy <span class="hljs-string">&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>&quot;</span><br>  <br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;Acquire::http::Proxy \&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>\&quot;;\nAcquire::https::Proxy \&quot;http://<span class="hljs-variable">$&#123;host_proxy&#125;</span>\&quot;;&quot;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span>  /etc/apt/apt.conf.d/apt-proxy.conf &gt; /dev/null<br>&#125;<br><br><span class="hljs-comment"># å–æ¶ˆä»£ç†</span><br><span class="hljs-function"><span class="hljs-title">unproxy</span></span> () &#123;<br>  <span class="hljs-built_in">unset</span> ALL_PROXY<br>  <span class="hljs-built_in">unset</span> HTTP_PROXY<br>  <span class="hljs-built_in">unset</span> HTTPS_PROXY<br>  git config --global --<span class="hljs-built_in">unset</span> http.proxy<br>  git config --global --<span class="hljs-built_in">unset</span> https.proxy<br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;&quot;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span>  /etc/apt/apt.conf.d/apt-proxy.conf &gt; /dev/null<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸º docker è®¾ç½®ä»£ç†</p><p>For docker daemon (to access images stored on Docker Hub and other registries, and to reach other nodes in a Docker swarm):</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> vim /etc/docker/daemon.json<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&#123;<br>  &quot;proxies&quot;: &#123;<br>    &quot;http-proxy&quot;: &quot;&lt;host-proxy&gt;&quot;,<br>    &quot;https-proxy&quot;: &quot;&lt;host-proxy&gt;&quot;,<br>    &quot;no-proxy&quot;: &quot;*.test.example.com,.example.org,127.0.0.0/8&quot;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> systemctl restart docker<br></code></pre></td></tr></table></figure><p>For builds and containers</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim ~/.docker/config.json<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&#123;<br> &quot;proxies&quot;: &#123;<br>   &quot;default&quot;: &#123;<br>     &quot;httpProxy&quot;: &quot;&lt;host-proxy&gt;&quot;,<br>     &quot;httpsProxy&quot;: &quot;&lt;host-proxy&gt;&quot;,<br>     &quot;noProxy&quot;: &quot;*.test.example.com,.example.org,127.0.0.0/8&quot;<br>   &#125;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>For docker building image,only avaliable during building the image</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker build --build-arg HTTP_PROXY=<span class="hljs-string">&quot;&lt;host-proxy&gt;&quot;</span> .<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨oh-my-zsh"><a class="markdownIt-Anchor" href="#ä½¿ç”¨oh-my-zsh"></a> ä½¿ç”¨oh-my-zsh</h2><p>å®‰è£… zsh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> apt update &amp;&amp; apt install zsh<br></code></pre></td></tr></table></figure><p>å®‰è£… oh-my-zsh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sh -c <span class="hljs-string">&quot;<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span><br></code></pre></td></tr></table></figure><p>å®‰è£…æ’ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="hljs-variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions<br>git <span class="hljs-built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="hljs-variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim ~/.zshrc<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">plugins=(git zsh-autosuggestions zsh-syntax-highlighting history-substring-search)<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">source</span> ~/.zshrc<br></code></pre></td></tr></table></figure><br><blockquote><p>å‚è€ƒï¼š</p><ul><li><p><a href="https://learn.microsoft.com/zh-cn/windows/wsl/networking">wsl</a></p></li><li><p><a href="https://docs.docker.com/engine/cli/proxy/">docker-cli-proxy</a></p><p><a href="https://docs.docker.com/engine/daemon/proxy/">docker-daemon-proxy</a></p></li><li><p><a href="https://ohmyz.sh/">ohmyzsh</a></p></li><li><p><a href="https://zh.wikipedia.org/wiki/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1">NAT</a></p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wsl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>classloader(1)</title>
      <link href="/2024/05/10/java-learn/classloader(1)/"/>
      <url>/2024/05/10/java-learn/classloader(1)/</url>
      
        <content type="html"><![CDATA[<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/05/10/java-learn/classloader(1)/d5a4c92f2400277998676178fc70e8f6.png" alt="ä»–ä»¬ä»¥ä¸ºæˆ‘ç–¯äº†ï¼Œå…¶å®æˆ‘æˆäº†ç™½æ—¥æ¢¦æƒ³å®¶ã€‚"></p><blockquote><p>java ä¸­çš„ClassLoader ç”¨äº<strong>åŠ¨æ€</strong>åŠ è½½javaç¨‹åºè¿è¡Œæ—¶æ‰€éœ€è¦çš„èµ„æºï¼šåŒ…æ‹¬è¦è£…é…è¿›jvmçš„classå­—èŠ‚ç æ–‡ä»¶ä»¥åŠä¸€äº›å…¶ä»–èµ„æºæ–‡ä»¶ã€‚</p></blockquote><h2 id="javaä¸­çš„å‡ ç§classloader"><a class="markdownIt-Anchor" href="#javaä¸­çš„å‡ ç§classloader"></a> Javaä¸­çš„å‡ ç§ClassLoader</h2><h3 id="bootstrapclassloader"><a class="markdownIt-Anchor" href="#bootstrapclassloader"></a> BootStrapClassLoader</h3><p><strong>å…³äºBootStrapClassLoaderçš„ä½œç”¨</strong></p><blockquote><p>javaé‡Œclassæ˜¯è¢«java.lang.ClassLoaderåŠ è½½çš„ï¼Œé‚£ä¹ˆï¼Œé—®é¢˜æ˜¯ï¼Œè°æ¥åŠ è½½ClassLoaderå‘¢ï¼Ÿ</p><p>â€“&gt;&gt;There is where the bootstrap or primordial class loader comes into play.</p><p>BootStrapClassLoader æ˜¯å…¶ä»–CLassLoderçš„é¡¶çº§parentï¼Œå…¶å®ç°æ˜¯jvmçš„ä¸€éƒ¨åˆ†ï¼Œè¢«ç¼–å†™åœ¨jvmæœ¬åœ°ä»£ç ä¸­ï¼Œå¹¶ä¸ä»¥classçš„å½¢å¼å­˜åœ¨javaé‡Œï¼Œå› æ­¤å®ƒä¹Ÿä¼šéšç€jvmçš„ä¸åŒè€Œä¸åŒã€‚å¹¶ä¸”åœ¨javaé‡Œé¢è¢«ä»£è¡¨ä¸º<strong>null</strong>ã€‚</p></blockquote><p><strong>BootstrapCLassLoaderè´Ÿè´£åŠ è½½ï¼š</strong></p><p><strong>java8ä»¥åŠä¹‹å‰ï¼š</strong></p><ul><li>jdkçš„æ ¸å¿ƒç±»ï¼Œæ¯”å¦‚ <code>%JAVA_HOME%/jre/lib</code>ä¸‹çš„ <code>rt.jar</code>å’Œå…¶ä¸­çš„å…¶ä»–æ ¸å¿ƒåº“ã€‚</li></ul><p><strong>java9æ¨¡å—åŒ–ä¹‹åï¼š</strong></p><ul><li>è¿™äº›æ ¸å¿ƒç±»åº“ä»¥ä¸€ç§æ›´åŠ é«˜æ•ˆçš„æ–¹å¼å­˜å‚¨åœ¨<code>%JAVA_HOME%/lib</code>ä¸‹é¢ï¼ˆå…³äºè¿™ä¸ªç›®å½•ä¸‹ä¸€äº›æ–‡ä»¶çš„ä½œç”¨ã€‚ã€‚ã€‚ï¼‰</li><li>BootstrapClassLoaderåŠ è½½çš„æ¨¡å—(ä¸€éƒ¨åˆ†)ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">moduleClassLoader</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">ModuleLayer</span> <span class="hljs-variable">layer</span> <span class="hljs-operator">=</span> ModuleLayer.boot();<br>        layer.modules()<br>                .stream()<br>                .filter(m-&gt; m.getClassLoader()==<span class="hljs-literal">null</span>)<br>                .forEach(<span class="hljs-keyword">module</span> -&gt; &#123;<br>            <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">module</span>.getClassLoader();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">classLoaderName</span> <span class="hljs-operator">=</span> classLoader==<span class="hljs-literal">null</span> ? <span class="hljs-string">&quot;bootstrap&quot;</span> : classLoader.getName();<br>            System.out.println(classLoaderName + <span class="hljs-string">&quot;: &quot;</span> + <span class="hljs-keyword">module</span>.getName());<br>        &#125;);<br>    &#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">sout&gt;&gt;</span><br><span class="hljs-comment">bootstrap: java.base</span><br><span class="hljs-comment">bootstrap: java.rmi</span><br><span class="hljs-comment">bootstrap: java.logging</span><br><span class="hljs-comment">bootstrap: java.security.sasl</span><br><span class="hljs-comment">bootstrap: jdk.nio.mapmode</span><br><span class="hljs-comment">bootstrap: java.prefs</span><br><span class="hljs-comment">bootstrap: java.instrument</span><br><span class="hljs-comment">bootstrap: java.xml</span><br><span class="hljs-comment">bootstrap: java.datatransfer</span><br><span class="hljs-comment">bootstrap: jdk.naming.rmi</span><br><span class="hljs-comment">bootstrap: jdk.sctp</span><br><span class="hljs-comment">bootstrap: jdk.jfr</span><br><span class="hljs-comment">bootstrap: jdk.management.jfr</span><br><span class="hljs-comment">bootstrap: java.desktop</span><br><span class="hljs-comment">bootstrap: jdk.unsupported</span><br><span class="hljs-comment">bootstrap: jdk.net</span><br><span class="hljs-comment">bootstrap: java.management.rmi</span><br><span class="hljs-comment">bootstrap: java.management</span><br><span class="hljs-comment">bootstrap: java.naming</span><br><span class="hljs-comment">bootstrap: jdk.management</span><br><span class="hljs-comment">bootstrap: jdk.management.agent</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h3 id="platform-classloaderextension-classloader"><a class="markdownIt-Anchor" href="#platform-classloaderextension-classloader"></a> PlatForm ClassLoader(Extension ClassLoader)</h3><p><strong>åŠ è½½jdk å…¶ä»–coreç±»åº“ï¼Œä»¥ä¾›æ‰€æœ‰applicationä½¿ç”¨</strong></p><p>**java8åŠä»¥å‰ï¼š **</p><ul><li>åŠ è½½ <code>%JAVA_HOME%/jre/lib/ext</code>ä¸‹çš„jarä»¥åŠ <code>java.ext.dirs</code>system propertryæŒ‡å®šçš„ç›®å½•ä¸‹çš„jar</li></ul><p><strong>java9</strong><br>PlatformClassLoaderåŠ è½½çš„æ¨¡å—(ä¸€éƒ¨åˆ†)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">platform: java.xml.crypto<br>platform: jdk.jsobject<br>platform: jdk.crypto.ec<br>platform: jdk.httpserver<br>platform: jdk.security.jgss<br>platform: java.scripting<br>platform: jdk.localedata<br>platform: jdk.crypto.mscapi<br>platform: java.sql.rowset<br>platform: jdk.accessibility<br>platform: java.sql<br>platform: java.smartcardio<br>platform: jdk.charsets<br>platform: jdk.naming.dns<br>platform: jdk.crypto.cryptoki<br>platform: jdk.zipfs<br>platform: java.transaction.xa<br>platform: jdk.dynalink<br>platform: jdk.xml.dom<br>platform: jdk.security.auth<br>platform: java.compiler<br>platform: java.net.http<br>platform: java.security.jgss<br></code></pre></td></tr></table></figure><h3 id="systemclassloader"><a class="markdownIt-Anchor" href="#systemclassloader"></a> SystemClassLoader</h3><blockquote><p>ç”¨äºåŠ è½½ç±»è·¯å¾„ä»¥åŠæ¨¡å—è·¯å¾„ä¸Šçš„åº”ç”¨çº§åˆ«çš„classã€‚</p></blockquote><p><strong>java8åŠä»¥å‰ï¼š å‘½ä»¤è¡Œçš„ ï¼š</strong>  <code>java [-classpath|-cp] /path/to/classes:/path/to/lib/* package.to.MainClass</code></p><p><strong>java9ä»¥åè¿˜å¯ä»¥ï¼š</strong>  <code>java --module-path /path/to/modules -m mainModule/package/to/MainClass</code></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java-modularity</title>
      <link href="/2024/04/22/java-learn/java-modularity/"/>
      <url>/2024/04/22/java-learn/java-modularity/</url>
      
        <content type="html"><![CDATA[<h2 id="concept"><a class="markdownIt-Anchor" href="#concept"></a> CONCEPT</h2><blockquote><p>åœ¨java9ï¼Œjavaå¼•å…¥äº†ä¸€ç§ä¸åŒäºï¼Œæˆ–è€…å¯ä»¥è¯´æ˜¯åœ¨ <code>package</code> ä¹‹ä¸Šçš„ä¸€ä¸ªæ–°çš„æŠ½è±¡å±‚â€“&gt; JPMSã€‚</p><p>ä»€ä¹ˆæ˜¯moduleã€‚ moduleæ˜¯ä¸€ç³»åˆ—ç›¸å…³çš„packageä¸resourceçš„é›†åˆ</p><p>moduleçš„ä¸¤ç§è¡¨ç°å½¢å¼ï¼š <code>jar</code>ä¸<code>å·²ç¼–è¯‘é¡¹ç›®</code></p></blockquote><h3 id="module-properties"><a class="markdownIt-Anchor" href="#module-properties"></a> Module-Properties</h3><ul><li><code>name</code> ï¼š Moduleçš„<code>name</code>å‘½åæ–¹å¼ä¸<code>package</code>ç›¸åŒï¼Œ<code>goupId</code>åå†™ã€‚</li><li><code>requires | uses</code> Moduleæ‰€ä¾èµ–çš„å…¶ä»–æ¨¡å— | æœåŠ¡ã€‚æ‰€æœ‰æ¨¡å—éƒ½ç›´æ¥æˆ–è€…é—´æ¥ä¾èµ–<code>java.base</code>ã€‚</li><li><code>exports</code>Moduleå…¬å¼€çš„å¯ä»¥è¢«å…¶ä»–æ¨¡å—ä¾èµ–çš„ package</li><li><code>provides</code> Module æä¾›çš„æœåŠ¡</li><li><code>open&lt;module level&gt; | opens&lt;package level&gt;</code> å…¶ä»–moduleå¯¹ç§æœ‰åŒ…çš„åå°„æƒé™</li></ul><h3 id="module-type"><a class="markdownIt-Anchor" href="#module-type"></a> Module-Type</h3><ul><li><strong>ç³»ç»ŸModule:</strong> åŒ…æ‹¬æ ¹æ®javaSEæ ‡å‡†å®ç°çš„<code>java</code>å¼€å¤´çš„moduleå’Œ jdkå†…éƒ¨ä½¿ç”¨çš„module</li><li><strong>åº”ç”¨çº§åˆ«Module:</strong> å…·æœ‰<code>module-info.java</code>æè¿°æ–‡ä»¶çš„æˆ‘ä»¬è‡ªå®šä¹‰ä¸ç¬¬ä¸‰æ–¹jaræˆ–è€…ç¼–è¯‘é¡¹ç›®</li><li><strong>è‡ªåŠ¨Module:</strong> è¢«æ·»åŠ åœ¨<code>--module-path</code>æ¨¡å—è·¯å¾„ä¸Šçš„<strong>æ²¡æœ‰<code>module-info.java</code></strong> çš„<code>jar</code>,ä»–ä»¬é€šå¸¸å– <code>example-1.0-GA.jar</code>ä¸­çš„<code>example</code>ä½œä¸ºmoduleåï¼Œå¯ä»¥ç”¨<code>jdeps</code>æŸ¥çœ‹åˆ°</li><li><strong>æœªå‘½åModule:</strong> è¢«æ·»åŠ åœ¨ <code>--class-path</code> ç±»è·¯å¾„ä¸Šçš„  <code>class</code>æˆ–è€… <code>jar</code>éƒ½è¢«åŠ åˆ° <code>Unnamed Module</code></li></ul><h3 id="module-infojava"><a class="markdownIt-Anchor" href="#module-infojava"></a> module-info.java</h3><p><strong>å‚è€ƒ <a href="https://www.baeldung.com/java-modularity#module-declarations">baeldung-java-modularity-module-declarations</a></strong></p><h2 id="examples"><a class="markdownIt-Anchor" href="#examples"></a> Examples</h2><h3 id="simple-multiple-modules"><a class="markdownIt-Anchor" href="#simple-multiple-modules"></a> Simple-Multiple-Modules</h3><p>å‚è€ƒ <strong><a href="https://www.baeldung.com/java-modularity#putting-it-all-together">baeldung</a></strong></p><h3 id="maven-multiple-modules"><a class="markdownIt-Anchor" href="#maven-multiple-modules"></a> Maven-Multiple-Modules</h3><h4 id="cteate-maven-project"><a class="markdownIt-Anchor" href="#cteate-maven-project"></a> Cteate-Maven-Project</h4><blockquote><p>jdkä¸ºopenjdk17ã€‚å°è¯•æ„å»ºå¸¦æœ‰å…¶ä»–ä¾èµ–çš„mavenæ¨¡å—åŒ–é¡¹ç›®ï¼ŒåŒ…æ‹¬æœªæ¨¡å—åŒ–çš„ä¾èµ–ä¸å·²ç»æ¨¡å—åŒ–çš„ä¾èµ–ã€‚</p></blockquote><h5 id="project-struct"><a class="markdownIt-Anchor" href="#project-struct"></a> Project-Struct</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/04/22/java-learn/java-modularity/42c92bc4bb9963c6590693c25a6abd18.png" alt="screen-capture"></p><p>ä¸ä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œåœ¨<code>java</code>æºç ç›®å½•ä¸‹ï¼Œå¤šäº†<code>module-info.java</code>æ–‡ä»¶ã€‚</p><h5 id="pomxml"><a class="markdownIt-Anchor" href="#pomxml"></a> pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.fastjson2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>ç”±äºæ˜¯æ¨¡å—åŒ–çš„projectï¼Œæ‰€ä»¥å¦‚æœä¾èµ–ä¸ä»…è¦åœ¨<code>pom.xml</code>ä¸­å£°æ˜å¼•å…¥ï¼Œå¹¶ä¸”åªè¦åˆ›å»ºäº†  <code>module-info.java</code>æ–‡ä»¶ï¼Œå°±è¦åœ¨å…¶ä¸­å†™å…¥ç›¸å…³é…ç½®ï¼Œå¦åˆ™ä¼šç¼–è¯‘å¤±è´¥ã€‚</p><h5 id="module-infojava-2"><a class="markdownIt-Anchor" href="#module-infojava-2"></a> <code>module-info.java</code></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">module</span> moduleA &#123;<br>    <span class="hljs-keyword">exports</span> world.langyu.provider;<br>    <span class="hljs-keyword">requires</span> org.mybatis;<br>    <span class="hljs-keyword">requires</span> com.alibaba.fastjson2;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="mainjava"><a class="markdownIt-Anchor" href="#mainjava"></a> <code>Main.java</code></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> world.langyu.provider;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSON;<br><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.Configuration;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;work dir: &quot;</span> + System.getProperty(<span class="hljs-string">&quot;user.dir&quot;</span>));<br>        run();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>()<br>                .build(Resources.getResourceAsStream(<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>))<br>                .getConfiguration();<br>        System.out.println(<span class="hljs-string">&quot;moduleA&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;none modularity dep: configuration of mybatis: &quot;</span>+ configuration.getVariables());<br>        System.out.println(<span class="hljs-string">&quot;modularity dep: fastjson: &quot;</span>+ JSON.class.getName());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç›®å‰çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œç„¶å<code>ç¼–è¯‘</code></p><h4 id="compile"><a class="markdownIt-Anchor" href="#compile"></a> Compile</h4><p>åœ¨æ¨¡å—æ ¹éƒ¨å½•ä¸‹ï¼š</p><p><code>javac -d .\target\classes -p &quot;D:\maven_local_repository\com\alibaba\fastjson2\fastjson2\2.0.10\fastjson2-2.0.10.jar;D:\maven_local_repository\org\mybatis\mybatis\3.5.13\mybatis-3.5.13.jar&quot; .\src\main\java\module-info.java .\src\main\java\world\langyu\provider\*.java</code></p><p>å…¶ä¸­</p><ul><li><code>-d</code>é€‰é¡¹æŒ‡å®šç¼–è¯‘çš„è¾“å‡ºç›®å½•ã€‚</li><li><code>-p/--module-path</code>é€‰é¡¹ æŒ‡å®šåº”ç”¨ä»£ç ä¾èµ–çš„å¤–éƒ¨æ¨¡å—çš„è·¯å¾„ï¼Œé€šå¸¸æ˜¯jaråŒ…è·¯å¾„ã€‚æ³¨æ„åœ¨<u>windows</u>ä¸‹ï¼Œå‚æ•°è¦ç”¨<code>&quot;&quot;</code>åŒ…èµ·æ¥ï¼Œå¹¶ä¸”å¤šä¸ªè·¯å¾„ä¹‹é—´ç”¨<code>;</code>éš”å¼€ã€‚</li><li>ç”±äºæ˜¯å•æ¨¡å—ï¼Œåè·Ÿ <code>module-info.java</code>æ–‡ä»¶çš„è·¯å¾„ã€‚</li><li>æœ€ååˆ—å‡ºè¦ç¼–è¯‘çš„<code>.java</code>æ–‡ä»¶çš„è·¯å¾„</li></ul><p>emmmmï¼Œä¸å‡ºæ„å¤–çš„è¯å°±è¦å‡ºæ„å¤–äº†<code>=_=</code>ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">.\src\main\java\module-info.java:4: é”™è¯¯: æ‰¾ä¸åˆ°æ¨¡å—: com.alibaba.fastjson2<br>    requires com.alibaba.fastjson2;<br>                        ^<br>1 ä¸ªé”™è¯¯<br></code></pre></td></tr></table></figure><p>é¡ºç€è¿™ä¸ªæŠ¥é”™å°±æ‰¾åˆ°äº†<code>fastjson2</code>çš„githubçš„issueï¼Œç„¶åæ˜¯ä»–ä»¬çš„ä¸€ä¸ªbugï¼Œæœ¬æ¥ç”Ÿä¸ªç‰ˆæœ¬å°±å¯ä»¥è§£å†³äº†ï¼Œä½†æˆ‘æƒ³çœ‹çœ‹åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé—®é¢˜-&gt;<a href="https://github.com/alibaba/fastjson2/issues/780">fastjson2-issue</a></p><p>ç»´æŠ¤çš„äººä¿®æ”¹è¿™ä¸ªbugæ˜¯å»ä¿®æ”¹äº†<code>core/pom.xml</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/04/22/java-learn/java-modularity/ff3fab2d5c28473038752c112b73b5dd.png" alt="screen-capture"></p><p>åŸæ¥ <code>fastjson2</code>ä½¿ç”¨çš„ä¸€ä¸ª<a href="https://github.com/moditect/moditect">ç¬¬ä¸‰æ–¹æ’ä»¶</a>æ¥åšçš„æ¨¡å—åŒ–ï¼Œå®ƒçš„ç¼–è¯‘äº§ç‰©è¿˜æ˜¯java8çš„ã€‚</p><p>æ¢å®Œç‰ˆæœ¬ä¹‹åé¡ºåˆ©ç¼–è¯‘</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/04/22/java-learn/java-modularity/dbd0caa5f6554acecf13a7839f550dd4.png" alt="screen-capture"></p><p>å› ä¸ºæˆ‘ä»¬è¦ä¾èµ–ä¸€äº›é™æ€é…ç½®èµ„æºï¼Œcopyè¿‡å»ã€‚</p><p>è¿è¡Œ</p><h5 id="non-modular-mode"><a class="markdownIt-Anchor" href="#non-modular-mode"></a> Non-modular-Mode</h5><p><strong>æ‰§è¡Œï¼š <code>java -cp &quot;.\target\classes;D:\maven_local_repository\com\alibaba\fastjson2\fastjson2\2.0.15\fastjson2-2.0.15.jar;D:\maven_local_repository\org\mybatis\mybatis\3.5.13\mybatis-3.5.13.jar&quot; world.langyu.provider.Main</code></strong></p><ul><li><code>cp</code>æŒ‡å®šæ‰€æœ‰æ¶‰åŠåˆ°çš„ç±»è·¯å¾„ã€‚</li><li>æœ€åå¸¦ä¸Šä¸»ç±»çš„å…¨é™å®šåã€‚</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/04/22/java-learn/java-modularity/3786ac2bef1e20ca5b2c49f9694c9883.png" alt="screen-capture"></p><h5 id="run-as-simple-jar"><a class="markdownIt-Anchor" href="#run-as-simple-jar"></a> run-as-simple-jar</h5><p><code>pom.xml</code>ä¸­é…ç½®<code>mainclass</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-jar-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">archive</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>world.langyu.provider.Main&lt;/mainC<br>                        lass&gt;<br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">archive</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>é¦–å…ˆè¦æ‰“æˆ<code>jar</code>åŒ…-&gt;<code>mvn clean package</code></p><p><strong>æ‰§è¡Œï¼š<code>java -p &quot;D:\maven_local_repository\com\alibaba\fastjson2\fastjson2\2.0.15\fastjson2-2.0.15.jar;D:\maven_local_repository\org\mybatis\mybatis\3.5.13\mybatis-3.5.13.jar&quot; --add-modules com.alibaba.fastjson2,org.mybatis -jar .\target\moduleA-1.0-SNAPSHOT.jar</code></strong></p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><code>-p</code>æŒ‡å®šæ‰€ä¾èµ–çš„<code>jar</code>çš„è·¯å¾„ï¼Œ<code>-p</code>çš„å…¨ç§°æ˜¯<code>--module-path</code>,è™½è¯´æ˜¯<code>module</code>ï¼Œä½†æ˜¯ JPMSä¸­ï¼Œ<code>module</code>çš„åˆ†å‘äº§ç‰©ä¾ç„¶æ˜¯<code>jar</code>å½¢å¼ã€‚</li><li><code>fastjson2</code>æ˜¯ä¸ªæ¨¡å—åŒ–çš„jarï¼Œå¯ä»¥åœ¨ <code>fastjson2-2.0.15.jar!\META-INF\versions\9\module-info.class</code>æ‰¾åˆ°æ¨¡å—æè¿°æ–‡ä»¶ï¼Œé‡Œé¢è‡ªç„¶æœ‰module-nameï¼Œæ‰€ä»¥åœ¨åé¢<code>--add-modules</code>æŒ‡å®šçš„å‚æ•°ä¸­å°±å¯ä»¥æŒ‡å®šå…¶å®šä¹‰çš„<code>com.alibaba.fastjson2</code>ã€‚ä½†å¥‡æ€ªçš„æ˜¯ï¼Œ<code>mybatis</code>åˆ†å‘çš„jarä¸­æˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°<code>module-info.java</code>ï¼Œè¿™ä¸ªåç§°æˆ‘æ˜¯ä»åœ¨ç¼–å†™<code>moduleA</code>çš„<code>module-info.java</code>æ–‡ä»¶æ—¶ï¼Œ<code>idea</code>æç¤ºæˆ‘çš„æ‰€è¦<code>requires</code>çš„module-name,ä½†æŒ‰ç†æ¥è¯´ï¼Œå¦‚æœä½ æ²¡æœ‰æ¨¡å—åŒ–ï¼Œé‚£å°±ä¼šè½¬ä¸º<code>Automatic-Module</code>,æ¨¡å—åé»˜è®¤æ˜¯<code>xxxlib-1.0-xx.jar</code>ä¸­çš„<code>xxxlib</code>ï¼Œä¹Ÿå°±æ˜¯ç‰ˆæœ¬å·å‰é¢çš„å†…å®¹ï¼Œä½†è¿™æ—¶çš„<code>mybatis</code>å¹¶ç¬¦åˆé¢„æœŸã€‚</li></ul><p>äºæ˜¯æˆ‘é¡ºè—¤æ‘¸ç“œï¼Œå»ç¿»äº†<code>mybatis</code>çš„jarï¼Œç„¶ååœ¨å…¶ä¸­çš„<code>META_INF/MANIFEST.MF</code>ä¸­æ‰¾åˆ°äº†</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/04/22/java-learn/java-modularity/7060d4528070a203486153c501e585c3.png" alt="86a11f912c46fe4bc8d51af9602e27d8.png"></p><p>æœ‰ç§è§£å¯†çš„å‘³é“å“ˆå“ˆå“ˆâ€”~~~</p><p>åŸæ¥<code>mybatis</code>è¿™ä¸ªç¼–è¯‘çš„ç‰ˆæœ¬æ˜¯<code>jdk17</code>ï¼Œçœ‹æ¥<code>mybatis</code>æ¨¡å—åŒ–çš„åšæ³•å¾ˆç®€å•ï¼š</p><p><strong>åˆ©ç”¨äº† Automatic-Module</strong>æœºåˆ¶ï¼š</p><ol><li>å®ƒæ²¡æœ‰<code>module-info.java</code>æ–‡ä»¶ï¼Œå½“è¢«å…¶ä»–å¼€å‘è€…ä½œä¸ºä¾èµ–æ·»åŠ åˆ°æ¨¡å—è·¯å¾„ä¸Š(<code>-p</code>)æ—¶,ä»–ä¼šæˆä¸ºä¸€ä¸ªè‡ªåŠ¨æ¨¡å—ï¼š1. <code>export and open all packages</code> 2. <code>have full read access to every other module loaded by the module path</code></li><li>é€šè¿‡åœ¨ <code>MANIFEST.MF</code>æ–‡ä»¶ä¸­æŒ‡å®š<code>Automatic-Module-Name</code>æ¥è¦†ç›–é»˜è®¤çš„module-nameã€‚</li><li>è¦åšåˆ° <code>2.</code> å¯ä»¥åœ¨<code>pom.xml</code>ä¸­é…ç½®<code>maven-jar-plugin</code></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-jar-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">archive</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">manifestEntries</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Automatic-Module-Name</span>&gt;</span>$&#123;module.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Automatic-Module-Name</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">manifestEntries</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">archive</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åå…¶ä»–æ¨¡å—å°±å¯ä»¥ç”¨<code>$&#123;module.name&#125;</code>æ¥ç”Ÿå‘½å¯¹è¿™ä¸ªæ¨¡å—çš„ä¾èµ–ã€‚</p><p>é¡ºå¸¦æä¸€å˜´ï¼Œæˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œ<code>idea</code>å¯ä»¥åœ¨ä½ æŒ‡å®šäº†<code>Automatic-Module-Name</code>æˆ–è€…è¿™ä¸ªæ¨¡å—çš„ <code>artifactId</code>(è¿™ä¸ªæ˜¯å› ä¸ºå¦‚æœä¸æŒ‡å®šjarçš„åç§°ï¼Œé»˜è®¤æ˜¯<code>$&#123;artifactId&#125;-&#123;version&#125;.jar</code>)ç„¶å<code>reload maven projects</code>å æç¤ºæˆ–è¯†åˆ«å‡ºæ¥çš„module-nameã€‚</p><p>ä¸€ç›´å¾ˆæƒ³æ‰¾åˆ°èƒ½è¿™æ ·åšçš„å‡ºå¤„(åœ¨<code>MANIFEST.MF</code>ä¸­æŒ‡å®š <code>Automatic-Module-Name</code>),æ¨æµ‹æ˜¯<code>JEP</code>è®¨è®ºå‡ºæ¥çš„ã€‚</p><ul><li><a href="https://mail.openjdk.org/pipermail/jpms-spec-experts/2017-February/000582.html">mail.openjdk-how to name modules, automatic and otherwise</a></li><li><a href="https://mail.openjdk.org/pipermail/jigsaw-dev/2017-January/011106.html">Automatic module names</a></li><li><a href="https://maven.apache.org/shared/maven-archiver/examples/manifestEntries.html">maven-jar-plugin</a></li><li><a href="https://dev.java/learn/modules/automatic-module/#module-resolution-for-automatic-modules">dev.java</a></li></ul><h4 id="ç¼–è¯‘ä¸è¿è¡Œä¸­æœ‰å…³unnamed-moduleçš„é—®é¢˜"><a class="markdownIt-Anchor" href="#ç¼–è¯‘ä¸è¿è¡Œä¸­æœ‰å…³unnamed-moduleçš„é—®é¢˜"></a> ç¼–è¯‘ä¸è¿è¡Œä¸­æœ‰å…³Unnamed-Moduleçš„é—®é¢˜</h4><h5 id="ä»€ä¹ˆæ˜¯unnamed-module"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯unnamed-module"></a> ä»€ä¹ˆæ˜¯Unnamed-Module</h5><blockquote><p>è¢«æ·»åŠ åˆ°â€“class-pathä¸­çš„classesä¸jaréƒ½ä¼šè¢«åŠ åˆ°Unnamed-Moduleä¸­ã€‚</p><p>Unnamed-Moduleå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><ol><li>Export and open all its packages to every other module, like the Automatic Module.</li><li>Other module can only access classes in Unname-Module by reflection</li><li>The declaration of dependencies by the unnamed module on other modules is futile at runtime.</li></ol></blockquote><p>æœªå‘½åæ¨¡å—å°±æ˜¯æ‰€æœ‰æ”¾åœ¨<code>-classpath</code>ä¸Šçš„ç±»ã€æ¨¡å—çš„ä¸€ä¸ªå¤§æ‚çƒ©æ¨¡å—ã€‚å› ä¸ºæ˜¯<code>æœªå‘½å</code>ï¼Œæ‰€ä»¥ä¸èƒ½è¢«å…¶ä»–æ¨¡å—ç›´æ¥ä¾èµ–ï¼Œå…¶ä»–æ¨¡å—åªèƒ½é€šè¿‡åå°„çš„æ–¹å¼è®¿é—®å…¶ä¸­çš„ç±»ï¼Œå¯¹åº”<code>1ã€2</code>ä¸¤ç‚¹ã€‚</p><p>å…³äºç¬¬ä¸‰ç‚¹ï¼šæœªå‘½åæ¨¡å—ä¸­å¯¹å¤–éƒ¨å£°æ˜çš„ä¾èµ–ï¼ˆå³ä½¿æ˜¯åœ¨<code>module-info.java</code>ä¸­ç”Ÿå‘½çš„  <code>require</code>ï¼‰ä¸ä¼šè¢«æ¨¡å—ç³»ç»Ÿè‡ªåŠ¨è§£æå’ŒåŠ è½½ï¼Œé™¤éæ­¤æ—¶æœªå‘½åæ¨¡å—æ˜¯<code>root module</code>å…¶ä¸­ä¹‹ä¸€ã€‚</p><h5 id="é—®é¢˜å¤ç°"><a class="markdownIt-Anchor" href="#é—®é¢˜å¤ç°"></a> é—®é¢˜å¤ç°</h5><p>æ¯”å¦‚ï¼š<strong>ç°åœ¨æœ‰A,Bä¸¤ä¸ªjarï¼ŒjarAï¼ŒjarBéƒ½å…·æœ‰module-info.javaï¼Œä¹Ÿå°±æ˜¯éƒ½æ˜¯æ¨¡å—åŒ–åçš„jarï¼ŒjarBä»£ç å±‚é¢åªä¾èµ–äºjarA()ã€‚</strong></p><p><strong>jarBï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">module</span> moduleB &#123;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>jarA:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">module</span> moduleA &#123;<br>    <span class="hljs-keyword">requires</span> org.mybatis;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œï¼š</strong> <code>java -classpath D:\source-read\java-module\moduleA\target\moduleA-1.0-SNAPSHOT.jar -p &quot;D:\source-read\java-module\moduleB\target\moduleB-1.0-SNAPSHOT.jar;D:\maven_local_repository\org\mybatis\mybatis\3.5.13\mybatis-3.5.13.jar&quot; -m moduleB/world.langyu.consumer.Main</code></p><p><strong>æ³¨æ„æ­¤æ—¶æˆ‘ä»¬å°† jarAæ”¾åœ¨äº† ç±»è·¯å¾„ä¸Šï¼Œæ‰€ä»¥jarAæ˜¯Unnamed-Moduleçš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥å³ä½¿moduleAå£°æ˜äº†å¯¹mybatisçš„ä¾èµ–ï¼Œä½†è¿˜æ˜¯ä¼šå¾—åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">Caused by: java.lang.ClassNotFoundException: org.apache.ibatis.session.SqlSessionFactoryBuilder<br>        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)<br>        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)<br>        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)<br>        ... 6 more<br><br></code></pre></td></tr></table></figure><h5 id="é—®é¢˜åˆ†æ"><a class="markdownIt-Anchor" href="#é—®é¢˜åˆ†æ"></a> é—®é¢˜åˆ†æ</h5><p>åœ¨å¯åŠ¨å‚æ•°ä¸ŠåŠ ä¸Š<code>--show-module-resolution</code>æ¥æŸ¥çœ‹ <a href="https://stackoverflow.com/questions/48339598/list-the-modules-resolved-during-the-application-startup">modules resolved during app startup</a>ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">root moduleB file:///D:/source-read/java-module/moduleB/target/moduleB-1.0-SNAPSHOT.jar<br>java.base binds java.desktop jrt:/java.desktop<br>java.base binds jdk.security.auth jrt:/jdk.security.auth<br>java.base binds java.management jrt:/java.management<br>java.base binds jdk.localedata jrt:/jdk.localedata<br>java.base binds java.logging jrt:/java.logging<br>...<br></code></pre></td></tr></table></figure><p>çœ‹æ¥mybatisçš„æ¨¡å—å¹¶æ²¡æœ‰è¢«è§£æåŠ è½½åˆ°è¿è¡Œæ—¶ç¯å¢ƒä¸­ã€‚</p><p>è¿™å°±è¦æåˆ°javaæ¨¡å—åŒ–ç³»ç»Ÿä¸­çš„æ¨¡å—å‘ç°æœºåˆ¶(<a href="https://docs.oracle.com/en%2Fjava%2Fjavase%2F11%2Fdocs%2Fapi%2F%2F/java.base/java/lang/module/package-summary.html#:~:text=Resolution%20is%20the%20process%20of,a%20set%20of%20root%20modules.">module resolution</a>ï¼‰</p><ul><li>java.baseæ˜¯æ‰€æœ‰æ¨¡å—çš„æ ¹æ¨¡å—ï¼Œä¸éœ€è¦æ˜¾å¼å£°æ˜ã€‚</li><li>ç¼–è¯‘ä¸è¿è¡Œä¸­ï¼Œæ¨¡å—ç³»ç»Ÿéœ€è¦å…ˆç¡®å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªroot-moduleï¼Œç„¶åæ ¹æ®è¿™äº›root-moduleçš„ä¾èµ–å…³ç³»å»<code>-p</code>æŒ‡å®šçš„æ¨¡å—è·¯å¾„ä¸‹å¯»æ‰¾æ‰€æœ‰å¯ä»¥<code>è§‚å¯Ÿåˆ°çš„æ¨¡å—ï¼ˆobservable moduleï¼‰</code>ç„¶åè§£æåŠ è½½ä»¥æ»¡è¶³ä¾èµ–ï¼Œå†åŠ ä¸Š<code>-cp</code>æŒ‡å®šçš„ç±»è·¯å¾„ï¼Œå°±æ„æˆäº†ç¼–è¯‘ä¸è¿è¡Œæ—¶ç¯å¢ƒã€‚</li><li>é€šè¿‡<code>-m</code>æ–¹å¼å¯åŠ¨ï¼Œ<code>-m</code>æŒ‡å®šçš„æ¨¡å—å°±æ˜¯root-moduleä¹‹ä¸€ã€‚</li><li>å¦‚æœæ˜¯ä¼ ç»Ÿæ–¹å¼<code>java [options] &lt;ä¸»ç±»&gt; [args...]</code>ï¼Œåˆ™root-module å°±æ˜¯ <code>java.*</code>ï¼ˆ<code>java.base</code>ã€<code>java.sql</code>â€¦ï¼‰æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯<code>JRE</code>ã€‚</li></ul><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­(é€šè¿‡<code>-m</code>)ï¼Œ<code>moduleB</code>æ˜¯root-moduleï¼Œ<strong><code>moduleBã€java.baseã€jarA</code><strong>æ„æˆäº†è¿è¡Œæ—¶ç¯å¢ƒï¼ˆ<strong>æ³¨æ„å³ä½¿<code>mybatis</code>æ¨¡å—</strong>ä¹Ÿåœ¨æ¨¡å—è·¯å¾„ä¸Šï¼Œä½†è¿è¡Œæ—¶ç¯å¢ƒä¸åŒ…å«ä»–ã€‚ï¼‰ï¼Œå› ä¸º<code>jarA</code>è¢«æ·»åŠ åˆ°äº†ç±»è·¯å¾„ä¸Šï¼Œæ˜¯ä¸ªUnnamed-Moduleï¼Œä¸ä¼šæœ‰å…¶å®ƒæ¨¡å—å¯¹ä»–æœ‰æ˜¾å¼çš„ä¾èµ–ï¼Œå¹¶ä¸”ä»–ä¹Ÿä¸å¯èƒ½æ˜¯root-moduleï¼Œæ‰€ä»¥æ˜¯</strong>ä¸ä¼šå»è§£æ</strong>Unnamed-Moduleçš„ä¾èµ–å…³ç³»çš„ï¼Œè‡ªç„¶<code>mybatis</code>æ¨¡å—æ²¡æœ‰è¢«åŠ å…¥åˆ°è¿è¡Œæ—¶ç¯å¢ƒä¸­ã€‚</p><h5 id="è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ¡ˆ"></a> è§£å†³æ–¹æ¡ˆ</h5><p>è¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨æŠŠ<code>org.mybatis</code>ä»æ¨¡å—è·¯å¾„ä¸Šæ·»åŠ åˆ°è¢«è§£ææ¨¡å—ä¸­ï¼š<code>-add-modules org.mybatis, java.sql</code>ã€‚(mybatisæ¨¡å—è¿˜ä¾èµ–äº<code>java.sql</code>)</p><p>æˆ–è€…</p><p>ç›´æ¥é‡‡ç”¨ä¼ ç»Ÿæ–¹å¼å¯åŠ¨ï¼ŒæŠŠç±»å’Œjaréƒ½æ”¾åœ¨ç±»è·¯å¾„ä¸Šï¼š<code>java -classpath &quot;D:\source-read\java-module\moduleA\target\moduleA-1.0-SNAPSHOT.jar;D:\source-read\java-module\moduleB\target\moduleB-1.0-SNAPSHOT.jar;D:\maven_local_repository\org\mybatis\mybatis\3.5.13\mybatis-3.5.13.jar&quot; world.langyu.consumer.Main</code></p><br><p>ç»“æŸå“© ğŸ˜¹</p><p>å…¶ä»–ç›¸å…³</p><ul><li><p><a href="https://www.oracle.com/corporate/features/understanding-java-9-modules.html">oracle</a></p></li><li><p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1281795926523938">liaoxuefeng.com/wiki</a></p></li><li><p><a href="https://www.baeldung.com/java-modularity">baeldung-java-modularity</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginx</title>
      <link href="/2023/08/08/linux/nginx/"/>
      <url>/2023/08/08/linux/nginx/</url>
      
        <content type="html"><![CDATA[<h3 id="å®‰è£…"><a class="markdownIt-Anchor" href="#å®‰è£…"></a> å®‰è£…</h3><h4 id="æ‰‹åŠ¨ç¼–è¯‘"><a class="markdownIt-Anchor" href="#æ‰‹åŠ¨ç¼–è¯‘"></a> æ‰‹åŠ¨ç¼–è¯‘</h4><ul><li>ä¸‹è½½æºç  <a href="https://nginx.org/en/download.html">æºç </a></li><li>ç¼–è¯‘å®‰è£… <a href="https://nginx.org/en/docs/configure.html">make &amp;&amp; install</a></li></ul><h4 id="yun-rpmåŒ…"><a class="markdownIt-Anchor" href="#yun-rpmåŒ…"></a> yun + rpmåŒ…</h4><p>æŸ¥çœ‹ linux å‘è¡Œç‰ˆæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[]$ lsb_release -a<br><br>LSB Version:    :core-4.1-amd64:core-4.1-noarch<br>Distributor ID:    CentOS<br>Description:    CentOS Linux release 7.9.2009 (Core)<br>Release:    7.9.2009<br>Codename:    Core<br></code></pre></td></tr></table></figure><p>å¯¹åº”rpmåŒ…ä¸‹è½½åœ°å€  <a href="http://nginx.org/packages/centos/7/x86_64/RPMS/">nginx rpm åŒ…</a></p><p>ä¸‰ç§å®‰è£…æ–¹å¼</p><ul><li>çº¿ä¸Šä¸‹è½½ rpm åŒ… ç„¶åå®‰è£… (è¦è‡ªå·±è§£å†³ä¾èµ–é—®é¢˜)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sudo rpm -Uvh http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.20.2-1.el7.ngx.x86_64.rpm<br></code></pre></td></tr></table></figure><ul><li>ç¦»çº¿ é€šè¿‡ä¸‹è½½å¥½çš„ rpmæ–‡ä»¶ ä½¿ç”¨ yum å®‰è£… (æ— é¡»æ‰‹åŠ¨è§£å†³ä¾èµ–é—®é¢˜)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">yum install nginx-1.22.0-1.el7.ngx.x86_64.rpm<br></code></pre></td></tr></table></figure><ul><li>å®˜ç½‘æ•™ç¨‹</li></ul><p><a href="https://nginx.org/en/linux_packages.html">linux_package</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum install yum-utils<br>sudo vim /etc/yum.repos.d/nginx.repo<br><br>[nginx-stable]<br>name=nginx stable repo<br>baseurl=http://nginx.org/packages/centos/$releasever/$basearch/<br>gpgcheck=1<br>enabled=1<br>gpgkey=https://nginx.org/keys/nginx_signing.key<br>module_hotfixes=true<br><br>[nginx-mainline]<br>name=nginx mainline repo<br>baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/<br>gpgcheck=1<br>enabled=0<br>gpgkey=https://nginx.org/keys/nginx_signing.key<br>module_hotfixes=true<br><br>sudo yum install -y nginx<br></code></pre></td></tr></table></figure><p><strong>yum ä½¿ç”¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># åˆ—å‡º è½¯ä»¶åŒ…<br># --showduplicates å‚æ•° è¡¨ç¤ºå±•ç¤ºå‡º å¤šç‰ˆæœ¬ <br>yum list &lt;package_name&gt;<br># å·²ç»å®‰è£…çš„<br>yum list installed &lt;package_name&gt;<br># å¯å®‰è£…çš„<br>yum list available &lt;package_name&gt;<br># åœ¨å½“å‰æºå†…æœç´¢è½¯ä»¶åŒ…<br>yum --showduplicates search nginx<br></code></pre></td></tr></table></figure><h4 id="docker"><a class="markdownIt-Anchor" href="#docker"></a> docker</h4><p><strong>Dockerfile</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> nginx<br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> -p /tmp/nginx</span><br><span class="hljs-comment"># https é…ç½®æ–‡ä»¶</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> ./https/* /tmp/nginx/</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">443</span><br></code></pre></td></tr></table></figure><p><strong>docker compose</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">version: <span class="hljs-string">&quot;3.8&quot;</span><br>services:<br>  nginx:<br>    container_name: myNginx<br>    build:<br>      context: .<br>      dockerfile: Dockerfile<br>    image: jyxzwd/nginx:latestcd<br>    volumes:<br>      <span class="hljs-comment"># æŒ‚è½½é¡µé¢</span><br>      - ./html:/usr/myhtml<br>      <span class="hljs-comment"># æŒ‚è½½é…ç½®</span><br>      - ./conf.d:/etc/nginx/conf.d<br>    ports:<br>      - <span class="hljs-string">&quot;80:80&quot;</span><br>      - <span class="hljs-string">&quot;443:443&quot;</span><br>    logging:<br>      driver: <span class="hljs-string">&quot;json-file&quot;</span><br>      options:<br>        max-size: <span class="hljs-string">&quot;2g&quot;</span><br>        max-file: <span class="hljs-string">&quot;10&quot;</span><br>    restart: always<br></code></pre></td></tr></table></figure><br><p><strong>default.conf</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br><br>    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">listen</span>  [::]:<span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span>  domain;<br><br>    <span class="hljs-attribute">if</span> (<span class="hljs-variable">$host</span> = <span class="hljs-string">&#x27;langyu.world&#x27;</span>) &#123;<br>        <span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^/(.*)$</span> https://domain/<span class="hljs-variable">$1</span> <span class="hljs-literal">permanent</span>;<br>    &#125;<br><br>    <span class="hljs-comment">#error_page  404              /404.html;</span><br><br>    <span class="hljs-comment"># redirect server error pages to the static page /50x.html</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>    <span class="hljs-section">location</span> = /50x.html &#123;<br>        <span class="hljs-attribute">root</span>   /usr/share/nginx/html;<br>    &#125;<br><br>    <span class="hljs-comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>    <span class="hljs-comment">#    proxy_pass   http://127.0.0.1;</span><br>    <span class="hljs-comment">#&#125;</span><br><br>    <span class="hljs-comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>    <span class="hljs-comment">#    root           html;</span><br>    <span class="hljs-comment">#    fastcgi_pass   127.0.0.1:9000;</span><br>    <span class="hljs-comment">#    fastcgi_index  index.php;</span><br>    <span class="hljs-comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br>    <span class="hljs-comment">#    include        fastcgi_params;</span><br>    <span class="hljs-comment">#&#125;</span><br><br>    <span class="hljs-comment"># deny access to .htaccess files, if Apache&#x27;s document root</span><br>    <span class="hljs-comment"># concurs with nginx&#x27;s one</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#location ~ /\.ht &#123;</span><br>    <span class="hljs-comment">#    deny  all;</span><br>    <span class="hljs-comment">#&#125;</span><br>&#125;<br><br><br></code></pre></td></tr></table></figure><br><p><strong>https.conf</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br><br><br>    <span class="hljs-attribute">listen</span>  <span class="hljs-number">443</span> ssl http2;<br>    <span class="hljs-attribute">listen</span>  [::]:<span class="hljs-number">443</span> http2;<br>    <span class="hljs-attribute">server_name</span>     domain;<br><br>    <span class="hljs-attribute">ssl_certificate</span>     /tmp/nginx/domain_crt;<br>    <span class="hljs-attribute">ssl_certificate_key</span>     /tmp/nginx/domain_key;<br>    <span class="hljs-attribute">ssl_session_timeout</span>     <span class="hljs-number">10m</span>;<br>    <span class="hljs-attribute">ssl_protocols</span>   TLSv1 TLSv1.<span class="hljs-number">1</span> TLSv1.<span class="hljs-number">2</span>;<br><br><br>    <span class="hljs-attribute">access_log</span>  /var/log/nginx/access.log  main;<br>    <span class="hljs-attribute">error_log</span>   /var/log/nginx/<span class="hljs-literal">error</span>.log;<br><br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">root</span>   /usr/myhtml;<br>        <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /index.html<br>        index  index.html index.htm;<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><br><p><strong>command <code>sudo docker compose -f compose.y</code></strong></p><br><h3 id="nginx-æ“ä½œ"><a class="markdownIt-Anchor" href="#nginx-æ“ä½œ"></a> nginx æ“ä½œ</h3><ul><li><p>å¯åŠ¨ <code>systemctl start nginx</code></p></li><li><p>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ <code>systemctl status nginx</code></p></li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/08/linux/nginx/58d03e15e320f0f8206a143c86bfb162.png" alt="screen-capture"></p><p><strong>master è¿›ç¨‹ é€šå¸¸ æ˜¯å±äºroot çš„ï¼Œç”¨æ¥ç®¡ç† å…¶ä»–çš„ worker è¿›ç¨‹ï¼Œworkerè¿›ç¨‹æ•°åœ¨é…ç½®æ–‡ä»¶ä¸­å›½æŒ‡å®šï¼Œé€šå¸¸æ•°é‡ä¸ºcpuæ ¸å¿ƒæ•°</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/08/linux/nginx/ee150da8222a2d0e2b8bd87088aa7d07.png" alt="screen-capture"></p><ul><li>nginx -s [stop | quit | reload | reopen ] éœ€è¦rootæƒé™ ç”± masterè¿›ç¨‹æ‰§è¡Œ</li></ul><h3 id="nginxé…ç½®"><a class="markdownIt-Anchor" href="#nginxé…ç½®"></a> nginxé…ç½®</h3><h4 id="location-å—"><a class="markdownIt-Anchor" href="#location-å—"></a> location å—</h4><blockquote><p>Synatx:  location [ = | ~ | ~* | ^~ ] uri { . . .}</p><p>Context: http server</p></blockquote><p><strong>åŒ¹é…è§„åˆ™</strong></p><ul><li>é¦–å…ˆå»é¡ºåºå¯»æ‰¾åŒ¹é… <code>å‰ç¼€å­—ç¬¦ä¸²</code> ï¼Œå¹¶ä¸”è®°å½•ä¸‹æ¥ <code>æœ€é•¿å‰ç¼€çš„location</code></li><li>ç„¶åå»<code>é¡ºåºå¯»æ‰¾åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²</code>ï¼Œåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ä¹‹åç»ˆæ­¢ <a href="#a-%E6%83%85%E5%86%B5">A</a></li><li>å¦‚æœ <code>æœ€é•¿å‰ç¼€çš„location</code> è¢« <code>^~</code> ä¿®é¥°ï¼Œåˆ™ä¸ä¼šå†å» <code>é¡ºåºå¯»æ‰¾åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²</code>ã€‚</li><li>å¦‚æœåœ¨ <code>æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²</code>ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»ä½•ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™ä½¿ç”¨å‰é¢è®°å½•çš„<code>æœ€é•¿å‰ç¼€å­—ç¬¦ä¸²</code>æ‰€åœ¨<code>location</code>å®šä¹‰çš„<code>configuration</code>  <a href="#b-%E6%83%85%E5%86%B5">B</a></li><li>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦ <code>=</code>å®šä¹‰çš„<code>location</code>å— è¢«åŒ¹é…ï¼Œåˆ™ç»ˆæ­¢åŒ¹é… <a href="#c-%E6%83%85%E5%86%B5">C</a></li></ul><br><p><code>exercise.conf</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/08/linux/nginx/be179ba4a47835bfdc1fa65376951cc6.png" alt="screen-capture"></p><h4 id="å‡ ç§æƒ…å†µ"><a class="markdownIt-Anchor" href="#å‡ ç§æƒ…å†µ"></a> å‡ ç§æƒ…å†µ</h4><h5 id="c-æƒ…å†µ"><a class="markdownIt-Anchor" href="#c-æƒ…å†µ"></a> C-æƒ…å†µ</h5><p><code>curl -iv http://localhost:81/doc</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/08/linux/nginx/9572f12a013ccb33c57422c818f0b7da.png" alt="screen-capture"></p><p><strong>æ‰¾åˆ° <code>=</code>å°±ç«‹é©¬ç»ˆæ­¢</strong></p><h4 id="a-æƒ…å†µ"><a class="markdownIt-Anchor" href="#a-æƒ…å†µ"></a> A æƒ…å†µ</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/08/linux/nginx/6a4be9a6f191e3e893a82320795b3ab5.png" alt="screen-capture"></p><p><code>curl -iv http://localhost:81/doc/index.html</code></p><br><h4 id="b-æƒ…å†µ"><a class="markdownIt-Anchor" href="#b-æƒ…å†µ"></a> B-æƒ…å†µ</h4><p><code>curl -iv http://localhost:81/do</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/08/linux/nginx/f0c057aaab14cf5957b4a6205b2e051c.png" alt="screen-capture"></p><br><h4 id="root"><a class="markdownIt-Anchor" href="#root"></a> root</h4><p><strong>æŒ‡å®šé™æ€èµ„æºç›®å½•ï¼Œå¯ç”¨åœ¨ http, server, location å—</strong></p><blockquote><p>Syntax: root path</p><p>Default: html</p><p>Context: http, server, location, if in location</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> /image &#123;<br>      <span class="hljs-attribute">root</span> /home/static;<br>&#125;<br>langyu.world/image/1.<span class="hljs-attribute">jpg</span> -&gt; /home/static/image/<span class="hljs-number">1</span>.jpg<br></code></pre></td></tr></table></figure><p>ç›¸å½“äº rootæŒ‡å®šè·¯å¾„ä¸ URI å åŠ ï¼Œå¦‚æœè¦æ›´æ”¹URIï¼Œåˆ™ä½¿ç”¨ <a href="#alias">alias</a></p><h4 id="alias"><a class="markdownIt-Anchor" href="#alias"></a> alias</h4><blockquote><p>Syntax: alias path</p><p>Default: -------</p><p>Context: location</p></blockquote><br>é‡å‘½åæŒ‡å‘ åªèƒ½ç”¨åœ¨ location<br><p><strong>æ³¨æ„aliasåé¢è¦åŠ  '/'</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> /music &#123; <br>    <span class="hljs-attribute">alias</span> /home/static/blog_music/;<br>&#125;<br>langyu.world/music/jyx.<span class="hljs-attribute">mp3</span> -&gt; /home/static/blog_music/jyx.mp3<br><br>location <span class="hljs-regexp">~ ^/user/(.+\.(?:png|jpe?g|gif))$</span> &#123;<br>    <span class="hljs-attribute">alias</span> /data/images/<span class="hljs-variable">$1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="rewrite"><a class="markdownIt-Anchor" href="#rewrite"></a> rewrite</h4><p>é‡å†™ URL ,ç”¨åœ¨ location, server, if</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">rewrite &lt;regex&gt; &lt;replacement&gt; [flag]<br>regex æ­£åˆ™è¡¨è¾¾å¼ åŒ¹é…<br></code></pre></td></tr></table></figure><p>eg: <code>rewrite ^/(.*)$ https://domain/$1 permanent</code></p><h3 id="nginxè§£å†³è·¨åŸŸ"><a class="markdownIt-Anchor" href="#nginxè§£å†³è·¨åŸŸ"></a> nginxè§£å†³è·¨åŸŸ</h3><p><strong>å‰ç«¯éƒ¨ç½²çš„åŸŸåä¸ç«¯å£å’Œè¦è®¿é—®çš„åç«¯apiåŸŸåå’Œç«¯å£ä¿æŒä¸€è‡´</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">http</span> &#123;<br>     <span class="hljs-section">upstream</span> server &#123;<br>         <span class="hljs-attribute">server</span> localhost:<span class="hljs-number">8081</span> weigth=<span class="hljs-number">3</span>;<br>         <span class="hljs-attribute">server</span> localhost:<span class="hljs-number">8082</span> weigth=<span class="hljs-number">2</span>;<br>         <span class="hljs-attribute">server</span> localhost:<span class="hljs-number">8083</span> weigth=<span class="hljs-number">1</span>;<br>     &#125;<br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">443</span> ssl http2;<br>        <span class="hljs-attribute">server_name</span> localhost;<br>        <br>        <span class="hljs-section">location</span> /html/ &#123;<br>            <span class="hljs-attribute">root</span> html;<br>        &#125;<br>        <span class="hljs-section">location</span> /api/v2 &#123;<br>            <span class="hljs-attribute">proxy_pass</span> https://server;<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><br></code></pre></td></tr></table></figure><h3 id="httpsé…ç½®"><a class="markdownIt-Anchor" href="#httpsé…ç½®"></a> httpsé…ç½®</h3><p><strong>yum ä¸‹è½½çš„nginx é»˜è®¤é¢„è£…äº†sslæ¨¡å—</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">nginx -V <br>...<br>configure arguments: --with-http_ssl_module<br></code></pre></td></tr></table></figure><ul><li>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>  <span class="hljs-attribute">listen</span> <span class="hljs-number">443</span> ssl http2 default_server;   <span class="hljs-comment"># SSL è®¿é—®ç«¯å£å·ä¸º 443</span><br>  <span class="hljs-attribute">server_name</span> domain;         <span class="hljs-comment"># å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå</span><br>  <span class="hljs-attribute">ssl_certificate</span> /etc/nginx/https/domain.crt;   <span class="hljs-comment"># è¯ä¹¦åœ°å€</span><br>  <span class="hljs-attribute">ssl_certificate_key</span> /etc/nginx/https/domain.key;      <span class="hljs-comment"># ç§é’¥åœ°å€</span><br>  <span class="hljs-attribute">ssl_session_timeout</span> <span class="hljs-number">10m</span>;<br>  <span class="hljs-attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="hljs-number">1</span> TLSv1.<span class="hljs-number">2</span>; <span class="hljs-comment"># æ”¯æŒsslåè®®ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸ºåä¸‰ä¸ªï¼Œä¸»æµç‰ˆæœ¬æ˜¯[TLSv1.2]</span><br>  <br>  <span class="hljs-section">location</span> / &#123;<br>    <span class="hljs-attribute">root</span>         /home/nginx/html/blog;<br>    <span class="hljs-attribute">index</span>        index.html index.htm;<br>    <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /index.html;<br>  &#125;<br>  <br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ssh</title>
      <link href="/2023/08/05/linux/ssh/"/>
      <url>/2023/08/05/linux/ssh/</url>
      
        <content type="html"><![CDATA[<h3 id="ssh-å…¬é’¥è®¤è¯ç™»å½•-public-key-authentication"><a class="markdownIt-Anchor" href="#ssh-å…¬é’¥è®¤è¯ç™»å½•-public-key-authentication"></a> ssh å…¬é’¥è®¤è¯ç™»å½• <a href="https://www.ssh.com/academy/ssh/public-key-authentication">public key authentication</a></h3><h4 id="what-and-why"><a class="markdownIt-Anchor" href="#what-and-why"></a> what and why</h4><ul><li>æ¯”ç®€å•çš„ç”¨æˆ·å-å£ä»¤ç™»å½•è¦å®‰å…¨,ä»–æä¾›æé•¿å¯†ç æ— æ³•æä¾›çš„å¯†ç å¼ºåº¦</li><li>ç”±ä¸€å¯¹ å…¬é’¥(public key)  ç§é’¥(private key) ç»„æˆ</li><li>ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•, rsa dsa ed25519</li></ul><h5 id="å…¬é’¥public-key"><a class="markdownIt-Anchor" href="#å…¬é’¥public-key"></a> å…¬é’¥(public key)</h5><blockquote><p>å…¬é’¥ç”¨äºè¢«æ‹·è´åˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œä»»ä½•æ‹¥æœ‰å…¶ä»–è€…å…¬é’¥çš„æœåŠ¡å™¨éƒ½å¯ä»¥åŠ å¯†æ•°æ®ï¼Œä½†åªæœ‰æŒæœ‰ç›¸åº”ç§é’¥çš„äººæ‰èƒ½æ­£ç¡®è§£å¯†æ•°æ®ã€‚ä¸€æ—¦æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·å‘é€çš„å…¬é’¥å¹¶ä¸”è®¤ä¸ºè¯¥å…¬é’¥å¯ä¿¡ï¼ŒæœåŠ¡å™¨å°±ä¼šåœ¨ authorized_keys æ–‡ä»¶ä¸­æ ‡è®°è¯¥å…¬é’¥å¯ä¿¡ï¼Œæ­¤ç±»å¯†é’¥(authorized ä¸­çš„å…¬é’¥ä»¬ )ç§°ä¸º æˆæƒå¯†é’¥ã€‚</p></blockquote><h5 id="ç§é’¥private-key"><a class="markdownIt-Anchor" href="#ç§é’¥private-key"></a> ç§é’¥(private key)</h5><blockquote><p>ç§é’¥åº”ä»…è¢«ç”¨æˆ·è‡ªå·±ä¿ç•™ï¼Œåªæœ‰æŒæœ‰ä¸ç›®æ ‡æœåŠ¡å™¨ä¸Šå…¬é’¥å¯¹åº”çš„ç§é’¥æ‰èƒ½é€šè¿‡èº«ä»½è®¤è¯ï¼Œè¢«ç§°ä¸º èº«ä»½å¯†é’¥ã€‚</p></blockquote><h4 id="ç”¨sshæ¥è¿›è¡Œ-å…¬é’¥è®¤è¯ç™»å½•"><a class="markdownIt-Anchor" href="#ç”¨sshæ¥è¿›è¡Œ-å…¬é’¥è®¤è¯ç™»å½•"></a> ç”¨sshæ¥è¿›è¡Œ å…¬é’¥è®¤è¯ç™»å½•</h4><ol><li>ç”¨æˆ·åœ¨æœ¬åœ°åˆ›å»ºå¯†é’¥å¯¹ï¼Œä½¿ç”¨ <a href="https://www.ssh.com/academy/ssh/keygen">ssh-keygen</a>  <code>ssh-keygen -t &lt;encrypt algorithm&gt; -f &lt;fileName&gt; -b &lt;keySize&gt;</code></li><li>ç§é’¥ä»…åœ¨ç”¨æˆ·æœ¬åœ°ä¿å­˜ï¼Œè€Œå°†å…¬é’¥ä¼ è¾“åˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œä½¿ç”¨ <a href="https://www.ssh.com/academy/ssh/copy-id">ssh-copy-id</a>                                <code>ssh-copy-id -i &lt;myPublicKey&gt; user@host</code>  è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦éªŒè¯åœ¨è¿œç¨‹æœåŠ¡å™¨çš„èº«ä»½</li><li>åœ¨é€šè¿‡èº«ä»½éªŒè¯åï¼Œè¿œç¨‹æœåŠ¡å™¨å­˜å‚¨å…¬é’¥å¹¶æ ‡è®°ä¸º å·²è®¤è¯</li><li><code>ssh -i ~/privateKey user@host</code></li></ol><p><strong>ä¹Ÿå¯ä»¥åœ¨ ~/.ssh/config æ–‡ä»¶ä¸­é…ç½®</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">Host</span> <span class="hljs-string">&lt;connection_name&gt;</span><br>  <span class="hljs-string">HostName</span> <span class="hljs-string">&lt;host&gt;</span><br>  <span class="hljs-string">User</span> <span class="hljs-string">&lt;username&gt;</span><br>  <span class="hljs-string">Port</span> <span class="hljs-string">&lt;port&gt;</span><br>  <span class="hljs-string">IdentityFile</span> <span class="hljs-string">&lt;privateKeyFilePath&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶å <code>ssh connection_name</code></p><p>ç»“æŸåŠ› ğŸ˜‚</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/08/05/linux/ssh/3f43eaf2bf17812c1f54bbc2263b9d3e.jpeg" alt="Ste.jpeg"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wiki_note</title>
      <link href="/2022/06/12/spring_boot/wiki_note/"/>
      <url>/2022/06/12/spring_boot/wiki_note/</url>
      
        <content type="html"><![CDATA[<h1 id="0-git-ä½¿ç”¨ä¸­çš„å‘ç‚¹"><a class="markdownIt-Anchor" href="#0-git-ä½¿ç”¨ä¸­çš„å‘ç‚¹"></a> 0ã€Git ä½¿ç”¨ä¸­çš„&quot;å‘ç‚¹&quot;</h1><h2 id="00ç¬¬ä¸€æ¬¡æ¨é€æŠ¥é”™"><a class="markdownIt-Anchor" href="#00ç¬¬ä¸€æ¬¡æ¨é€æŠ¥é”™"></a> 0.0ç¬¬ä¸€æ¬¡æ¨é€æŠ¥é”™</h2><p><strong>åœ¨giteeåˆ›å»ºè¿œç¨‹ä»“åº“åï¼Œå¹¶ä¸”è‡ªåŠ¨åˆ›å»ºäº†README.mdæ–‡ä»¶åï¼Œåœ¨æœ¬åœ°æäº¤æ–‡ä»¶æ—¶,ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">error: failed to push some refs to â€˜https://gitee.com/<br></code></pre></td></tr></table></figure><p><strong>åŸå› ï¼šæœ¬åœ°æ–‡ä»¶ç›®å½•ä¸­æ²¡æœ‰è¿œç¨‹ä»“åº“åˆå§‹åŒ–æ—¶çš„README.mdæ–‡ä»¶ï¼Œå¯¼è‡´æ¨é€å‡ºé”™</strong></p><p><strong>è§£å†³åŠæ³•ï¼šå°†README.mdæ–‡ä»¶æ‹‰å–åˆ°æœ¬åœ°</strong></p><p>:<code>git pull --rebase origin master</code></p><h1 id="1-ä¸€äº›æ–‡ä»¶é…ç½®"><a class="markdownIt-Anchor" href="#1-ä¸€äº›æ–‡ä»¶é…ç½®"></a> 1ã€ä¸€äº›æ–‡ä»¶é…ç½®</h1><h2 id="10"><a class="markdownIt-Anchor" href="#10"></a> 1.0</h2><p><strong>è¿”å›ç±»</strong></p><p>** <a href="....%5CSSM%5CSpring%5CSSM_%5Csrc%5Cmain%5Cjava%5Ccom%5Cjyx%5Cpojo%5CCode.java">Code.java</a> **</p><p><a href="....%5CSSM%5CSpring%5CSSM_%5Csrc%5Cmain%5Cjava%5Ccom%5Cjyx%5Cpojo%5CResult.java">Result.java</a></p><h2 id="11-loback-springxml-æ–‡ä»¶é…ç½®"><a class="markdownIt-Anchor" href="#11-loback-springxml-æ–‡ä»¶é…ç½®"></a> 1.1 loback-spring.xml æ–‡ä»¶é…ç½®</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä¿®æ”¹ä¸€ä¸‹è·¯å¾„--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;PATH&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;./log&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;Pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %highlight(%-5level) %blue(%-50logger&#123;50&#125;:%-4line) %thread %green(%-18X&#123;LOG_ID&#125;) %msg%n&lt;/Pattern&gt;--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">Pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %highlight(%-5level) %blue(%-30logger&#123;30&#125;:%-4line) %thread %green(%-18X&#123;LOG_ID&#125;) %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">Pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;TRACE_FILE&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>$&#123;PATH&#125;/trace.log<span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">FileNamePattern</span>&gt;</span>$&#123;PATH&#125;/trace.%d&#123;yyyy-MM-dd&#125;.%i.log<span class="hljs-tag">&lt;/<span class="hljs-name">FileNamePattern</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">maxFileSize</span>&gt;</span>10MB<span class="hljs-tag">&lt;/<span class="hljs-name">maxFileSize</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level %-50logger&#123;50&#125;:%-4line %green(%-18X&#123;LOG_ID&#125;) %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ERROR_FILE&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>$&#123;PATH&#125;/error.log<span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">FileNamePattern</span>&gt;</span>$&#123;PATH&#125;/error.%d&#123;yyyy-MM-dd&#125;.%i.log<span class="hljs-tag">&lt;/<span class="hljs-name">FileNamePattern</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">maxFileSize</span>&gt;</span>10MB<span class="hljs-tag">&lt;/<span class="hljs-name">maxFileSize</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level %-50logger&#123;50&#125;:%-4line %green(%-18X&#123;LOG_ID&#125;) %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">level</span>&gt;</span>ERROR<span class="hljs-tag">&lt;/<span class="hljs-name">level</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">onMatch</span>&gt;</span>ACCEPT<span class="hljs-tag">&lt;/<span class="hljs-name">onMatch</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">onMismatch</span>&gt;</span>DENY<span class="hljs-tag">&lt;/<span class="hljs-name">onMismatch</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;ERROR&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;ERROR_FILE&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;TRACE&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;TRACE_FILE&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;INFO&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;STDOUT&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p><strong>é…ç½®æ–‡ä»¶çš„å­˜æ”¾ç›®å½•:/resources/</strong></p></li><li><p>åœ¨å¯åŠ¨ç±»æ·»åŠ ä»£ç </p></li><li><p>å¯ä»¥åœ¨æ§åˆ¶å°æ‰“å°å‡ºé¦–é¡µåœ°å€</p></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Logger LOG = LoggerFactory.getLogger(DemoApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;   SpringApplication app = <span class="hljs-keyword">new</span> SpringApplication(DemoApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;   Environment env = app.run(args).getEnvironment();   LOG.info(<span class="hljs-string">"å¯åŠ¨æˆåŠŸï¼"</span>);   LOG.info(<span class="hljs-string">"åœ°å€:\t http://192.168.4.179:&#123;&#125;"</span>,env.getProperty(<span class="hljs-string">"server.port"</span>));&lt;!--codeï¿¼<span class="hljs-number">2</span>--&gt;</code></pre></li></ul><h1 id="3-springbootæ•´åˆmybatis"><a class="markdownIt-Anchor" href="#3-springbootæ•´åˆmybatis"></a> 3ã€SpringBootæ•´åˆMybatis</h1><h2 id="30å¯¼å…¥ä¾èµ–ä¸é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#30å¯¼å…¥ä¾èµ–ä¸é…ç½®æ–‡ä»¶"></a> 3.0å¯¼å…¥ä¾èµ–ä¸é…ç½®æ–‡ä»¶</h2><ul><li><p>å¯¼å…¥ä¾èµ–</p></li><li><pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-comment"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>- åœ¨application.yamlä¸­é…ç½®datasource<br><br>- <br><br>- ```yaml<br>  spring:<br>    datasource:<br>      driver-class-name: com.mysql.cj.jdbc.Driver<br>      url: jdbc:mysql://localhost:3306/demo?useUnicode=true&amp;auseSSL=false&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2B8<br>      password: Jyx1314.+<br>      username: root<br>  mybatis:<br>    mapper-locations: classpath:mapper/**/*.xml<br></code></pre></td></tr></table></figure></span></code></pre></li></ul><p><strong>è¦æ³¨æ„çš„ç‚¹</strong></p><ul><li><strong>æ­¤åé…ç½®çš„xxxMapper.xmlæ–‡ä»¶ä¸€å®šè¦æ”¾åœ¨resourcesç›®å½•ä¸‹ï¼Œè‹¥æ”¾åœ¨mapperåŒ…ä¸‹åˆ™æ— æ³•é™æ€èµ„æºå¯¼å‡ºï¼ï¼ï¼</strong></li></ul><h2 id="31-é…ç½®generato"><a class="markdownIt-Anchor" href="#31-é…ç½®generato"></a> 3.1 é…ç½®generato</h2><ul><li><p>å¯¼å…¥ä¾èµ–</p></li><li><pre class="highlight"><code class="java">&lt;plugin&gt;   &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;   &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;   &lt;version&gt;<span class="hljs-number">1.3</span><span class="hljs-number">.7</span>&lt;/version&gt;   &lt;configuration&gt;      &lt;configurationFile&gt;src/main/resources/generator/generator-config.xml&lt;/configurationFile&gt;      &lt;overwrite&gt;<span class="hljs-keyword">true</span>&lt;/overwrite&gt;      &lt;verbose&gt;<span class="hljs-keyword">true</span>&lt;/verbose&gt;   &lt;/configuration&gt;   &lt;dependencies&gt;      &lt;dependency&gt;         &lt;groupId&gt;mysql&lt;/groupId&gt;         &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;         &lt;version&gt;<span class="hljs-number">8.0</span><span class="hljs-number">.22</span>&lt;/version&gt;      &lt;/dependency&gt;   &lt;/dependencies&gt;&lt;/plugin&gt;&lt;!--codeï¿¼<span class="hljs-number">4</span>--&gt;</code></pre></li></ul><h1 id="4-springboot-å†™æ¥å£"><a class="markdownIt-Anchor" href="#4-springboot-å†™æ¥å£"></a> 4ã€SpringBoot å†™æ¥å£</h1><h2 id="40-è®¾ç½®ç»Ÿä¸€è¿”å›ç±»-result"><a class="markdownIt-Anchor" href="#40-è®¾ç½®ç»Ÿä¸€è¿”å›ç±»-result"></a> 4.0 è®¾ç½®ç»Ÿä¸€è¿”å›ç±» (Result)</h2><ul><li><pre class="highlight"><code class="java"><span class="hljs-keyword">package</span> com.jyx.Utils;<span class="hljs-comment">/** * åŒæ„è¿”å›ç»“æœç±»(æ³›å‹ç±») * * <span class="hljs-doctag">@param</span> &lt;T&gt; */</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Result</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;    <span class="hljs-comment">//å‚æ•°ï¼šmessageï¼Œcodeï¼Œè¿˜æœ‰ä¸€ä¸ªæ³›å‹çš„date</span>    <span class="hljs-keyword">private</span> String message;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> code;    <span class="hljs-keyword">private</span> T data;    <span class="hljs-comment">//æœ‰å‚æ„é€ å™¨</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Result</span><span class="hljs-params">(String message, <span class="hljs-keyword">int</span> code, T date)</span> </span>&#123;        <span class="hljs-keyword">this</span>.message = message;        <span class="hljs-keyword">this</span>.code = code;        <span class="hljs-keyword">this</span>.data =date;    &#125;    <span class="hljs-comment">//æ— å‚æ„é€ å™¨</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Result</span><span class="hljs-params">()</span> </span>&#123;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Result</span><span class="hljs-params">(String message, <span class="hljs-keyword">int</span> code)</span> </span>&#123;        <span class="hljs-keyword">this</span>.message = message;        <span class="hljs-keyword">this</span>.code = code;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getMessage</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> message;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMessage</span><span class="hljs-params">(String message)</span> </span>&#123;        <span class="hljs-keyword">this</span>.message = message;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getCode</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> code;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> code)</span> </span>&#123;        <span class="hljs-keyword">this</span>.code = code;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">getData</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> data;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setData</span><span class="hljs-params">(T data)</span> </span>&#123;        <span class="hljs-keyword">this</span>.data = data;    &#125;    <span class="hljs-comment">//é™æ€æˆåŠŸè¿”å›æ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªç»Ÿä¸€è¿”å›ç±»å¯¹è±¡ï¼ŒåŒ…å«dateï¼Œmessageï¼Œcode</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  &lt;T&gt; <span class="hljs-function">Result&lt;T&gt; <span class="hljs-title">success</span> <span class="hljs-params">(T Date, String message)</span></span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Result&lt;T&gt;(message, Code.SUCCESS.getValue(),Date);    &#125;    <span class="hljs-comment">//é™æ€å¤±è´¥è¿”å›æ–¹æ³•ï¼Œè¿”å›å¯¹è±¡ä¸­åªåŒ…å«messageå’Œcode</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Result&lt;T&gt; <span class="hljs-title">error</span><span class="hljs-params">(String message)</span></span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Result&lt;T&gt;(message, Code.ERROR.getValue());    &#125;    <span class="hljs-comment">//é‡å†™to_string æ–¹æ³•ï¼Œç”¨äºå±•ç¤ºç»“æœ</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span><span class="hljs-string">'&#123;'</span> +                <span class="hljs-string">"message="</span> + message + <span class="hljs-string">'\n'</span> +                <span class="hljs-string">"code="</span> + code +<span class="hljs-string">'\n'</span>+                <span class="hljs-string">"date="</span>+<span class="hljs-string">'\n'</span> + data.toString() +                <span class="hljs-string">'&#125;'</span>;    &#125;&#125;&lt;!--codeï¿¼<span class="hljs-number">5</span>--&gt;</code></pre></li><li><p><strong>æ³¨æ„ï¼šåœ¨ä½¿ç”¨äº†generatoræ’ä»¶åï¼ŒMapperå±‚ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†™äº†ï¼Œç›¸åº”åœ°ï¼Œå½“æˆ‘ä»¬åœ¨Serviceå±‚è°ƒç”¨çš„Mapperçš„æ–¹æ³•ä¹Ÿä¼šæœ‰æ‰€æ”¹å˜ï¼Œå…¶æ–¹æ³•å‚æ•°å¤§å¤šå°±æ˜¯ä¸€pojoExampleå®ä¾‹</strong></p></li></ul><h2 id="43-ç»Ÿä¸€å“åº”ç±»"><a class="markdownIt-Anchor" href="#43-ç»Ÿä¸€å“åº”ç±»"></a> 4.3 ç»Ÿä¸€å“åº”ç±»</h2><ul><li>åˆ›å»ºResqåŒ…</li><li>ä¸‹é¢æ”¾çš„æ˜¯pojoResqç±»</li><li>è¿›è€ŒServiceå±‚éœ€è¦æ”¹åŠ¨</li><li>æ–¹æ³•å‚æ•°å˜ä¸ºPojoResq</li><li>åœ¨é€šè¿‡Mapperå¾—åˆ°åˆå§‹è¿”å›æ•°æ®åï¼Œ</li><li>åˆ©ç”¨BeanUtilsçš„copyæ–¹æ³•ç»™pojoResqç±»èµ‹å€¼ï¼Œæœ€åResultç±»è¿”å›æœ€ç»ˆç»“æœ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Result&lt;List&lt;EbookResp&gt;&gt;list(EbookRequestParams ebookRequestParams) &#123;<br>    <span class="hljs-type">EbookExample</span> <span class="hljs-variable">ebookExample</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EbookExample</span>();<br>    EbookExample.<span class="hljs-type">Criteria</span> <span class="hljs-variable">criteria</span> <span class="hljs-operator">=</span> ebookExample.createCriteria();<br>    criteria.andNameLike(<span class="hljs-string">&quot;%&quot;</span>+ebookRequestParams.getName()+<span class="hljs-string">&quot;%&quot;</span>);<br>    criteria.andIdEqualTo(ebookRequestParams.getId());<br>    List&lt;Ebook&gt; ebookList = ebookMapper.selectByExample(ebookExample);<br>    List&lt;EbookResp&gt; list  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    ebookList.forEach(ebook -&gt; &#123;<br>        <span class="hljs-type">EbookResp</span> <span class="hljs-variable">ebookResp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EbookResp</span>();<br>        BeanUtils.copyProperties(ebook,ebookResp);<br>        list.add(ebookResp);<br>    &#125;);<br>    <span class="hljs-keyword">return</span> Result.success(list,<span class="hljs-string">&quot;ok&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="44-copyå·¥å…·ç±»"><a class="markdownIt-Anchor" href="#44-copyå·¥å…·ç±»"></a> 4.4 copyå·¥å…·ç±»</h2><ul><li><p>æ³›å‹ä¸åå°„çŸ¥è¯†</p></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">package</span> com.jyx.Utils;<span class="hljs-keyword">import</span> org.springframework.beans.BeanUtils;<span class="hljs-keyword">import</span> java.util.ArrayList;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CopyUtil</span> </span>&#123;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">T <span class="hljs-title">copy</span><span class="hljs-params">(Object source ,Class&lt;T&gt; target)</span></span>&#123;        <span class="hljs-keyword">if</span>(source==<span class="hljs-keyword">null</span>)&#123;            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;        &#125;        T obj = <span class="hljs-keyword">null</span>;        <span class="hljs-keyword">try</span> &#123;            obj = target.newInstance();            BeanUtils.copyProperties(source,obj);        &#125; <span class="hljs-keyword">catch</span> (InstantiationException | IllegalAccessException e) &#123;            e.printStackTrace();        &#125;        <span class="hljs-keyword">return</span> obj;    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T,E&gt; <span class="hljs-function">List&lt;T&gt;  <span class="hljs-title">copyList</span><span class="hljs-params">(List&lt;E&gt; source,Class&lt;T&gt; target)</span></span>&#123;        List&lt;T&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();        <span class="hljs-keyword">if</span>(!source.isEmpty()) &#123;            source.forEach(obj -&gt; &#123;                T temp = copy(obj, target);                list.add(temp);            &#125;);        &#125;        <span class="hljs-keyword">return</span> list;    &#125;&#125;&lt;!--codeï¿¼<span class="hljs-number">7</span>--&gt;</code></pre></li></ul><h2 id="51-é›†æˆantdesign-vue"><a class="markdownIt-Anchor" href="#51-é›†æˆantdesign-vue"></a> 5.1 é›†æˆAntâ€”Design-vue</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> Antd from <span class="hljs-string">&quot;ant-design-vue&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;ant-design-vue/dist/antd.css&#x27;</span><br>createApp(App).use(store).use(router).use(Antd).mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="52è‡ªå®šä¹‰ç»„ä»¶"><a class="markdownIt-Anchor" href="#52è‡ªå®šä¹‰ç»„ä»¶"></a> 5.2è‡ªå®šä¹‰ç»„ä»¶</h2><ul><li><p>ç»„ä»¶</p></li><li><pre class="highlight"><code class="java">&lt;template&gt;  &lt;a-layout-footer style=<span class="hljs-string">"text-align: center"</span>&gt;    Ant Design Â©<span class="hljs-number">2018</span> Created by Ant UED  &lt;/a-layout-footer&gt;&lt;/template&gt;&lt;script lang=<span class="hljs-string">"ts"</span>&gt;<span class="hljs-keyword">import</span> &#123; defineComponent &#125; from <span class="hljs-string">'vue'</span>;<span class="hljs-function">export <span class="hljs-keyword">default</span> <span class="hljs-title">defineComponent</span><span class="hljs-params">(&#123;  name: <span class="hljs-string">'TheFooter'</span>,  props: &#123;    msg: String,  &#125;,&#125;)</span></span>;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;&lt;!--codeï¿¼<span class="hljs-number">9</span>--&gt;</code></pre></li></ul><h1 id="6-å‰åç«¯äº¤äº’æ•´åˆ"><a class="markdownIt-Anchor" href="#6-å‰åç«¯äº¤äº’æ•´åˆ"></a> 6ã€å‰åç«¯äº¤äº’æ•´åˆ</h1><h2 id="60-é›†æˆhttpåº“axios"><a class="markdownIt-Anchor" href="#60-é›†æˆhttpåº“axios"></a> 6.0 é›†æˆHTTPåº“Axios</h2><p><strong>ä½¿ç”¨npmå®‰è£…,åœ¨vueé¡¹ç›®è·¯å¾„ä¸‹</strong></p><p><code>npm install axios@0.21.0 --save</code></p><h2 id="61ç”µå­ä¹¦å‰åç«¯æ¥å£"><a class="markdownIt-Anchor" href="#61ç”µå­ä¹¦å‰åç«¯æ¥å£"></a> 6.1ç”µå­ä¹¦å‰åç«¯æ¥å£</h2><h3 id="è·¨åŸŸé—®é¢˜çš„è§£å†³"><a class="markdownIt-Anchor" href="#è·¨åŸŸé—®é¢˜çš„è§£å†³"></a> è·¨åŸŸé—®é¢˜çš„è§£å†³</h3><ul><li><p>åœ¨ConfigåŒ…ä¸‹æ–°å»ºCrosConfigç±»</p></li><li><p>è®°å¾—æ·»åŠ @Cinfiguration</p></li><li><p>å»å®ç°WebMvcConfigurer</p></li><li><pre class="highlight"><code class="java"><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> </span>&#123;    registry.addMapping(<span class="hljs-string">"/**"</span>)            .allowedOriginPatterns(<span class="hljs-string">"*"</span>)            .allowedHeaders(CorsConfiguration.ALL)            .allowedMethods(CorsConfiguration.ALL)            .allowCredentials(<span class="hljs-keyword">true</span>)     &lt;!--codeï¿¼<span class="hljs-number">10</span>--&gt;</code></pre></li></ul><h2 id="64-æŸ¥è¯¢ç”µå­ä¹¦å¹¶ä¸”åœ¨é¡µé¢å±•ç¤º"><a class="markdownIt-Anchor" href="#64-æŸ¥è¯¢ç”µå­ä¹¦å¹¶ä¸”åœ¨é¡µé¢å±•ç¤º"></a> 6.4 æŸ¥è¯¢ç”µå­ä¹¦å¹¶ä¸”åœ¨é¡µé¢å±•ç¤º</h2><p><strong>æŠ€æœ¯ç‚¹</strong></p><h3 id="ä¸€-ä½¿ç”¨refè¿”å›å•ä¸ªç›¸åº”å˜é‡æ•°æ®"><a class="markdownIt-Anchor" href="#ä¸€-ä½¿ç”¨refè¿”å›å•ä¸ªç›¸åº”å˜é‡æ•°æ®"></a> ä¸€ã€<strong>ä½¿ç”¨refè¿”å›å•ä¸ªç›¸åº”å˜é‡æ•°æ®</strong></h3><p><strong>è¯¥æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯ï¼šä½ ç»™æˆ‘ä»€ä¹ˆæˆ‘å°±æ‹¿åˆ°ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯ä½ è¦æå‰æŠŠè¿™ä¸ªæ•°æ®å°è£…æˆæƒ³è¦çš„ç»“æ„</strong></p><ul><li>refå“åº”å¼æ•°æ®ç±»å‹</li><li>å¯¼å…¥ refåŒ…</li><li>åœ¨setupä¸­å£°æ˜ const ebooks = ref()</li><li>åœ¨onMounted ä¸­</li><li>ebooks.value = data.data</li><li>åœ¨setupæ–¹æ³•ç»“å°¾å¤„è¿”å›ebooks <strong>æ­¤æ—¶ï¼Œè¦æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></li><li><strong>è¿”å›æ•°æ®çš„å†™æ³•ä¸ºï¼š</strong><code>return&#123;ebooks&#125;</code></li><li><strong>å¹¶ä¸”å†æ¬¡æ³¨æ„ï¼ï¼</strong></li><li>é¡µé¢æ‹¿åˆ°æ•°æ®çš„æ–¹å¼ä¸ºï¼š<code>&#123;&#123;ebooks&#125;&#125;</code></li><li>å¯ä»¥ç”¨<code>&lt;pre&gt;&lt;/pre&gt;</code>æ ‡ç­¾ç¾åŒ–</li></ul><h3 id="äºŒ-ä½¿ç”¨reactive"><a class="markdownIt-Anchor" href="#äºŒ-ä½¿ç”¨reactive"></a> äºŒã€ä½¿ç”¨reactive()</h3><p><strong>è¯¥æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯ï¼Œ()é‡Œé¢è¦è®¾ç½®å‚æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‚æ•°åº”è¯¥æ˜¯Jsonç±»å‹çš„ï¼Œå¥½å¤„æ˜¯åœ¨å£°æ˜å˜é‡çš„æ—¶å€™å°±ç¡®å®šäº†æ‰€è¦ä¼ è¾“æ•°æ®çš„ç»“æ„ï¼Œvalueä¹Ÿå¯ä»¥æ˜¯ä¸ªå¯¹è±¡ï¼ˆæ¯”å¦‚ä¹Ÿæ˜¯ä¸€ä¸ªJsonï¼‰ï¼ï¼å³:<code>&#123;key0: value,key1:value....&#125;</code>  value å†™æˆ <code>[]</code>ï¼Œå°±è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ•°ç»„</strong></p><ul><li>å¯¼å…¥<code>reactive</code></li><li>åœ¨setupä¸­å£°æ˜å˜é‡ `const ebook = reactive({â€¦})</li></ul><h3 id="ä¸‰-ä»£ç "><a class="markdownIt-Anchor" href="#ä¸‰-ä»£ç "></a> ä¸‰ã€ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java">setup()&#123;<br>  console.log(<span class="hljs-string">&#x27;setup&#x27;</span>);<br>  <span class="hljs-type">const</span> <span class="hljs-variable">ebooks</span> <span class="hljs-operator">=</span> ref();<br>  <span class="hljs-type">const</span> <span class="hljs-variable">ebook</span> <span class="hljs-operator">=</span> reactive(&#123;book :[],code: <span class="hljs-string">&quot;&quot;</span>,msg:<span class="hljs-string">&quot;&quot;</span>&#125;)<br><br>  onMounted(()=&gt;&#123;<br>    console.log(<span class="hljs-string">&quot;onMounted&quot;</span>);<br>    axios.get(<span class="hljs-string">&#x27;http://localhost:8081/Test1?name=æ•™ç¨‹&#x27;</span>).then((response)=&gt;&#123;<br>      <span class="hljs-type">const</span>  <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> response.data;<br>      console.log(data);<br>      ebooks.value = data.data;<br>      ebook.book = data.data;<br>      ebook.msg = data.message;<br>      ebook.code = data.code;<br>    &#125;);<br>  &#125;)<br>  <span class="hljs-keyword">return</span>&#123;<br>    ebooks,<br>    ebook<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="65-å¯¼å…¥å›¾æ ‡åº“"><a class="markdownIt-Anchor" href="#65-å¯¼å…¥å›¾æ ‡åº“"></a> 6.5 å¯¼å…¥å›¾æ ‡åº“</h2><ul><li><p><strong>`npm install @ant-design/icons -vue --save</strong></p></li><li><p>åœ¨main.tsä¸­å†™å…¥</p></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">import</span> * as Icons from <span class="hljs-string">'@ant-design/icons-vue'</span>;<span class="hljs-keyword">const</span> incos : ant = Icons;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i in incos)&#123;    App.compoent(i,incos[i]);&#125;&lt;!--codeï¿¼<span class="hljs-number">12</span>--&gt;</code></pre></li></ul><p>å¦‚æœä¼ è¿›æ¥å€¼å°±æŒ‰ç…§ä¼ çš„å€¼å¤„ç†ï¼Œè¦æ˜¯æ²¡ç©¿ï¼Œåˆ™å°±æ˜¯æŸ¥è¯¢æ‰€æœ‰å­—æ®µ</p><h2 id="68-vue_cleå¤šç¯å¢ƒé…ç½®"><a class="markdownIt-Anchor" href="#68-vue_cleå¤šç¯å¢ƒé…ç½®"></a> 6.8 Vue_Cleå¤šç¯å¢ƒé…ç½®</h2><ul><li><p>åœ¨webç›®å½•ä¸‹å»ºç«‹</p></li><li><p>.env.dev.txt</p></li><li><pre class="highlight"><code class="xml">NODE_ENV=developmentVUE_APP_SERVER=http://192.168.110.179:8081<span class="hljs-comment"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>- .env.prod.txt<br><br>- ```xml<br>  NODE_ENV=production<br>  VUE_APP_SERVER=http://jyx...<br></code></pre></td></tr></table></figure></span></code></pre></li><li><p>æ›´æ”¹package.json ä¸­çš„serveråå­—</p></li><li><p>åœ¨main.jsä¸­é…ç½®å…¨å±€å˜é‡</p></li><li><p><code>axios.defaults.baseURL = process.env.VUE_APP_SERVER</code></p></li></ul><h2 id="69-axiosæ‹¦æˆªå™¨æ‰“å°æ—¥å¿—"><a class="markdownIt-Anchor" href="#69-axiosæ‹¦æˆªå™¨æ‰“å°æ—¥å¿—"></a> 6.9 axiosæ‹¦æˆªå™¨æ‰“å°æ—¥å¿—</h2><p><strong>åœ¨main.tsä¸­åŠ å…¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">axios.interceptors.request.use((config)=&gt;&#123;<br>    console.log(&#x27;è¯·æ±‚å‚æ•°ï¼š&#x27;,config);<br>    return config;<br>&#125;, error =&gt; &#123;<br>    return Promise.reject(error);<br>&#125;);<br>axios.interceptors.response.use((response)=&gt;&#123;<br>    console.log(&#x27;è¿”å›ç»“æœ&#x27;,response);<br>    return response;<br>&#125;, error =&gt; &#123;<br>    return Promise.reject(error);<br>&#125;)<br><br>const app =  createApp(App);<br>app.use(store).use(router).use(Antd).mount(&#x27;#app&#x27;);<br>const icons : any = Icons;<br>for(const i in icons)&#123;<br>    app.component(i,icons[i]);<br>&#125;<br>console.log(process.env.NODE_ENV);<br>console.log(process.env.VUE_APP_SERVER);<br></code></pre></td></tr></table></figure><h2 id="610-servlet-çš„filter-æ£€æµ‹æ¥å£è€—æ—¶"><a class="markdownIt-Anchor" href="#610-servlet-çš„filter-æ£€æµ‹æ¥å£è€—æ—¶"></a> 6.10 Servlet çš„Filter æ£€æµ‹æ¥å£è€—æ—¶</h2><ul><li><p>æ–°å»ºfilteråŒ…</p></li><li><p>æ–°å»ºLogFilterç±»</p></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">package</span> com.jyx.filter;<span class="hljs-keyword">import</span> com.mysql.cj.log.Log;<span class="hljs-keyword">import</span> org.slf4j.Logger;<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<span class="hljs-keyword">import</span> org.springframework.context.annotation.ComponentScan;<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<span class="hljs-keyword">import</span> javax.servlet.*;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-meta">@Component</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Logger LOG =  LoggerFactory.getLogger(LogFilter<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;        <span class="hljs-comment">//æ‰“å°è¯·æ±‚ä¿¡æ¯</span>        HttpServletRequest request1 = (HttpServletRequest) request;        LOG.info(<span class="hljs-string">"----------LogFilterå¼€å§‹-----------"</span>);        LOG.info(<span class="hljs-string">"è¯·æ±‚åœ°å€:&#123;&#125; &#123;&#125;"</span>,request1.getRequestURL().toString(),request1.getMethod());        LOG.info(<span class="hljs-string">"è¯·æ±‚è¿œç¨‹åœ°å€:&#123;&#125;"</span>,request1.getRemoteAddr());        <span class="hljs-keyword">long</span> startTime = System.currentTimeMillis();        chain.doFilter(request,response);        LOG.info(<span class="hljs-string">"------LogFilterç»“æŸï¼šè€—æ—¶&#123;&#125;ms"</span>,System.currentTimeMillis()-startTime);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;        Filter.<span class="hljs-keyword">super</span>.destroy();    &#125;&#125;&lt;!--codeï¿¼<span class="hljs-number">15</span>--&gt;</code></pre></li></ul><h2 id="71-ä½¿ç”¨spring-ç‰¹æœ‰çš„-æ‹¦æˆªå™¨-interceptor-ç¬¬äºŒå¼€å§‹"><a class="markdownIt-Anchor" href="#71-ä½¿ç”¨spring-ç‰¹æœ‰çš„-æ‹¦æˆªå™¨-interceptor-ç¬¬äºŒå¼€å§‹"></a> 7.1 ä½¿ç”¨Spring ç‰¹æœ‰çš„ æ‹¦æˆªå™¨ interceptor  ç¬¬äºŒå¼€å§‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jyx.interceptor;<br><br><span class="hljs-keyword">import</span> org.slf4j.Logger;<br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.ModelAndView;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ‹¦æˆªå™¨ï¼šSpringæ¡†æ¶ç‰¹æœ‰çš„ï¼Œå¸¸ç”¨äºç™»å½•æ ¡éªŒï¼Œæƒé™æ ¡éªŒï¼Œè¯·æ±‚æ—¥å¿—æ‰“å° /login</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">LOG</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(LogInterceptor.class);<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">// æ‰“å°è¯·æ±‚ä¿¡æ¯</span><br>        LOG.info(<span class="hljs-string">&quot;------------- LogInterceptor å¼€å§‹ -------------&quot;</span>);<br>        LOG.info(<span class="hljs-string">&quot;è¯·æ±‚åœ°å€: &#123;&#125; &#123;&#125;&quot;</span>, request.getRequestURL().toString(), request.getMethod());<br>        LOG.info(<span class="hljs-string">&quot;è¿œç¨‹åœ°å€: &#123;&#125;&quot;</span>, request.getRemoteAddr());<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        request.setAttribute(<span class="hljs-string">&quot;requestStartTime&quot;</span>, startTime);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> (Long) request.getAttribute(<span class="hljs-string">&quot;requestStartTime&quot;</span>);<br>        LOG.info(<span class="hljs-string">&quot;------------- LogInterceptor ç»“æŸ è€—æ—¶ï¼š&#123;&#125; ms -------------&quot;</span>, System.currentTimeMillis() - startTime);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="72-aop"><a class="markdownIt-Anchor" href="#72-aop"></a> 7.2 AOP  ã€‚ã€‚ã€‚ã€‚</h2><h2 id="73-æ‰“å°sqlæ—¥å¿—"><a class="markdownIt-Anchor" href="#73-æ‰“å°sqlæ—¥å¿—"></a> 7.3 æ‰“å°sqlæ—¥å¿—</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com.jyx.mapper:</span> <span class="hljs-string">trace</span><br></code></pre></td></tr></table></figure><h1 id="8-ç®¡ç†å‘˜é¡µé¢"><a class="markdownIt-Anchor" href="#8-ç®¡ç†å‘˜é¡µé¢"></a> 8ã€ç®¡ç†å‘˜é¡µé¢</h1><h2 id="80-åˆå§‹åŒ–"><a class="markdownIt-Anchor" href="#80-åˆå§‹åŒ–"></a> 8.0 åˆå§‹åŒ–</h2><ul><li><p><strong>æ·»åŠ ä¸€ä¸ªé¡µé¢åç¬¬ä¸€ä»¶äº‹ï¼šæ·»åŠ è·¯ç”±</strong></p></li><li><pre class="highlight"><code class="java">,&#123;  path: <span class="hljs-string">'/admin/ebooks'</span>,  name: <span class="hljs-string">'ebookAdmin'</span>,  <span class="hljs-comment">// route level code-splitting</span>  <span class="hljs-comment">// this generates a separate chunk (about.[hash].js) for this route</span>  <span class="hljs-comment">// which is lazy-loaded when the route is visited.</span>  component: ebooksAdmin&#125;&lt;!--codeï¿¼<span class="hljs-number">18</span>--&gt;</code></pre></li></ul><h2 id="81-æ™®é€šæ—¥å¿—"><a class="markdownIt-Anchor" href="#81-æ™®é€šæ—¥å¿—"></a> 8.1 æ™®é€šæ—¥å¿—</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">LOG</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(EbookService.class);<br></code></pre></td></tr></table></figure><h2 id="82pagehelperçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#82pagehelperçš„ä½¿ç”¨"></a> 8.2PageHelperçš„ä½¿ç”¨</h2><ul><li><p>æ·»åŠ ä¾èµ–</p></li><li><pre class="highlight"><code class="java">&lt;dependency&gt;   &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;   &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;   &lt;version&gt;<span class="hljs-number">1.4</span><span class="hljs-number">.2</span>&lt;/version&gt;&lt;/dependency&gt;&lt;!--codeï¿¼<span class="hljs-number">20</span>--&gt;</code></pre></li></ul><p><strong>å…¶ä¸­ï¼Œtitleä¸ºæ˜¾ç¤ºçš„å­—æ®µåï¼ŒdataIndexä¸ºa-tableä¸­datasourceä¸­æ¯ä¸€ä¸ªJsonç±»å‹æ•°æ®ä¸­çš„keyå€¼ï¼Œè¦å¯¹åº”èµ·æ¥ï¼Œå¦åˆ™æ¯ä¸€åˆ—ä¸‹çš„valueä¸èƒ½æ­£ç¡®æ˜¾ç¤º</strong></p><h3 id="2-ç¼–è¾‘æŒ‰é’®"><a class="markdownIt-Anchor" href="#2-ç¼–è¾‘æŒ‰é’®"></a> 2ã€ç¼–è¾‘æŒ‰é’®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;a-button type=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;edit(record)&quot;</span>&gt;<br>  ç¼–è¾‘<br>&lt;/a-button&gt;<br></code></pre></td></tr></table></figure><h3 id="3-ç‚¹å‡»ç¼–è¾‘æŒ‰é’®å‡ºç°çš„è¡¨å•"><a class="markdownIt-Anchor" href="#3-ç‚¹å‡»ç¼–è¾‘æŒ‰é’®å‡ºç°çš„è¡¨å•"></a> 3ã€ç‚¹å‡»ç¼–è¾‘æŒ‰é’®å‡ºç°çš„è¡¨å•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!-- åœ¨ç¼–è¾‘é¡µé¢å±•ç¤ºçš„ç”µå­ä¹¦è¡¨å•  --&gt;<br>    &lt;a-form :model=<span class="hljs-string">&quot;ebook&quot;</span> :label-col=<span class="hljs-string">&quot;&#123; span: 6 &#125;&quot;</span> :wrapper-col=<span class="hljs-string">&quot;&#123; span: 18 &#125;&quot;</span>&gt;<br>      &lt;a-form-item label=<span class="hljs-string">&quot;å°é¢&quot;</span>&gt;<br>        &lt;a-input v-model:value=<span class="hljs-string">&quot;ebook.cover&quot;</span> /&gt;<br>      &lt;/a-form-item&gt;<br>      &lt;a-form-item label=<span class="hljs-string">&quot;åç§°&quot;</span>&gt;<br>        &lt;a-input v-model:value=<span class="hljs-string">&quot;ebook.name&quot;</span> /&gt;<br>      &lt;/a-form-item&gt;<br>      &lt;a-form-item label=<span class="hljs-string">&quot;åˆ†ç±»1&quot;</span>&gt;<br>        &lt;a-input v-model:value=<span class="hljs-string">&quot;ebook.category1Id&quot;</span> /&gt;<br>      &lt;/a-form-item&gt;<br>      &lt;a-form-item label=<span class="hljs-string">&quot;åˆ†ç±»2&quot;</span>&gt;<br>        &lt;a-input v-model:value=<span class="hljs-string">&quot;ebook.category2Id&quot;</span> /&gt;<br>      &lt;/a-form-item&gt;<br>      &lt;a-form-item label=<span class="hljs-string">&quot;æè¿°&quot;</span>&gt;<br>        &lt;a-input v-model:value=<span class="hljs-string">&quot;ebook.description&quot;</span> type=<span class="hljs-string">&quot;textarea&quot;</span> /&gt;<br>      &lt;/a-form-item&gt;<br>    &lt;/a-form&gt;<br><br>  &lt;/a-modal&gt;<br></code></pre></td></tr></table></figure><h3 id="4-ç»™äºˆè¡¨å•æ•°æ®çš„"><a class="markdownIt-Anchor" href="#4-ç»™äºˆè¡¨å•æ•°æ®çš„"></a> 4ã€ç»™äºˆè¡¨å•æ•°æ®çš„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">const</span> <span class="hljs-variable">ebook</span> <span class="hljs-operator">=</span> ref(&#123;&#125;);<br>    <span class="hljs-type">const</span> <span class="hljs-variable">modalVisible</span> <span class="hljs-operator">=</span> ref(<span class="hljs-literal">false</span>);<br>    <span class="hljs-type">const</span> <span class="hljs-variable">modalLoading</span> <span class="hljs-operator">=</span> ref(<span class="hljs-literal">false</span>);<br></code></pre></td></tr></table></figure><h3 id="5-editä¸»æ–¹æ³•"><a class="markdownIt-Anchor" href="#5-editä¸»æ–¹æ³•"></a> 5 editä¸»æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">const</span> <span class="hljs-variable">edit</span> <span class="hljs-operator">=</span>(record:any)=&gt;&#123;<br>  ebook.value = record;<br>  modalVisible.value=<span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ç‚¹å‡»okè¯·æ±‚æ›´æ–°æ•°æ®åˆ·æ–°åˆ—è¡¨"><a class="markdownIt-Anchor" href="#6-ç‚¹å‡»okè¯·æ±‚æ›´æ–°æ•°æ®åˆ·æ–°åˆ—è¡¨"></a> 6ã€ç‚¹å‡»okï¼Œè¯·æ±‚æ›´æ–°æ•°æ®ï¼Œåˆ·æ–°åˆ—è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">const</span> <span class="hljs-variable">handleModalOk</span> <span class="hljs-operator">=</span> () =&gt;&#123;<br>  modalLoading.value = <span class="hljs-literal">true</span>;<br>  axios.post(<span class="hljs-string">&#x27;/ebook/save&#x27;</span>,ebook.value).then((response) =&gt; &#123;<br>    modalLoading.value = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (response.data.code==<span class="hljs-number">1</span>)&#123;<br>      modalVisible.value = <span class="hljs-literal">false</span>;<br><br>      <span class="hljs-comment">// é‡æ–°åŠ è½½åˆ—è¡¨</span><br>      handleQuery(&#123;<br>        page: pagination.value.current,<br>        size: pagination.value.pageSize,<br>      &#125;);<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>      message.error(response.data.message);<br>    &#125;<br>  &#125;)<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="7-ä¿å­˜æ“ä½œçš„åç«¯"><a class="markdownIt-Anchor" href="#7-ä¿å­˜æ“ä½œçš„åç«¯"></a> 7ã€ä¿å­˜æ“ä½œçš„åç«¯</h3><ul><li>æ ¹æ®idæ˜¯å¦ä¸ºnullæ¥å†³å®šæ˜¯æ–°å¢è¿˜æ˜¯ä¿å­˜</li><li>æ–°å¢å’Œä¿å­˜å…¬ç”¨ä¸€ä¸ªæ–¹æ³•</li><li>Controllerå±‚ åœ¨æ¥æ”¶å‰ç«¯ä¼ æ¥çš„è¡¨è¾¾æ•°æ®æ—¶å€™</li><li>è¦åœ¨å‚æ•°å‰åŠ ä¸Š@ResponseBodyæ³¨è§£ï¼Œæ¥ä¿è¯æ¥æ”¶åˆ°</li></ul><h2 id="84-é›ªèŠ±ç®—æ³•"><a class="markdownIt-Anchor" href="#84-é›ªèŠ±ç®—æ³•"></a> 8.4 é›ªèŠ±ç®—æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jyx.Utils;<br><br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> java.text.ParseException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Twitterçš„åˆ†å¸ƒå¼è‡ªå¢IDé›ªèŠ±ç®—æ³•</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnowFlake</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * èµ·å§‹çš„æ—¶é—´æˆ³</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">START_STMP</span> <span class="hljs-operator">=</span>   <span class="hljs-number">1653580800000L</span>; <span class="hljs-comment">// 2021-01-01 08:00:00   èµ·å§‹æ—¶é—´</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¯ä¸€éƒ¨åˆ†å ç”¨çš„ä½æ•°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">SEQUENCE_BIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>; <span class="hljs-comment">//åºåˆ—å·å ç”¨çš„ä½æ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">MACHINE_BIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;   <span class="hljs-comment">//æœºå™¨æ ‡è¯†å ç”¨çš„ä½æ•° 2^5=32  æœ€å¤šå¯ä»¥è¡¨ç¤º32å°æœºå™¨</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_BIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<span class="hljs-comment">//æ•°æ®ä¸­å¿ƒå ç”¨çš„ä½æ•°</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¯ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_DATACENTER_NUM</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span> ^ (-<span class="hljs-number">1L</span> &lt;&lt; DATACENTER_BIT);<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_MACHINE_NUM</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span> ^ (-<span class="hljs-number">1L</span> &lt;&lt; MACHINE_BIT);<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_SEQUENCE</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span> ^ (-<span class="hljs-number">1L</span> &lt;&lt; SEQUENCE_BIT);<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¯ä¸€éƒ¨åˆ†å‘å·¦çš„ä½ç§»</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">MACHINE_LEFT</span> <span class="hljs-operator">=</span> SEQUENCE_BIT;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_LEFT</span> <span class="hljs-operator">=</span> SEQUENCE_BIT + MACHINE_BIT;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">TIMESTMP_LEFT</span> <span class="hljs-operator">=</span> DATACENTER_LEFT + DATACENTER_BIT;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">datacenterId</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">//æ•°æ®ä¸­å¿ƒ</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">machineId</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;     <span class="hljs-comment">//æœºå™¨æ ‡è¯†</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>; <span class="hljs-comment">//åºåˆ—å·</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastStmp</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span>;<span class="hljs-comment">//ä¸Šä¸€æ¬¡æ—¶é—´æˆ³</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SnowFlake</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SnowFlake</span><span class="hljs-params">(<span class="hljs-type">long</span> datacenterId, <span class="hljs-type">long</span> machineId)</span> &#123;<br>        <span class="hljs-keyword">if</span> (datacenterId &gt; MAX_DATACENTER_NUM || datacenterId &lt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;datacenterId can&#x27;t be greater than MAX_DATACENTER_NUM or less than 0&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (machineId &gt; MAX_MACHINE_NUM || machineId &lt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;machineId can&#x27;t be greater than MAX_MACHINE_NUM or less than 0&quot;</span>);<br>        &#125;<br>        <span class="hljs-built_in">this</span>.datacenterId = datacenterId;<br>        <span class="hljs-built_in">this</span>.machineId = machineId;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * äº§ç”Ÿä¸‹ä¸€ä¸ªID</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">currStmp</span> <span class="hljs-operator">=</span> getNewstmp();<span class="hljs-comment">//è¿™ä¸ªæ˜¯è·Ÿèµ·å§‹æ—¶é—´æˆ³çš„ä¸€ä¸ªå·®å€¼</span><br>        <span class="hljs-keyword">if</span> (currStmp &lt; lastStmp) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Clock moved backwards.  Refusing to generate id&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (currStmp == lastStmp) &#123;<br>            <span class="hljs-comment">//ç›¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·è‡ªå¢</span><br>            sequence = (sequence + <span class="hljs-number">1</span>) &amp; MAX_SEQUENCE;  <span class="hljs-comment">//ä¸€ä¸ªæ¯«ç§’å†…ï¼Œæœ€å¤šå¯ä»¥ç”Ÿæˆçš„åºåˆ—å·æ˜¯ 2^SEQUENCE_BIT</span><br>            <span class="hljs-comment">//åŒä¸€æ¯«ç§’çš„åºåˆ—æ•°å·²ç»è¾¾åˆ°æœ€å¤§</span><br>            <span class="hljs-keyword">if</span> (sequence == <span class="hljs-number">0L</span>) &#123;<br>                currStmp = getNextMill();<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//ä¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·ç½®ä¸º0</span><br>            sequence = <span class="hljs-number">0L</span>;<br>        &#125;<br><br>        lastStmp = currStmp;<br><br>        <span class="hljs-keyword">return</span> (currStmp - START_STMP) &lt;&lt; TIMESTMP_LEFT <span class="hljs-comment">//æ—¶é—´æˆ³éƒ¨åˆ†</span><br>                | datacenterId &lt;&lt; DATACENTER_LEFT       <span class="hljs-comment">//æ•°æ®ä¸­å¿ƒéƒ¨åˆ†</span><br>                | machineId &lt;&lt; MACHINE_LEFT             <span class="hljs-comment">//æœºå™¨æ ‡è¯†éƒ¨åˆ†</span><br>                | sequence;                             <span class="hljs-comment">//åºåˆ—å·éƒ¨åˆ†</span><br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getNextMill</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">mill</span> <span class="hljs-operator">=</span> getNewstmp();<br>        <span class="hljs-keyword">while</span> (mill &lt;= lastStmp) &#123;<br>            mill = getNewstmp();<br>        &#125;<br>        <span class="hljs-keyword">return</span> mill;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getNewstmp</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> System.currentTimeMillis();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ParseException &#123;<br>        <span class="hljs-comment">// æ—¶é—´æˆ³</span><br><span class="hljs-comment">//         System.out.println(System.currentTimeMillis());</span><br><span class="hljs-comment">//         System.out.println(new Date().getTime());</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//         String dateTime = &quot;2022-05-27 00:00:00&quot;;</span><br><span class="hljs-comment">//         SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);</span><br><span class="hljs-comment">//         System.out.println(sdf.parse(dateTime).getTime());</span><br><br>        <span class="hljs-type">SnowFlake</span> <span class="hljs-variable">snowFlake</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SnowFlake</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            System.out.println(snowFlake.nextId());<span class="hljs-comment">//æ¯æ¬¡éƒ½å»ç”Ÿæˆid</span><br>            System.out.println(System.currentTimeMillis() - start);<span class="hljs-comment">//è®¡ç®—ç”Ÿæˆæ‰€è€—è´¹çš„æ—¶é—´</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="85-åˆ é™¤åŠŸèƒ½"><a class="markdownIt-Anchor" href="#85-åˆ é™¤åŠŸèƒ½"></a> 8.5 åˆ é™¤åŠŸèƒ½</h2><ul><li>å‰ç«¯</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;a-popconfirm<br>    title=<span class="hljs-string">&quot;Are you sure delete this task?&quot;</span><br>    ok-text=<span class="hljs-string">&quot;Yes&quot;</span><br>    cancel-text=<span class="hljs-string">&quot;No&quot;</span><br>    <span class="hljs-meta">@confirm</span>=<span class="hljs-string">&quot;handleDelete(record.id)&quot;</span><br>&gt;<br>  &lt;a-button type=<span class="hljs-string">&quot;danger&quot;</span>&gt;<br>    åˆ é™¤<br>  &lt;/a-button&gt;<br>&lt;/a-popconfirm&gt;<br></code></pre></td></tr></table></figure><h2 id="86-æŸ¥è¯¢åŠŸèƒ½"><a class="markdownIt-Anchor" href="#86-æŸ¥è¯¢åŠŸèƒ½"></a> 8.6 æŸ¥è¯¢åŠŸèƒ½</h2><ul><li>æ¨ªå‘çš„formè¡¨å•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;p&gt;<br>  &lt;a-form layout=<span class="hljs-string">&quot;inline&quot;</span> :model=<span class="hljs-string">&quot;param&quot;</span>&gt;<br>    &lt;a-form-item&gt;<br>      &lt;a-input v-model:value=<span class="hljs-string">&quot;param.name&quot;</span> placeholder=<span class="hljs-string">&quot;åç§°&quot;</span>&gt;&lt;/a-input&gt;<br>    &lt;/a-form-item&gt;<br>    &lt;a-form-item&gt;<br>      &lt;a-button type=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;handleQuery(&#123;page: 1, size: pagination.pageSize&#125;)&quot;</span>&gt;<br>        æŸ¥è¯¢<br>      &lt;/a-button&gt;<br>    &lt;/a-form-item&gt;<br>    &lt;a-form-item&gt;<br>      &lt;a-button type=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;add()&quot;</span>&gt;<br>        æ–°å¢<br>      &lt;/a-button&gt;<br>    &lt;/a-form-item&gt;<br>  &lt;/a-form&gt;<br>&lt;/p&gt;<br></code></pre></td></tr></table></figure><ul><li>paramä¸ºå“åº”å¼æ•°æ®å˜é‡ å…¶å€¼ä»inputè·å¾—</li><li>æ³¨æ„æ­¤å¤„ å¹¶æ²¡æœ‰åœ¨ æŸ¥è¯¢æŒ‰é’®çš„@Clickç»‘å®šçš„å‡½æ•°ä¸­ç›´æ¥ç»™åˆ° æŸ¥è¯¢å‚æ•°name çš„å€¼ è€Œæ˜¯åœ¨setupå‡½æ•°ä¸­ å®šä¹‰paramå˜é‡</li><li><strong>é‡ç‚¹ï¼šå®šä¹‰å®Œä¹‹åä¸€å®šè¦åˆå§‹åŒ–ï¼ï¼ï¼</strong></li><li>åœ¨æŸ¥è¯¢å‡½æ•°ä¸­å†å» æ·»åŠ  ä¼ ç»™åç«¯çš„å‚æ•°</li><li>æœ€åè¦åœ¨setup å return å›å»</li></ul><h2 id="87-axioså¼‚æ­¥åŠ è½½å¯èƒ½å‡ºç°çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#87-axioså¼‚æ­¥åŠ è½½å¯èƒ½å‡ºç°çš„é—®é¢˜"></a> 8.7 axioså¼‚æ­¥åŠ è½½å¯èƒ½å‡ºç°çš„é—®é¢˜</h2><ul><li><p>å¦‚æœåˆ†ç±»æŸ¥è¯¢åœ¨ä¹¦ç±æŸ¥è¯¢ä¹‹å</p></li><li><p>å¹¶ä¸”ä¹¦ç±ä¸­è¦ç”¨åˆ°ä¹¦ç±åˆ†ç±»çš„æ•°æ®</p></li><li><p>åˆ™ä¼šæŠ¥é”™ã€‚  ä¹¦ç±å±•ç¤ºâ€“&gt;(ä¾èµ–äº)åˆ†ç±»æ•°æ®</p></li><li><p>åº”è¯¥åœ¨axiosä¸­å°†æŸ¥è¯¢å†…ç½®åœ¨åˆ†ç±»æŸ¥è¯¢ä¸­ï¼Œ</p></li><li><pre class="highlight"><code class="Java"><span class="hljs-comment">/** * æŸ¥è¯¢æ‰€æœ‰åˆ†ç±» **/</span><span class="hljs-keyword">const</span> handleQueryCategory = () =&gt; &#123;  loading.value = <span class="hljs-keyword">true</span>;  axios.get(<span class="hljs-string">"/category/all"</span>).then((response) =&gt; &#123;    loading.value = <span class="hljs-keyword">false</span>;    <span class="hljs-keyword">const</span> data = response.data;    <span class="hljs-keyword">if</span> (data.code==<span class="hljs-number">1</span>) &#123;      categorys = data.data;      console.log(<span class="hljs-string">"åŸå§‹æ•°ç»„ï¼š"</span>, categorys);      level1.value = [];      level1.value = Tool.array2Tree(categorys, <span class="hljs-number">0</span>);      console.log(<span class="hljs-string">"æ ‘å½¢ç»“æ„ï¼š"</span>, level1.value);      <span class="hljs-comment">// åŠ è½½å®Œåˆ†ç±»ï¼Œå†åŠ è½½ç”µå­ä¹¦ï¼Œå¦åˆ™å¦‚æœåˆ†ç±»æ ‘åŠ è½½å¾ˆæ…¢ï¼Œåˆ™ç”µå­ä¹¦æ¸²æŸ“ä¼šæŠ¥é”™</span>      <span class="hljs-comment">//å› ä¸ºaxioså¼‚æ­¥åŠ è½½çš„åŸå› </span>      handleQuery(&#123;        page: <span class="hljs-number">1</span>,        size: pagination.value.pageSize      &#125;);    &#125; <span class="hljs-keyword">else</span> &#123;      message.error(data.message);    &#125;  &#125;);&#125;;&lt;!--codeï¿¼<span class="hljs-number">29</span>--&gt;</code></pre></li></ul><p><strong>æ¸²æŸ“æ•°æ®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;template v-slot:category=<span class="hljs-string">&quot;&#123; text, record &#125;&quot;</span>&gt;<br>  &lt;span&gt;&#123;&#123; queryCategoryName(record.category1Id) &#125;&#125; / &#123;&#123;queryCategoryName(record.category2Id) &#125;&#125;&lt;/span&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&#123;<br>  title: <span class="hljs-string">&#x27;åˆ†ç±»&#x27;</span>,<br><br>  slots: &#123; customRender: <span class="hljs-string">&#x27;category&#x27;</span> &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><h1 id="9-æ–‡æ¡£ç®¡ç†"><a class="markdownIt-Anchor" href="#9-æ–‡æ¡£ç®¡ç†"></a> 9ã€æ–‡æ¡£ç®¡ç†</h1><h2 id="90-vueä¸­çš„route-linkæ ‡ç­¾ä¸­urlè®¾ç½®å‚æ•°"><a class="markdownIt-Anchor" href="#90-vueä¸­çš„route-linkæ ‡ç­¾ä¸­urlè®¾ç½®å‚æ•°"></a> 9.0 vueä¸­çš„route-linkæ ‡ç­¾ä¸­urlè®¾ç½®å‚æ•°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;router-link :to=<span class="hljs-string">&quot;&#x27;/admin/doc?ebookId=&#x27; + record.id&quot;</span>&gt;<br></code></pre></td></tr></table></figure><ul><li><code>''</code>ä¸­ç»™å‡ºçš„ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥<code>+</code>æ–¹å¼æ‹¼æ¥</li></ul><p>è¢«è·³è½¬çš„é¡µé¢ä¸­ <strong>ä½¿ç”¨useRoute()æ‹¿åˆ°å‚æ•°</strong></p><ul><li><code>const route = useRoute();</code></li><li></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">doc.value = &#123;<br>  ebookId: route.query.ebookId,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="91-æ–‡æ¡£å†…å®¹çš„ä¿å­˜saveoradd-çš„é€»è¾‘ä»¥åŠcopyutilsçš„æ³¨æ„é—®é¢˜ä¸èƒ½æœ‰æ„é€ å™¨"><a class="markdownIt-Anchor" href="#91-æ–‡æ¡£å†…å®¹çš„ä¿å­˜saveoradd-çš„é€»è¾‘ä»¥åŠcopyutilsçš„æ³¨æ„é—®é¢˜ä¸èƒ½æœ‰æ„é€ å™¨"></a> 9.1 æ–‡æ¡£å†…å®¹çš„ä¿å­˜(saveOrAdd çš„é€»è¾‘ï¼Œä»¥åŠCopyUtilsçš„æ³¨æ„é—®é¢˜ï¼Œä¸èƒ½æœ‰æ„é€ å™¨)</h2><h3 id="ä¸€-saveoradd-çš„é€»è¾‘"><a class="markdownIt-Anchor" href="#ä¸€-saveoradd-çš„é€»è¾‘"></a> ä¸€ã€<strong>SaveOrAdd</strong> çš„é€»è¾‘</h3><p><strong>ä¸»è¦æ€è·¯</strong>:1,å¯¹æ–°å¢çš„æ–‡æ¡£è€Œè¨€:æ–‡æ¡£å†…å®¹ï¼ˆå®é™…æ˜¯Contentè¡¨ï¼‰ä¸€å®šæ˜¯ Addæ“ä½œ</p><p>â€‹   2ï¼Œå¯¹è¦Saveï¼ˆå³å·²ç»åˆ›å»ºè¿‡çš„æ–‡æ¡£ï¼‰çš„æ–‡æ¡£è€Œè¨€ï¼Œä¾æ®ï¼š**Contentä¸­å¯¹åº”æ–‡æ¡£IDçš„contentå­—æ®µæ˜¯å¦ä¸ºç©ºï¼ˆå…·ä½“åˆ¤æ–­çš„ä¾æ®æ˜¯ï¼šupdateçš„è¿”å›å€¼ï¼‰**åˆ†ä¸¤ç§æƒ…å†µ</p><p>I:<strong>update</strong>çš„è¿”å›å€¼è‹¥ä¸º0ï¼Œåˆ™è¡¨ç¤ºå¹¶<strong>æ— </strong>docIdå¯¹åº”çš„å­—æ®µï¼Œè¿˜ä¸å­˜åœ¨ï¼Œupdateå½“ç„¶è¿”å›å€¼ä¸º0ï¼Œæ­¤æ—¶å°±åº”è¯¥å»<strong>insert</strong></p><p>II: <strong>update</strong>çš„è¿”å›å€¼è‹¥ä¸º1,åˆ™ä¸<strong>I</strong>ç›¸åï¼Œåˆ™ä¸éœ€è¦å¦å¤–çš„æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(DocSaveReq req)</span>&#123;<br>    <span class="hljs-type">Doc</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> CopyUtil.copy(req,Doc.class);<br>    <span class="hljs-type">Content</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> CopyUtil.copy(req,Content.class);<br>    <span class="hljs-keyword">if</span>(ObjectUtils.isEmpty(req.getId()))&#123;<br>        <span class="hljs-comment">//æ–°å¢</span><br>        doc.setId(snowFlake.nextId());<br>        doc.setViewCount(<span class="hljs-number">0</span>);<br>        doc.setVoteCount(<span class="hljs-number">0</span>);<br>        docMapper.insertSelective(doc);<br><br>        <span class="hljs-comment">//å¯¹content insert</span><br>        content.setId(doc.getId());<br>        contentMapper.insertSelective(content);<br>    &#125; <span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-comment">//æ›´æ–°</span><br>        docMapper.updateByPrimaryKey(doc);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> contentMapper.updateByPrimaryKeyWithBLOBs(content);<br>        <span class="hljs-comment">//è¿”å›å€¼åˆ¤æ–­</span><br>        <span class="hljs-keyword">if</span>(count == <span class="hljs-number">0</span>)&#123;<br>            contentMapper.insert(content);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒ-copyutilsçš„æ³¨æ„é—®é¢˜"><a class="markdownIt-Anchor" href="#äºŒ-copyutilsçš„æ³¨æ„é—®é¢˜"></a> äºŒã€CopyUtilsçš„æ³¨æ„é—®é¢˜</h3><p><code>Doc doc = CopyUtil.copy(req,Doc.class);</code></p><p>å¦‚æœreqä¸­æœ‰äº†å…¨å­—æ®µçš„æ„é€ å™¨ï¼Œè¿™ä¸ªæ—¶å€™æ‰‹åŠ¨åœ°å»å†æ·»åŠ ä¸€ä¸ªæ— å‚æ„é€ å™¨ï¼Œåˆ™æŠ¥é”™ï¼Œåˆ™ä¼šCopyå¤±è´¥ã€‚ã€‚ã€‚ã€‚</p><h2 id="92-é˜…è¯»æ•°åŠ ä¸€ç‚¹èµ"><a class="markdownIt-Anchor" href="#92-é˜…è¯»æ•°åŠ ä¸€ç‚¹èµ"></a> 9.2 é˜…è¯»æ•°åŠ ä¸€&amp;ç‚¹èµ</h2><p><strong>æ³¨æ„çš„é—®é¢˜</strong></p><ol><li>å°½ç®¡æ•°æ®åº“ä¸­è®¾ç½®äº†viewå’Œvoteçš„å­—æ®µé»˜è®¤å€¼ä¸º<strong>0</strong>,ä½†å¦‚æœæ˜¯åœ¨insertçš„æ—¶å€™é€‰æ‹©äº†è¿™ä¸¤ä¸ªå­—æ®µï¼Œåˆ™æ–°å¢çš„ä¸€æ¡æ•°æ®çš„</li><li>è§£å†³åŠæ³•ï¼š</li></ol><p><strong>æœªå¼„æ˜ç™½çš„é—®é¢˜</strong>:</p><p>ï¼ˆå…·ä½“çš„åœ¨ä¸€æ®µæ—¶é—´å†…åŒä¸€ipçš„äººä¸èƒ½å¯¹åŒä¸€ç¯‡æ–‡ç« å¤šæ¬¡ç‚¹èµï¼‰</p><p>RedisUtil , RequestContext,Aop</p><h2 id="93-ä¿®å¤-åœ¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹åœ¨åŒä¸€ç”µå­ä¹¦é¡µé¢å†…ç‚¹å‡»ä¸åŒçš„æ–‡æ¡£é¡µé¢æ¥å›è·³è½¬æ—¶é˜…è¯»æ•°ä¸èƒ½å®æ—¶æ›´æ–°çš„bug"><a class="markdownIt-Anchor" href="#93-ä¿®å¤-åœ¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹åœ¨åŒä¸€ç”µå­ä¹¦é¡µé¢å†…ç‚¹å‡»ä¸åŒçš„æ–‡æ¡£é¡µé¢æ¥å›è·³è½¬æ—¶é˜…è¯»æ•°ä¸èƒ½å®æ—¶æ›´æ–°çš„bug"></a> 9.3 ä¿®å¤ åœ¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹åœ¨åŒä¸€ç”µå­ä¹¦é¡µé¢å†…ç‚¹å‡»ä¸åŒçš„æ–‡æ¡£ï¼Œé¡µé¢æ¥å›è·³è½¬æ—¶ï¼Œé˜…è¯»æ•°ä¸èƒ½å®æ—¶æ›´æ–°çš„bugã€‚</h2><h2 id="94-è‡ªå®šä¹‰sqlæ›´æ–°ebookinfor"><a class="markdownIt-Anchor" href="#94-è‡ªå®šä¹‰sqlæ›´æ–°ebookinfor"></a> 9.4 è‡ªå®šä¹‰sqlæ›´æ–°ebookInfor</h2><h2 id="95-springbootå®šæ—¶ä»»åŠ¡"><a class="markdownIt-Anchor" href="#95-springbootå®šæ—¶ä»»åŠ¡"></a> 9.5 SpringBootå®šæ—¶ä»»åŠ¡</h2><h2 id="96websocketmapä¿®é¥°ç¬¦é—®é¢˜"><a class="markdownIt-Anchor" href="#96websocketmapä¿®é¥°ç¬¦é—®é¢˜"></a> 9.6WebSocket,mapä¿®é¥°ç¬¦é—®é¢˜</h2><h2 id="97-å¼‚æ­¥åŒ–ä¸­æ³¨è§£å†²çªé—®é¢˜"><a class="markdownIt-Anchor" href="#97-å¼‚æ­¥åŒ–ä¸­æ³¨è§£å†²çªé—®é¢˜"></a> 9.7 å¼‚æ­¥åŒ–ä¸­æ³¨è§£å†²çªé—®é¢˜</h2><h2 id="98-äº‹åŠ¡æ³¨è§£"><a class="markdownIt-Anchor" href="#98-äº‹åŠ¡æ³¨è§£"></a> 9.8 äº‹åŠ¡æ³¨è§£</h2><h1 id="10-userç®¡ç†"><a class="markdownIt-Anchor" href="#10-userç®¡ç†"></a> 10ã€Userç®¡ç†</h1><h2 id="100-ç”Ÿæˆuser-çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#100-ç”Ÿæˆuser-çš„é—®é¢˜"></a> 10.0 ç”ŸæˆUser çš„é—®é¢˜</h2><ul><li>Mybatisä¸­generatoråœ¨ç”ŸæˆUseræ—¶ï¼ŒMapperç±»ä¸­æ²¡æœ‰ <strong>update</strong>æ–¹æ³•</li><li>ä¸å¯çŸ¥çš„åŸå› ä½¿å¾— è¡¨æ˜ ä¸º <strong>user</strong>çš„è¡¨ç”Ÿæˆä»£ç æ–‡ä»¶ä¸å¯¹</li><li>ç»è¿‡ä¿®æ”¹è¡¨åå¾—ä»¥è§£å†³é—®é¢˜</li></ul><h2 id="101-ä¸šåŠ¡å¼‚å¸¸ç»Ÿä¸€å¤„ç†ç±»"><a class="markdownIt-Anchor" href="#101-ä¸šåŠ¡å¼‚å¸¸ç»Ÿä¸€å¤„ç†ç±»"></a> 10.1 ä¸šåŠ¡å¼‚å¸¸ç»Ÿä¸€å¤„ç†ç±»</h2><ul><li><p><strong>BusinessExceptionCode</strong></p></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">package</span> com.jyx.exception;<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> BusinessExceptionCode &#123;    USER_LOGIN_NAME_EXIST(<span class="hljs-string">"ç™»å½•åå·²å­˜åœ¨"</span>),    LOGIN_USER_ERROR(<span class="hljs-string">"ç”¨æˆ·åä¸å­˜åœ¨æˆ–å¯†ç é”™è¯¯"</span>),    VOTE_REPEAT(<span class="hljs-string">"æ‚¨å·²ç‚¹èµè¿‡"</span>),    ;    ;    <span class="hljs-keyword">private</span> String desc;    BusinessExceptionCode() &#123;    &#125;    BusinessExceptionCode(String desc) &#123;        <span class="hljs-keyword">this</span>.desc = desc;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getDesc</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> desc;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDesc</span><span class="hljs-params">(String desc)</span> </span>&#123;        <span class="hljs-keyword">this</span>.desc = desc;    &#125;&#125;&lt;!--codeï¿¼<span class="hljs-number">35</span>--&gt;</code></pre></li><li><hr><p><strong>ControllerExceptionHandler</strong>ä¸­æ–°å¢åŠ </p></li><li><pre class="highlight"><code class="java"><span class="hljs-comment">/** * ä¸šåŠ¡å¼‚å¸¸ç»Ÿä¸€å¤„ç† * */</span><span class="hljs-meta">@ExceptionHandler</span>(value = BusinessException<span class="hljs-class">.<span class="hljs-keyword">class</span>)@<span class="hljs-title">ResponseBody</span><span class="hljs-title">public</span> <span class="hljs-title">Result</span>&lt;<span class="hljs-title">Object</span>&gt; <span class="hljs-title">validExceptionHandler</span>(<span class="hljs-title">BusinessException</span> <span class="hljs-title">e</span>) </span>&#123;    LOG.warn(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸ï¼š&#123;&#125;"</span>, e.getCode().getDesc());    <span class="hljs-keyword">return</span> Result.error(Code.BUSINESS_EXCEPTION.getCode(),BusinessExceptionCode.USER_LOGIN_NAME_EXIST.getDesc());&#125;&lt;!--codeï¿¼<span class="hljs-number">36</span>--&gt;</code></pre></li></ul><h2 id="103-ä¸å¯ä¿®æ”¹ç”¨æˆ·åå‰ç«¯"><a class="markdownIt-Anchor" href="#103-ä¸å¯ä¿®æ”¹ç”¨æˆ·åå‰ç«¯"></a> 10.3 ä¸å¯ä¿®æ”¹ç”¨æˆ·åï¼ˆå‰ç«¯ï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;a-input v-model:value=&quot;user.name&quot; :disabled=&quot;user.id!==undefined&quot; /&gt;<br></code></pre></td></tr></table></figure><p>**ç‰¹åˆ«æ³¨æ„:      <code>:</code>   **åƒä¸‡ä¸èƒ½  <strong>å°‘ï¼ï¼ï¼ï¼</strong></p><h2 id="104-copyutils-çš„ä½œç”¨"><a class="markdownIt-Anchor" href="#104-copyutils-çš„ä½œç”¨"></a> 10.4 CopyUtils çš„ä½œç”¨ï¼ï¼</h2><p><strong>é‡ç½®å¯†ç éœ€æ±‚åˆ†æ:</strong></p><ul><li>å‰æ™¯ï¼šå‰ç«¯æœ‰å¯†ç æ ¼å¼æ ¡éªŒï¼Œæ‰€ä»¥å¦‚æœå†ç¼–è¾‘é¡µé¢å¤„ç†é‡ç½®å¯†ç çš„éœ€æ±‚ï¼Œç”±äºç»è¿‡åŠ å¯†çš„å¯†ç é•¿åº¦ä¸º32ä½ï¼Œå°±ä¸ç¬¦åˆäº†æ ¡éªŒè§„åˆ™ï¼Œå¯¼è‡´æ¯æ¬¡æƒ³æ›´æ”¹å…¶ä»–å­—æ®µçš„æ—¶å€™ï¼Œéƒ½ä¸å¾—ä¸å»ä¿®æ”¹åŠ å¯†è¿‡åçš„å¯†ç ï¼Œå¹¶ä¸”è¦æƒ³ç»´æŒåŸå¯†ç ï¼Œæ¯æ¬¡è¿˜éœ€è¦å»è¾“å…¥åŸæ¥çš„å¯†ç </li><li>å¦‚æ­¤ç¼–è¾‘åŠŸèƒ½åº”è¯¥ä¸é‡ç½®å¯†ç åŠŸèƒ½è§£è€¦ï¼ˆæ­¤å¤„åº”è¯¥æ˜¯ç”±äºå¯†ç å…·æœ‰æ£€éªŒè§„åˆ™å¯¼è‡´äº†è¿™ä¸¤ä¸ªåŠŸèƒ½äº§ç”Ÿäº†å¤æ‚å…³ç³»ï¼‰</li></ul><p><strong>CopyUtils çš„ä½œç”¨</strong></p><ul><li>ç”±äºmybatisçš„è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ä¸­çš„æ–¹æ³•å‚æ•°ç±»å‹åŸºæœ¬éƒ½ä»¥domainä¸­çš„åŸç”Ÿå®ä½“ç±»ä¸ºä¸»ï¼Œ</li><li>åˆå› ä¸ºåœ¨Serviceå±‚ä¸­ä¸ºäº†å¯æ‹“å±•æ€§çš„æé«˜ï¼ŒServiceæ–¹æ³•çš„å‚æ•°åŸºæœ¬éƒ½æ˜¯ç»è¿‡åŒ…è£…è¿‡çš„<strong>XXXReq</strong> ç±»ï¼Œ</li><li>å› æ­¤ä¸èƒ½ç›´æ¥å°†ä¼ åˆ°Serviceæ–¹æ³•ä¸­çš„Reqç±»å‹å‚æ•°ç»™åˆ°Mapperå±‚ï¼Œ</li><li>å› æ­¤å°±æœ‰äº† è¦ä»<strong>Reqç±»å‹</strong>è½¬åˆ°<strong>åŸç”Ÿç±»å‹</strong> å¹¶ä¸”è¾¾åˆ°<strong>å·²æœ‰æ•°æ®æ‹·è´</strong>çš„éœ€æ±‚ï¼Œå³<strong>CopUtils</strong></li></ul><h2 id="105-userç™»å½•é¡µé¢"><a class="markdownIt-Anchor" href="#105-userç™»å½•é¡µé¢"></a> 10.5 Userç™»å½•é¡µé¢</h2><h3 id="ä¸€-å‰ç«¯"><a class="markdownIt-Anchor" href="#ä¸€-å‰ç«¯"></a> ä¸€ã€å‰ç«¯</h3><p><strong>ä¸»è¦æ€è·¯ï¼š</strong></p><ol><li><p>æ·»åŠ ç™»å½•çš„<code>&lt;a&gt;&lt;/a&gt;</code>æ ‡ç­¾ï¼Œæˆ–è€…æŒ‰é’®ï¼Œç‚¹å‡»åˆ™ä¼šå¼¹å‡º <strong>loginModel</strong>(å³è¦å»@Clickä¸€ä¸ªå‡½æ•°);</p></li><li><p>loginModel ä¸­åº”è¯¥æœ‰: ç”¨æˆ·åï¼Œå¯†ç ï¼ˆè¦åŠ å¯†ï¼‰ï¼Œä»£ç ï¼š</p></li><li><pre class="highlight"><code class="vue">&lt;a-modal    title=&quot;ç™»å½•&quot;    v-model:visible=&quot;loginModalVisible&quot;    :confirm-loading=&quot;loginModalLoading&quot;    @ok=&quot;login&quot;&gt;  &lt;a-form :model=&quot;loginUser&quot; :label-col=&quot;&#123; span: 6 &#125;&quot; :wrapper-col=&quot;&#123; span: 18 &#125;&quot;&gt;    &lt;a-form-item label=&quot;ç™»å½•å&quot;&gt;      &lt;a-input v-model:value=&quot;loginUser.name&quot; /&gt;    &lt;/a-form-item&gt;    &lt;a-form-item label=&quot;å¯†ç &quot;&gt;      &lt;a-input v-model:value=&quot;loginUser.password&quot; type=&quot;password&quot; /&gt;    &lt;/a-form-item&gt;  &lt;/a-form&gt;&lt;/a-modal&gt;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>4. loginModel ä¸­æ¶‰åŠçš„å˜é‡ï¼Œ<br><br>5. ```typescript<br>   const loginModalVisible = ref(false);<br>   const loginModalLoading = ref(false);<br>   const loginUser = ref(&#123;<br>     name: &#x27;never&#x27;,<br>     password: &#x27;never&#x27;,<br>   &#125;)<br>   //loginUser ä¸ºä¸€ä¸ªå“åº”å¼å˜é‡ï¼Œä¼šåŠ¨æ€ç›‘å¬æ¨¡æ€æ¡†ä¸­çš„å­—æ®µå€¼ï¼Œæ›´æ–°åˆ° loginModelä¸­ formä¸­ çš„ :modelæŒ‡å®šçš„å˜é‡ æœ¬ä¾‹ä¸­å°±æ˜¯ loginUser (:model=&quot;loginUser&quot; )<br></code></pre></td></tr></table></figure></code></pre></li><li><p>å¼¹å‡ºmodelçš„å‡½æ•°ï¼š</p></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">const</span> showLoginModal = () =&gt; &#123;  loginModalVisible.value =<span class="hljs-keyword">true</span>;&#125;&lt;!--codeï¿¼<span class="hljs-number">39</span>--&gt;</code></pre></li></ol><h3 id="äºŒ-åç«¯"><a class="markdownIt-Anchor" href="#äºŒ-åç«¯"></a> äºŒã€åç«¯</h3><p><strong>å°±æ˜¯å¢åŠ ä¸€ä¸ªæ¥å£ï¼Œä¸€ä¸ªreqï¼Œä¸€ä¸ªrespï¼ˆè¿™ä¸ªrespåœ¨åé¢ç”¨äºå–åˆ°è¯¥ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼‰</strong></p><p><strong>loginæ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> UserLoginResp <span class="hljs-title function_">login</span><span class="hljs-params">(UserLoginReq req)</span> &#123;<br>    <span class="hljs-type">User</span> <span class="hljs-variable">userDb</span> <span class="hljs-operator">=</span> selectUserByName(req.getName());<br>    <span class="hljs-keyword">if</span> (ObjectUtils.isEmpty(userDb)) &#123;<br>        <span class="hljs-comment">//ç”¨æˆ·åä¸å­˜åœ¨</span><br>        LOG.info(<span class="hljs-string">&quot;ç”¨æˆ·åä¸å­˜åœ¨:&#123;&#125;&quot;</span>, req.getName());<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(BusinessExceptionCode.LOGIN_USER_ERROR);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (!userDb.getPassword().equals(req.getPassword())) &#123;<br>        <span class="hljs-comment">//å¯†ç é”™è¯¯</span><br>        LOG.info(<span class="hljs-string">&quot;ç”¨æˆ·:&#123;&#125; å¯†ç é”™è¯¯&quot;</span>, req.getName());<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(BusinessExceptionCode.LOGIN_USER_ERROR);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> CopyUtil.copy(userDb, UserLoginResp.class);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤å¤„çš„æ³¨æ„ç‚¹:</p><ul><li><p>å½“ç”¨æˆ·å‘ç”Ÿå¯†ç æˆ–è€…ç”¨æˆ·åé”™è¯¯çš„æ—¶å€™ï¼ŒServiceæ–¹æ³•ä¸åº”è¯¥ç›´æ¥è¿”å›null</p></li><li><p>è€Œæ˜¯ï¼Œå› è¯¥å»è‡ªå®šä¹‰ä¸€ä¸ª<strong>BusinessException</strong>å¼‚å¸¸</p></li><li></li><li><pre class="highlight"><code class="java"><span class="hljs-keyword">package</span> com.jyx.exception;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BusinessException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RuntimeException</span> </span>&#123;    BusinessExceptionCode code;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BusinessException</span><span class="hljs-params">(String message, BusinessExceptionCode code)</span> </span>&#123;        <span class="hljs-keyword">super</span>(message);        <span class="hljs-keyword">this</span>.code = code;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BusinessException</span><span class="hljs-params">()</span> </span>&#123;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BusinessException</span><span class="hljs-params">(BusinessExceptionCode code)</span> </span>&#123;        <span class="hljs-keyword">super</span>(code.getDesc());        <span class="hljs-keyword">this</span>.code = code;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> BusinessExceptionCode <span class="hljs-title">getCode</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> code;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCode</span><span class="hljs-params">(BusinessExceptionCode code)</span> </span>&#123;        <span class="hljs-keyword">this</span>.code = code;    &#125;    <span class="hljs-comment">/**     * ä¸å†™å…¥å †æ ˆä¿¡æ¯ï¼Œæé«˜æ€§èƒ½     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> Throwable <span class="hljs-title">fillInStackTrace</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;    &#125;&#125;&lt;!--codeï¿¼<span class="hljs-number">41</span>--&gt;</code></pre></li><li><p><strong>ControllerExceptionHandler</strong></p></li><li><pre class="highlight"><code class="java"><span class="hljs-comment">/** * ä¸šåŠ¡å¼‚å¸¸ç»Ÿä¸€å¤„ç† * */</span><span class="hljs-meta">@ExceptionHandler</span>(value = BusinessException<span class="hljs-class">.<span class="hljs-keyword">class</span>)@<span class="hljs-title">ResponseBody</span><span class="hljs-title">public</span> <span class="hljs-title">Result</span>&lt;<span class="hljs-title">Object</span>&gt; <span class="hljs-title">validExceptionHandler</span>(<span class="hljs-title">BusinessException</span> <span class="hljs-title">e</span>) </span>&#123;    LOG.warn(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸ï¼š&#123;&#125;"</span>, e.getCode().getDesc());    <span class="hljs-keyword">return</span> Result.error(Code.BUSINESS_EXCEPTION.getCode(),e.getCode().getDesc());&#125;&lt;!--codeï¿¼<span class="hljs-number">42</span>--&gt;</code></pre></li><li><p>å®šä¹‰ä¸€ä¸ªå…¨å±€çš„å¸¸é‡<code>USER</code>,å®ƒä½œä¸ºsessionStoreä¸­çš„ä¸€ä¸ªå‚¨å­˜userä¿¡æ¯çš„K-Vå¯¹ï¼Œå…¶Keyä¸º USERï¼Œé€šè¿‡sessionStore.get()æ–¹æ³•å¯ä»¥è·å–USERå¯¹åº”çš„Valueï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™stateä¸­<code>user</code>å¯¹åº”çš„value,(æ­¤å¤„ä¹‹æ‰€ä»¥è¦ç»è¿‡è¿™æ ·çš„ä¸€æ¬¡ä¸­è½¬ï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä¾¿äºç»´æŠ¤ï¼Œå…¶ä»–ä½ç½®å¯¹storeçš„æ“ä½œæ›´æ–¹ä¾¿äº›ï¼Œæ‰€ä»¥å®è´¨ä¸Šuserçš„ä¿¡æ¯å› è¯¥æ˜¯å‚¨å­˜åœ¨sessionStoreä¸­ï¼Œåº”è¯¥å’ŒSessioné“ç†ç±»ä¼¼)</p></li><li><p>mutationsä¸­å®šä¹‰çš„æ˜¯å¯¹stateçš„ä¸€äº›æ“ä½œæ–¹æ³•ï¼Œ</p></li><li><p>æ­¤å¤„å‚æ•°ï¼Œstateæ˜¯å¿…è¦çš„ï¼Œuserä¸ºSourceï¼Œtargetä¸ºstateä¸­çš„userçš„valueå’ŒsessionStoreä¸­çš„USERçš„valueã€‚</p></li><li><p>åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œstateæ˜¯ä¸€ä¸ªjsonç±»å‹å¯¹è±¡ï¼Œå…¶ä¸­å®šä¹‰ä¸€ä¸ªuser,å…¶å€¼ä»SessionStore.getæ–¹æ³•åŠ¨æ€è·å–ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š</p></li><li><p>1ï¼Œæœ€å¼€å§‹æœªç™»å½•çš„æ—¶å€™ï¼ŒsessionStoreä¸­USERçš„valueå¹¶æ— å€¼ï¼Œå› ä¸ºåœ¨ä¸‹é¢çš„loginæ–¹æ³•ä¸­æ‰ä¼šè°ƒç”¨**stor.commit(mehtodName,parameters)**æ–¹æ³•å»</p><p><code>state.user = user;</code><br><code>SessionStorage.set(USER,user);</code></p><p>æ‰€ä»¥æ‰æœ‰äº†è¿™ä¸€è¡Œä»£ç çš„ååŠæ®µ<code>user:SessionStorage.get(USER)||&#123;&#125;,</code></p><p>èµ‹ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œé˜²æ­¢null</p></li><li><p>ç™»å½•åçš„åˆ·æ–°é—®é¢˜ï¼Œ</p></li><li><p>åœ¨ç™»é™†åï¼ŒsessionStoreçš„USERå¯¹åº”çš„Valuä¸­å°±å­˜æœ‰userçš„ä¿¡æ¯ï¼Œvalueä¸ºä¸€ä¸ªjsonå¯¹è±¡ï¼Œåœ¨åˆ·æ–°é¡µé¢åï¼Œ<strong>USERä»ç„¶å­˜åœ¨</strong>ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œvueç»„ä»¶é‡æ–°åŠ è½½ï¼Œä»¥ä¸‹ä»£ç </p></li><li><pre class="highlight"><code class="typescript">state: &#123;    user:SessionStorage.get(USER)||&#123;&#125;,  &#125;,&lt;!--codeï¿¼<span class="hljs-number">43</span>--&gt;</code></pre></li><li><p>computed çš„æ–¹å¼ å£°æ˜ useræ˜¯ä¸€ä¸ªå“åº”å¼å˜é‡ï¼Œuserä¼šä»computedä¸­çš„å‡½æ•°çš„è¿”å›å€¼åŠ¨æ€çš„æ›´æ–°æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œuseçš„å€¼çš„å˜åŒ–å–å†³äºï¼Œå‡½æ•°å€¼çš„å˜åŒ–ï¼Œç»“æœçš„åŠŸèƒ½ä¸Šä¸ref()æœ‰ç‚¹åƒï¼Œï¼ˆä¸ªäººç†è§£å°±ç›¸å½“äºæ˜¯store.state.userçš„ä¸€ä¸ª&quot;å½±åˆ†èº«&quot;ï¼‰å¹¶ä¸”è¯¥å˜é‡æœ€åè¦returnå‡ºå»ï¼Œä»¥ä¾¿ç»™åˆ°é¡µé¢ä½¿ç”¨</p></li><li><p>ç™»å½•çš„æ—¶å€™è¦</p></li><li><pre class="highlight"><code class="typescript">axios.post(<span class="hljs-string">'user/login'</span>,loginUser.value).then(<span class="hljs-function">(<span class="hljs-params">response</span>)=&gt;</span>&#123;  loginModalLoading.value = <span class="hljs-literal">false</span>;  <span class="hljs-keyword">const</span> data = response.data;  <span class="hljs-keyword">if</span>(data.code===<span class="hljs-number">1</span>)&#123;    message.success(<span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>);    <span class="hljs-comment">//ç™»å½•æˆåŠŸåå°†dataé‡Œé¢çš„userä¿¡æ¯å­˜åˆ° vuex çš„ user é‡Œé¢</span>    store.commit(<span class="hljs-string">"setUser"</span>,data.data);    loginModalVisible.value = <span class="hljs-literal">false</span>;  &#125;<span class="hljs-keyword">else</span> &#123;   message.error(data.message);  &#125;&#125;)&lt;!--codeï¿¼<span class="hljs-number">44</span>--&gt;</code></pre></li></ul><h1 id="11-é¡¹ç›®å‘å¸ƒ"><a class="markdownIt-Anchor" href="#11-é¡¹ç›®å‘å¸ƒ"></a> 11ã€é¡¹ç›®å‘å¸ƒ</h1><h2 id="00-idea-è¿æ¥äº‘æ•°æ®åº“"><a class="markdownIt-Anchor" href="#00-idea-è¿æ¥äº‘æ•°æ®åº“"></a> 0.0 idea è¿æ¥äº‘æ•°æ®åº“</h2><h2 id="01-idea-è¿æ¥äº‘æœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#01-idea-è¿æ¥äº‘æœåŠ¡å™¨"></a> 0.1 idea è¿æ¥äº‘æœåŠ¡å™¨</h2><h2 id="02-é€šè¿‡ideaå‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶"><a class="markdownIt-Anchor" href="#02-é€šè¿‡ideaå‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶"></a> 0.2 é€šè¿‡ideaå‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶</h2>]]></content>
      
      
      <categories>
          
          <category> spring_boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼_è¯­æ³•å­¦ä¹ _10_(åµŒå…¥æ¡ä»¶)</title>
      <link href="/2022/04/15/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_10_(%E5%B5%8C%E5%85%A5%E6%9D%A1%E4%BB%B6)/"/>
      <url>/2022/04/15/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_10_(%E5%B5%8C%E5%85%A5%E6%9D%A1%E4%BB%B6)/</url>
      
        <content type="html"><![CDATA[<br><h1 id="ä¸€-å›æº¯å¼•ç”¨åˆ¤æ–­"><a class="markdownIt-Anchor" href="#ä¸€-å›æº¯å¼•ç”¨åˆ¤æ–­"></a> ä¸€ã€å›æº¯å¼•ç”¨åˆ¤æ–­</h1><p><strong>åˆ°ç›®å‰ä¸ºæ­¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;?(åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ–è€…è¡¨è¾¾å¼ï¼Œå¦‚æœå­˜åœ¨çš„è¯)&quot;</span><br><span class="hljs-string">&quot;?=(å‘å‰åŒ¹é…ï¼Œå¦‚æœå­˜åœ¨çš„è¯)&quot;</span><br><span class="hljs-string">&quot;?&lt;=ï¼ˆå‘ååŒ¹é…ï¼Œå¦‚æœå­˜åœ¨çš„è¯ï¼‰&quot;</span><br></code></pre></td></tr></table></figure><p><strong>æ¡ä»¶è¯­å¥</strong>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">(?(backreference)<span class="hljs-literal">true</span>-reges)<br></code></pre></td></tr></table></figure><p><strong>ä¾‹ä¸€</strong></p><p><strong>ç›®çš„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;éœ€è¦æŠŠä¸€æ®µæ–‡æœ¬é‡Œçš„&lt;IMG&gt;æ ‡ç­¾å…¨éƒ½æ‰¾å‡ºæ¥ï¼›ä¸ä»…å¦‚æ­¤ï¼Œå¦‚æœæŸä¸ª&lt;IMG&gt;&quot;</span><br><span class="hljs-string">&quot;æ ‡ç­¾æ˜¯ä¸€ä¸ªé“¾æ¥ï¼ˆè¢«æ‹¬åœ¨&lt;A&gt;å’Œ&lt;/A&gt;æ ‡ç­¾ä¹‹é—´ï¼‰çš„è¯ï¼Œä½ è¿˜è¦æŠŠæ•´ä¸ªé“¾&quot;</span><br><span class="hljs-string">&quot;æ¥æ ‡ç­¾åŒ¹é…å‡ºæ¥ã€‚&quot;</span><br></code></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/16/t4EUQvl573uXerO.png" alt="å›æº¯å¼•ç”¨æ¡ä»¶è¯­å¥"></p><p><strong>åˆ†æ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1</span>ï¼Œæ‰€è¦åŒ¹é…çš„æ–‡æœ¬ä¸­ï¼Œ&lt;img&gt;&lt;/img&gt;æ ‡ç­¾æ˜¯æ— è®ºå¦‚ä½•éƒ½è¦æ±‚è¢«åŒ¹é…å‡ºçš„å†…å®¹<br><span class="hljs-number">2</span>ï¼Œ&lt;A&gt;&lt;/A&gt;æ ‡ç­¾åˆ™æˆå¯¹å‡ºç°ï¼Œå½“ä¸”ä»…å½“æœ‰å‰è€…çš„æ—¶å€™ï¼Œåè€…æ‰å¯å‡ºç°<br><span class="hljs-number">3</span>ï¼Œå› æ­¤æ¡ä»¶è¯­å¥çš„<span class="hljs-string">&quot;backreferencr&quot;</span>ä¸º<span class="hljs-string">&quot;(&lt;[Aa]\s+[^&gt;]+\s*)&gt;&quot;</span>,<br>æ­¤<span class="hljs-string">&quot;backreferencr&quot;</span>åŒ¹é…&lt;A&gt;æ ‡ç­¾åŠå…¶å±æ€§ï¼Œ<br>å½“ä¸”ä»…å½“å®ƒæˆåŠŸåŒ¹é…æ—¶ï¼Œå…¶åçš„<span class="hljs-string">&quot;true-regex&quot;</span>å³<span class="hljs-string">&quot;\s*\/[Aa]&gt;&quot;</span>æ‰å›å»åŒ¹é…<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">åˆ¤æ–­<span class="hljs-string">&quot;backference&quot;</span>æ˜¯å¦åŒ¹é…æˆåŠŸçš„ä¾æ®è¡¨è¾¾å¼ï¼ˆä¹Ÿå°±æ˜¯å›æº¯å¼•ç”¨ï¼‰<br>ä»…ä»…æ˜¯æŒ‡ç¬¬å‡ ä¸ªå­è¡¨è¾¾å¼(å°±æ˜¯è¢«æ‹¬å·åŒ…å›´ä½çš„å¼å­)<br></code></pre></td></tr></table></figure><p><strong>(æˆ‘çš„è¯¯åŒº):</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;è®¤ä¸ºç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼å…¶åç´§è·Ÿçš„?ä¹Ÿå±äºåˆ¤æ–­è¡¨è¾¾å¼&quot;</span><br><span class="hljs-string">&quot;ç„¶è€Œäº‹å®ä¸Šè¿™ä¸ª&quot;</span>?<span class="hljs-string">&quot;åªæ˜¯ä¸ºäº†åœ¨ä»»ä½•æƒ…å†µä¸‹&quot;</span><br><span class="hljs-string">&quot;(å³æ— æ‰€è°“&quot;</span>backreference<span class="hljs-string">&quot;æ˜¯å¦æœ‰æˆåŠŸåŒ¹é…)&quot;</span><br><span class="hljs-string">&quot;å®ƒéƒ½ä¼šå»æ‰§è¡Œåé¢&lt;IMG&gt;æ ‡ç­¾çš„åŒ¹é…å·¥ä½œ&quot;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;?(1)æ£€æŸ¥ç¬¬ä¸€ä¸ªå›æº¯å¼•ç”¨æ˜¯å¦å­˜åœ¨ã€‚åœ¨æ¡ä»¶é‡Œï¼Œå›æº¯å¼•ç”¨ç¼–&quot;</span><br><span class="hljs-string">&quot;å·ï¼ˆæœ¬ä¾‹ä¸­çš„1ï¼‰ä¸éœ€è¦è¢«è½¬ä¹‰ã€‚å› æ­¤ï¼Œ?(1)æ˜¯æ­£ç¡®çš„ï¼Œ&quot;</span><br><span class="hljs-string">&quot;?(\1)ä¸æ­£ç¡®ï¼ˆä½†åè€…é€šå¸¸ä¹Ÿèƒ½å·¥ä½œï¼‰ã€‚&quot;</span><br></code></pre></td></tr></table></figure><p><strong>ä¾‹äºŒï¼šâ€œ(?(backer- ference)true-regex|false-regex)â€çš„åº”ç”¨</strong></p><p><strong>ç›®çš„ï¼šåŒ¹é…åŒ—ç¾ç”µè¯å·ç </strong></p><p><strong>background</strong>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">(<span class="hljs-number">123</span>)<span class="hljs-number">456</span>-<span class="hljs-number">7890</span>å’Œ<span class="hljs-number">123</span>-<span class="hljs-number">456</span>-<span class="hljs-number">7890</span>éƒ½æ˜¯å¯æ¥å—çš„åŒ—ç¾ç”µè¯å·ç æ ¼å¼ï¼Œ<br>è€Œ<span class="hljs-number">1234567890</span>ã€(<span class="hljs-number">123</span>)-<span class="hljs-number">456</span>-<span class="hljs-number">7890</span>å’Œ(<span class="hljs-number">123</span>-<span class="hljs-number">456</span>-<span class="hljs-number">7890</span>)è™½ç„¶éƒ½åŒ…å«ç€æ•°<br>ç›®æ­£ç¡®çš„æ•°å­—å­—ç¬¦ï¼Œä½†å®ƒä»¬çš„æ ¼å¼éƒ½ä¸å¯¹ã€‚å¦‚æœè®©ä½ æ¥ç¼–å†™ä¸€ä¸ªæ­£åˆ™è¡¨<br>è¾¾å¼å¹¶è®©å®ƒåªåŒ¹é…å¯æ¥å—çš„æ ¼å¼ï¼Œä¸åŒ¹é…å…¶ä»–æ ¼å¼ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ<br></code></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/16/acOnfoUDhqsg8Hx.png" alt="ture-regex_and_flase-regex"></p><p><strong>åˆ†æ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;åœ¨æ­¤ä¾‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸åŒæƒ…å†µçš„ç¬¦å·ç»„åˆä¸º:&quot;</span><br><span class="hljs-string">&quot;1,æœ‰&quot;</span>(<span class="hljs-string">&quot;çš„æ—¶å€™ï¼Œåˆ™å¿…æœ‰&quot;</span>)<span class="hljs-string">&quot;,å¹¶ä¸”æ­¤æ—¶æ²¡æœ‰&quot;</span>-<span class="hljs-string">&quot; &quot;</span><br><span class="hljs-string">&quot;2,æ²¡æœ‰&quot;</span>(<span class="hljs-string">&quot;çš„æ—¶å€™ï¼Œåˆ™å¿…æœ‰&quot;</span>-<span class="hljs-string">&quot;,å¹¶ä¸”æ­¤æ—¶æ²¡æœ‰&quot;</span>)<span class="hljs-string">&quot; &quot;</span><br><span class="hljs-string">&quot;å› æ­¤è¢«åˆ¤æ–­çš„å›æº¯å¼•ç”¨ä¸º:(\())&quot;</span><br></code></pre></td></tr></table></figure><h2 id="äºŒ-å‰åæŸ¥æ‰¾æ¡ä»¶"><a class="markdownIt-Anchor" href="#äºŒ-å‰åæŸ¥æ‰¾æ¡ä»¶"></a> äºŒã€å‰åæŸ¥æ‰¾æ¡ä»¶</h2><p><strong>ç›®çš„ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¯·ä½ æ€è€ƒä¸€ä¸‹æ€æ ·åŒ¹é…ç¾å›½çš„é‚®æ”¿ç¼–ç ï¼ˆç®€ç§°ZIPç¼–<br>ç ï¼‰ã€‚ç¾å›½é‚®æ”¿ç¼–ç æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯<span class="hljs-number">12345</span>å½¢å¼çš„ZIPæ ¼å¼ï¼Œå¦ä¸€<br>ç§æ˜¯<span class="hljs-number">12345</span>-<span class="hljs-number">6789</span>å½¢å¼çš„ZIP+<span class="hljs-number">4</span>æ ¼å¼ã€‚åªæœ‰ZIP+<span class="hljs-number">4</span>æ ¼å¼æ‰å¿…é¡»ä½¿ç”¨è¿å­—ç¬¦<br>æ¥åˆ†éš”å‰<span class="hljs-number">5</span>ä½å’Œå<span class="hljs-number">4</span>ä½æ•°å­—ã€‚<br></code></pre></td></tr></table></figure><p><strong>åˆ†æ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;æ­¤ä¾‹ä¸­ï¼Œå‰äº”ä½æ•°å­—æ˜¯å¿…é¡»çš„ï¼Œ&quot;</span><br><span class="hljs-string">&quot;å½“ä¸”ä»…å½“äº”ä½æ•°å­—å…¶åç´§è·Ÿç€&quot;</span>-<span class="hljs-string">&quot;çš„æ—¶å€™ï¼Œ&quot;</span>-<span class="hljs-string">&quot;çš„åé¢æ‰ä¼šæœ‰å¦å¤–çš„å››ä½æ•°å­—&quot;</span><br><span class="hljs-string">&quot;å› æ­¤ï¼Œå˜åŒ–çš„å› ç´ ä»…ä»…æ˜¯&quot;</span>-\d&#123;<span class="hljs-number">4</span>&#125;<span class="hljs-string">&quot;,æˆ–è€…è¯´ï¼Œåªæœ‰åœ¨&quot;</span>-<span class="hljs-string">&quot;ä¹‹å‰å­˜åœ¨åˆæ³•çš„å†…å®¹æ—¶&quot;</span><br><span class="hljs-string">&quot;æ‰ä¼šå»åŒ¹é…å…¶åçš„å†…å®¹&quot;</span><br></code></pre></td></tr></table></figure><p><strong>ä¾‹ä¸€</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/16/UFrvkHYXPeiLwoM.png" alt="å‰åæŸ¥æ‰¾æ¡ä»¶"></p><p><strong>æ€è€ƒ(å›æº¯å¼•ç”¨æ¡ä»¶ä¸å‰åæŸ¥æ‰¾æ¡ä»¶çš„ç‰¹ç‚¹)</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;1,å›æº¯å¼•ç”¨æ¡ä»¶æ›´é€‚åˆå»åˆ¤æ–­æ›´ä¸ºå…·ä½“çš„å†…å®¹å¯¹æ–‡æœ¬çš„å½±å“ï¼Œå› ä¸ºå…¶è‡ªèº«çš„è¡¨è¾¾å¼å°±æ˜¯å…·ä½“çš„åŒ¹é…å­—å¥&quot;</span><br><span class="hljs-string">&quot;2,è€Œå‰åæŸ¥æ‰¾æ¡ä»¶æ›´é€‚åˆå»åˆ¤æ–­æŸå‡ ä¸ªç‰¹æ®Šå­—ç¬¦çš„ä½ç½®ï¼Œä»¥åŠå­˜åœ¨ä¸å¦å¯¹æ•´ä¸ªæ–‡æœ¬å†…å®¹çš„å½±å“&quot;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">å‰åæŸ¥æ‰¾æ¡ä»¶åªåœ¨ä¸€ä¸ªå‘å‰æŸ¥æ‰¾æˆ–å‘åæŸ¥æ‰¾æ“ä½œå–å¾—æˆåŠŸçš„æƒ…å†µä¸‹æ‰å…<br>è®¸ä¸€ä¸ªè¡¨è¾¾å¼è¢«ä½¿ç”¨ã€‚å®šä¹‰ä¸€ä¸ªå‰åæŸ¥æ‰¾æ¡ä»¶çš„è¯­æ³•ä¸å®šä¹‰ä¸€ä¸ªå›æº¯å¼•<br>ç”¨æ¡ä»¶çš„è¯­æ³•å¤§åŒå°å¼‚â€”â€”åªéœ€æŠŠå›æº¯å¼•ç”¨ï¼ˆæ‹¬å·é‡Œçš„å›æº¯å¼•ç”¨ç¼–å·ï¼‰<br>æ›¿æ¢ä¸ºä¸€ä¸ªå®Œæ•´çš„å‰åæŸ¥æ‰¾è¡¨è¾¾å¼å°±è¡Œäº†<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼_è¯­æ³•å­¦ä¹ _9(å‰åæŸ¥æ‰¾)</title>
      <link href="/2022/04/14/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_9(%E5%89%8D%E5%90%8E%E6%9F%A5%E6%89%BE)/"/>
      <url>/2022/04/14/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_9(%E5%89%8D%E5%90%8E%E6%9F%A5%E6%89%BE)/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸€</strong>ã€<strong>å‘å‰æŸ¥æ‰¾</strong></p><p><strong>æ¦‚è¿°</strong>ï¼š<strong>å‘å‰æŸ¥æ‰¾å°±æ˜¯æŒ‡å®šäº†ä¸€ä¸ªå¿…é¡»åŒ¹é…ä½†ä¸åœ¨ç»“æœä¸­è¿”å›çš„æ¨¡å¼</strong></p><p><strong>è¯­æ³•å½¢å¼</strong>ï¼š<strong>å…¶å®å°±æ˜¯ä¸€ä¸ªä»¥</strong><code>?=</code> <strong>å¼€å¤´çš„å­è¡¨è¾¾å¼ï¼Œéœ€è¦è¢«åŒ¹é…çš„æ–‡æœ¬è·Ÿåœ¨&quot;?&quot;ä¹‹å</strong></p><p><strong>æç¤º</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">æç¤º æœ‰äº›æ­£åˆ™è¡¨è¾¾å¼æ–‡æ¡£ä½¿ç”¨æœ¯è¯­â€œæ¶ˆè´¹â€ï¼ˆconsumeï¼‰æ¥è¡¨è¿°â€œåŒ¹é…<br>å’Œè¿”å›æ–‡æœ¬â€çš„å«ä¹‰ã€‚åœ¨å‘å‰æŸ¥æ‰¾é‡Œï¼Œè¢«åŒ¹é…çš„æ–‡æœ¬ä¸åŒ…å«åœ¨æœ€ç»ˆè¿”<br>å›çš„åŒ¹é…ç»“æœé‡Œï¼Œè¿™è¢«ç§°ä¸ºâ€œä¸æ¶ˆè´¹â€ã€‚<br></code></pre></td></tr></table></figure><p><strong>ä¾‹å­</strong>ï¼š</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/15/6EozZUQ1bnW2i5M.png" alt="å‘å‰æŸ¥æ‰¾"></p><p><strong>åˆ†æ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-string">&quot;.+&quot;</span>åŒ¹é…è‡³å°‘ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™å¯¹åº”ç€URLçš„åè®®åï¼Œæ˜¾ç„¶æˆ‘ä»¬ä¹Ÿåªéœ€è¦åè®®åï¼Œ<br>å¹¶ä¸éœ€è¦å†å¾€åçš„å†…å®¹ï¼Œä¹Ÿæ˜¯è¯´è¯´æˆ‘ä»¬åªè¦æ¶ˆè´¹åè®®åï¼Œå› æ­¤<br>æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‘å‰æŸ¥æ‰¾ï¼Œ<span class="hljs-string">&quot;?=:&quot;</span>åŒ¹é…åˆ°<span class="hljs-string">&quot;:&quot;</span>ï¼Œä½†æ˜¯<br>å¹¶ä¸æ¶ˆè´¹<span class="hljs-string">&quot;:&quot;</span>ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¿”å›åŒ¹é…åˆ°çš„ç»“æœï¼Œ<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">å‘å‰æŸ¥æ‰¾ï¼ˆå’Œå…ˆåæŸ¥æ‰¾ï¼‰åŒ¹é…å…¶å®æœ¬èº«æ˜¯æœ‰è¿”å›ç»“æœçš„ï¼Œ<br>åªä¸è¿‡ï¼Œ<br>è¿™ä¸ªç»“æœçš„è¿”å›é•¿åº¦æ°¸è¿œæ˜¯<span class="hljs-number">0</span>è€Œå·²ï¼Œ<br>å› æ­¤ï¼Œå‰åæŸ¥æ‰¾æ¨¡å¼æœ‰æ—¶ä¹Ÿè¢«å«åšï¼Œ<br>é›¶å®½åº¦ï¼ˆzero-widthï¼‰åŒ¹é…æ“ä½œ<br></code></pre></td></tr></table></figure><p><strong>äºŒ</strong>ã€<strong>å‘åæŸ¥æ‰¾</strong></p><p><strong>è¯­æ³•</strong>ï¼š <code>(?&lt;=)</code></p><p><strong>ä¾‹å­</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/15/4zih6n78sWuaSOy.png" alt="å‘åæŸ¥æ‰¾"></p><p><strong>å‘å‰æŸ¥æ‰¾å’Œå‘åæŸ¥æ‰¾çš„ç»“åˆ</strong></p><p><strong>ç›´æ¥ä¸Šä¾‹å­</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/15/a1WvcZGqJXBKM4r.png" alt="å‘å‰æŸ¥æ‰¾å’Œå‘åæŸ¥æ‰¾çš„ç»“åˆ"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">é—®é¢˜è§£å†³äº†ã€‚(?&lt;=&lt;[tT][iI][tT][lL][eE]&gt;)æ˜¯ä¸€ä¸ªå‘åæŸ¥æ‰¾æ“ä½œï¼Œ<br>å®ƒåŒ¹é…ï¼ˆä½†ä¸æ¶ˆè´¹ï¼‰&lt;TITLE&gt;ï¼›è€Œ(?=&lt;/[tT][iI][tT][lL][eE]&gt;)æ˜¯<br>ä¸€ä¸ªå‘å‰æŸ¥æ‰¾æ“ä½œï¼Œå®ƒåŒ¹é…ï¼ˆä½†ä¸æ¶ˆè´¹ï¼‰&lt;/TITLE&gt;ã€‚æœ€ç»ˆè¿”å›çš„åŒ¹é…<br>ç»“æœåŒ…å«ä¸”ä»…åŒ…å«æ ‡é¢˜æ–‡å­—ï¼ˆç”¨æœ¯è¯­æ¥è¯´ï¼Œå°±æ˜¯åªæœ‰æ ‡é¢˜æ–‡å­—è¢«æ¶ˆè´¹<br>äº†ï¼‰ã€‚<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼_è¯­æ³•å­¦ä¹ _7(ä½¿ç”¨å­è¡¨è¾¾å¼-å›æº¯å¼•ç”¨)</title>
      <link href="/2022/04/13/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_7(%E4%BD%BF%E7%94%A8%E5%AD%90%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%9B%9E%E6%BA%AF%E5%BC%95%E7%94%A8)/"/>
      <url>/2022/04/13/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_7(%E4%BD%BF%E7%94%A8%E5%AD%90%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%9B%9E%E6%BA%AF%E5%BC%95%E7%94%A8)/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸€ã€</strong> <strong>å›æº¯å¼•ç”¨åŒ¹é…</strong></p><p><strong>åŠŸèƒ½</strong>ï¼š<code>\n</code>  <strong>å³ä»£è¡¨ç€ç¬¬nä¸ªå­è¡¨è¾¾å¼æ‰€åŒ¹é…çš„å†…å®¹</strong></p><p><strong>ä¾‹ä¸€</strong>ï¼š</p><p><strong>ç›®çš„</strong>ï¼š**åŒ¹é…å‡ºHTMLä¸­æˆå¯¹å‡ºç°çš„æ ‡é¢˜æ ‡ç­¾ï¼ˆ<H1>åˆ°<H6>ï¼Œä»¥åŠé…å¯¹çš„                                        å¦‚ä¸‹å›¾</H6></H1></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/15/LgetudVsD5olpFE.png" alt="\1"></p><p><strong>åˆ†æ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">ç¬¬ä¸€ä¸ªå­—å¥ï¼š<span class="hljs-string">&quot;([1-9])&quot;</span>åŒ¹é…çš„æ˜¯è¿™ä¸€ç»„æ ‡é¢˜æ ‡ç­¾çš„æ•°å­—éƒ¨åˆ†ï¼Œè€Œæœ€åçš„<br><span class="hljs-string">&quot;\1&quot;</span>æ­£ä»£è¡¨ç€ç›¸åŒçš„æ•°å­—å†…å®¹ï¼Œæ‰€ä»¥åªæœ‰ç¬¬ä¸€ä¸ªï¼ˆå³ç¬¬äºŒè¡Œè¢«æˆåŠŸåŒ¹é…ï¼‰<br>å…¶ä½™ä¸¤å¯¹æ ‡ç­¾åˆ™å› ä¸ºå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ•°å­—ä¸ç›¸ç­‰è€Œä¸è¢«åŒ¹é…<br>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œ<br>å›æº¯å¼•ç”¨æŒ‡çš„æ˜¯æ¨¡å¼çš„ååŠéƒ¨åˆ†å»å¼•ç”¨åœ¨å‰åŠéƒ¨åˆ†ä¸­å®šä¹‰çš„å­è¡¨è¾¾å¼<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">å›æº¯å¼•ç”¨åŒ¹é…é€šå¸¸ä»<span class="hljs-number">1</span>å¼€å§‹è®¡æ•°ï¼ˆ\<span class="hljs-number">1</span>ã€\<span class="hljs-number">2</span>ï¼Œç­‰ç­‰ï¼‰ã€‚åœ¨è®¸å¤šå®<br>ç°é‡Œï¼Œç¬¬<span class="hljs-number">0</span>ä¸ªåŒ¹é…ï¼ˆ\<span class="hljs-number">0</span>ï¼‰å¯ä»¥ç”¨æ¥ä»£è¡¨æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚<br></code></pre></td></tr></table></figure><p><strong>äºŒ</strong>ï¼š<strong>å›æº¯å¼•ç”¨åœ¨æ›¿æ¢æ“ä½œä¸Šçš„åº”ç”¨</strong></p><p><strong>ç›®çš„</strong>ï¼š<strong>å°†æ–‡æœ¬ä¸­çš„é‚®ä»¶åœ°å€æ›´æ”¹ä¸ºå¯ç‚¹å‡»é“¾æ¥</strong></p><p><strong>ä½¿ç”¨</strong>ï¼š<code>$n</code></p><br><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/15/nG8RF7gwqfAQJcU.png" alt="$1"></p><p><strong>åˆ†æ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">ç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼åŒ¹é…å‡ºäº†ä¸€ä¸ªç”µå­é‚®ç®±åœ°å€ï¼Œ<br>$<span class="hljs-number">1</span>ä¾¿ä»£è¡¨ç€é‚£ç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼åŒ¹é…å‡ºçš„å†…å®¹<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼_è¯­æ³•å­¦ä¹ _6ï¼ˆä½ç½®åŒ¹é…ï¼‰</title>
      <link href="/2022/04/12/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_6%EF%BC%88%E4%BD%8D%E7%BD%AE%E5%8C%B9%E9%85%8D%EF%BC%89/"/>
      <url>/2022/04/12/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_6%EF%BC%88%E4%BD%8D%E7%BD%AE%E5%8C%B9%E9%85%8D%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸€</strong>ã€<strong>å•è¯è¾¹ç•Œ</strong></p><p><strong>ç›®çš„</strong>ï¼š** åŒ¹é…å•ä¸ªå•è¯**</p><p><strong>ä½¿ç”¨å…ƒå­—ç¬¦</strong>ï¼š<code>\b</code></p><p><strong>ä½œç”¨</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">\båˆ°åº•åŒ¹é…ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿæ­£åˆ™è¡¨è¾¾å¼å¼•æ“ä¸æ‡‚è‹±è¯­ï¼ˆäº‹å®<br>ä¸Šï¼Œå®ƒä¸æ‡‚ä»»ä½•äººç±»è¯­è¨€ï¼‰ï¼Œä¹Ÿä¸çŸ¥é“ä»€ä¹ˆæ˜¯å•è¯è¾¹ç•Œã€‚ç®€å•åœ°<br>è¯´ï¼Œ\båŒ¹é…çš„æ˜¯ä¸€ä¸ªè¿™æ ·çš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä½äºä¸€ä¸ªèƒ½å¤Ÿç”¨æ¥æ„æˆå•<br>è¯çš„å­—ç¬¦ï¼ˆå­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œä¹Ÿå°±æ˜¯ä¸\wç›¸åŒ¹é…çš„å­—ç¬¦ï¼‰å’Œä¸€ä¸ª<br>ä¸èƒ½ç”¨æ¥æ„æˆå•è¯çš„å­—ç¬¦ï¼ˆä¹Ÿå°±æ˜¯ä¸\Wç›¸åŒ¹é…çš„å­—ç¬¦ï¼‰ä¹‹é—´ã€‚<br></code></pre></td></tr></table></figure><p><strong>ä¾‹ä¸€</strong></p><p><strong>æ²¡æœ‰ä½¿ç”¨</strong>ï¼š<code>\b</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/14/OISMCdmZxwn3PEl.png" alt="æ²¡æœ‰ä½¿ç”¨\b"></p><p><strong>ä½¿ç”¨ä¹‹å</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/14/ICVM8cjKEvz4tFu.png" alt="ä½¿ç”¨äº†\b"></p><p><strong>äºŒã€å­—ç¬¦ä¸²è¾¹ç•Œ</strong></p><p><strong>ç›®çš„</strong>ï¼š<strong>å¯¹æ‰€è¦åŒ¹é…çš„å­—ç¬¦ä¸²ï¼ˆåœ¨ä¸€è¡Œçš„ï¼‰çš„å¼€å¤´å’Œï¼ˆä¸€è¡Œçš„ï¼‰ç»“å°¾åšå‡ºé™åˆ¶</strong></p><p><strong>ä½¿ç”¨å…ƒå­—ç¬¦</strong>ï¼š<code>^</code>  å’Œ<code>$</code></p><p><strong>ç›´æ¥ä¸Šä¾‹å­</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/14/a6dlBJMNsEDKPOX.png" alt="æ²¡æœ‰ä½¿ç”¨^or$å¹¶ä¸”æ²¡æœ‰åŠ &quot;?&quot;"></p><br><p><strong>ä»”ç»†åˆ†æ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">é¦–å…ˆï¼Œ<span class="hljs-string">&quot;&lt;&quot;</span>åŒ¹é…ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œéšä¾¿åçš„è½¬ç§»ä¹‹åçš„<span class="hljs-string">&quot;?&quot;</span>åŒ¹é…ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œxmlç±»ä¼¼ï¼Œ<br>é‡ç‚¹ï¼š<br><span class="hljs-string">&quot;.*&quot;</span>å°†åŒ¹é…é›¶ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ï¼Œè€Œè¿™é‡Œæ³¨æ„ï¼Œ<span class="hljs-string">&quot;.&quot;</span>æ˜¯ä¸€ä¸ªè´ªå©ªè¡Œå­—ç¬¦ï¼Œ<br>å¦‚æœå…¶åä¸åŠ <span class="hljs-string">&quot;?&quot;</span>è¿›è¡Œä¿®é¥°ä¸º<span class="hljs-string">&quot;æ‡’æƒ°å‹å­—ç¬¦&quot;</span>,é‚£ä¹ˆä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„åæœï¼Œ<br>                          ä¸Šå›¾ä¸­<br>è¿™ç»ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œä¸‹å›¾ä¸­çš„ç¬¬ä¸‰è¡Œ<span class="hljs-string">&quot;çœ‹ä¼¼æ²¡æœ‰é—®é¢˜&quot;</span>ï¼Œ<br>å¦‚è‹¥è‡ªå·±çœ‹å°±ä¼šå‘ç°ï¼Œ<br><span class="hljs-number">1.</span>åœ¨è¿™ä¸€è¡Œæœ€åçš„<span class="hljs-string">&quot;   and?&gt;&quot;</span>ç«Ÿç„¶ä¹Ÿè¢«åŒ¹é…äº†è¿›å»ï¼ï¼<br><span class="hljs-number">2.</span>ç±»ä¼¼çš„é”™è¯¯åŒæ ·å‡ºç°åœ¨å€’æ•°ç¬¬ä¸‰è¡Œã€‚<br><br>è¿™å°±å°è¯äº†<span class="hljs-string">&quot;.&quot;</span>è¿™ä¸€è´ªå©ªå‹å­—ç¬¦å®ƒé¥•é¤®èˆ¬çš„è¡Œå¾„ï¼ˆ<br>æ³¨æ„ï¼šæ­¤å¤„æ­£å¯¹åº”ç€ç¬¬äº”ç« æœ€åä¸€éƒ¨åˆ†çš„å°çŸ¥è¯†ï¼‰<br><br>å¦‚ä½•è§£å†³ï¼ŸåŠ ä¸Š<span class="hljs-string">&quot;?&quot;</span>!<br></code></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/14/ilr5uMFa2bCoXe4.png" alt="åŠ ä¸Šäº†&quot;?&quot;"></p><p><strong>ä½†æ˜¯</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">é—®é¢˜å¹¶æ²¡æœ‰å¾—åˆ°å®Œç¾è§£å†³ï¼Œå°½ç®¡æˆ‘ä»¬åŒ¹é…å‡ºäº†æ‰€æœ‰çš„ç›®æ ‡ï¼Œ<br>ä½†æ˜¯æˆ‘ä»¬è¿˜è¦æ±‚æ‰€åŒ¹é…çš„å­—æ®µæ˜¯ï¼š åœ¨ä¸€è¡Œçš„å¼€å¤´<br>ä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸‰ã€äº”ã€å…­ä¸ªåŒ¹é…æ˜¯æœ¬ä¸è¯¥è¢«åŒ¹é…çš„<br>å³ï¼šæˆ‘ä»¬è¦å¯¹æ¨¡å¼å­—ç¬¦ä¸²çš„ä¸€è¡Œå¼€å¤´åšå‡ºé™åˆ¶<br></code></pre></td></tr></table></figure><p><strong>è€Œè¿™æ­£æ˜¯&quot;^&quot;å…ƒå­—ç¬¦å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™</strong></p><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">è¿˜è®°å¾—å—ï¼Ÿæˆ‘ä»¬åœ¨ç¬¬<span class="hljs-number">3</span>ç« é‡Œå·²ç»è§è¯†è¿‡å…ƒå­—ç¬¦^äº†ï¼Œä½†é‚£æ—¶çš„<br>å®ƒæ˜¯ä¸€ä¸ªç”¨æ¥å¯¹å­—ç¬¦é›†åˆè¿›è¡Œâ€œæ±‚éâ€æ“ä½œçš„å…ƒå­—ç¬¦ã€‚é‚£å®ƒè¿˜æ€ä¹ˆç”¨æ¥<br>è¡¨æ˜ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´å‘¢ï¼Ÿ<br>^æ˜¯å‡ ä¸ªæœ‰ç€å¤šç§ç”¨é€”çš„å…ƒå­—ç¬¦ä¹‹ä¸€ã€‚åªæœ‰å½“å®ƒå‡ºç°åœ¨ä¸€ä¸ªå­—ç¬¦é›†åˆ<br>é‡Œï¼ˆè¢«æ”¾åœ¨[å’Œ]ä¹‹é—´ï¼‰å¹¶ç´§è·Ÿåœ¨å·¦æ–¹æ‹¬å·[çš„åé¢æ—¶ï¼Œå®ƒæ‰èƒ½å‘æŒ¥â€œæ±‚<br>éâ€ä½œç”¨ã€‚å¦‚æœæ˜¯åœ¨ä¸€ä¸ªå­—ç¬¦é›†åˆçš„å¤–é¢å¹¶ä½äºä¸€ä¸ªæ¨¡å¼çš„å¼€å¤´ï¼Œ^å°†<br>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚<br></code></pre></td></tr></table></figure><p><strong>åŠ ä¸Š&quot;^&quot;åæ•ˆæœå¦‚ä¸‹å›¾</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/14/UvqrNjgGa4teT2P.png" alt="åŠ ä¸Š&quot;^&quot;"></p><p><strong>æ³¨æ„</strong>ï¼š</p><p><strong>è¿™é‡Œé€šå¸¸å†™æˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">^\s*xml\?.*?\?&gt;<br></code></pre></td></tr></table></figure><p><strong>ç±»ä¼¼çš„å…ƒå­—ç¬¦&quot;$&quot;ç”¨æ¥ä¿®é¥°å­—ç¬¦ä¸²çš„æœ«å°¾å¤„</strong></p><p><strong>ç›®çš„</strong>ï¼š <strong>æ ‡ç­¾çš„åé¢ä¸åº”è¯¥å†æœ‰ä»»ä½•å®é™…å†…å®¹</strong></p><p><strong>ä¾‹å­</strong>ï¼š</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/14/L32WB5FjqthrINV.png" alt="ä½¿ç”¨&quot;$&quot;"></p><br><p><strong>å°ç»“</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">æ­£åˆ™è¡¨è¾¾å¼ä¸ä»…å¯ä»¥ç”¨æ¥åŒ¹é…ä»»æ„é•¿åº¦çš„æ–‡æœ¬å—ï¼Œè¿˜å¯ä»¥ç”¨æ¥åŒ¹é…å‡ºç°<br>åœ¨å­—ç¬¦ä¸²ä¸­ç‰¹å®šä½ç½®çš„æ–‡æœ¬ã€‚\bç”¨æ¥æŒ‡å®šä¸€ä¸ªå•è¯è¾¹ç•Œï¼ˆ\Båˆšå¥½ç›¸<br>åï¼‰ã€‚^å’Œ$ç”¨æ¥æŒ‡å®šå­—ç¬¦ä¸²è¾¹ç•Œï¼ˆå­—ç¬¦ä¸²çš„å¼€å¤´å’Œå­—ç¬¦ä¸²çš„ç»“æŸï¼‰ã€‚<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼_è¯­æ³•å­¦ä¹ _5</title>
      <link href="/2022/04/11/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_5-/"/>
      <url>/2022/04/11/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_5-/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ‰å¤šå°‘ä¸ªåŒ¹é…"><a class="markdownIt-Anchor" href="#æœ‰å¤šå°‘ä¸ªåŒ¹é…"></a> æœ‰å¤šå°‘ä¸ªåŒ¹é…</h1><p><strong>ä¸€</strong>  ã€<strong>åŒ¹é…ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦</strong></p><p><strong>ä¾‹ä¸€</strong></p><p><strong>ç›®çš„</strong> ï¼šåŒ¹é…æ–‡æœ¬ä¸­çš„é‚®ç®±åœ°å€</p><p>**ä½¿ç”¨å…ƒå­—ç¬¦<code>+</code> **</p><p><strong>ç”¨æ³•</strong> ï¼š</p><p>åœ¨å­—ç¬¦æˆ–è€…å­—ç¬¦é›†åé¢ç®€å•çš„åŠ ä¸Šä¸€ä¸ªâ€œ+â€œï¼Œåˆ™å¯åŒ¹é… <strong>è‡³å°‘ä¸€ä¸ª</strong>ç¬¦åˆè¯¥å­—ç¬¦æ¨¡å¼çš„å­—ç¬¦</p><p>æ­£åˆ™è¡¨è¾¾å¼ ï¼š<code>[\w.]+@[\w.]+\.\w+</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/lcUiBe5tfsrD2dY.png" alt="ä½¿ç”¨å…ƒå­—ç¬¦+"></p><p><strong>æ³¨æ„</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">æ³¨æ„ ç»†å¿ƒçš„è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼šæˆ‘ä»¬æ²¡æœ‰å¯¹å­—ç¬¦é›†åˆ[\w.]é‡Œ<br>çš„.å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒè¿˜æ˜¯æŠŠåŸå§‹æ–‡æœ¬é‡Œçš„.å­—ç¬¦åŒ¹é…å‡ºæ¥<br>äº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå½“åœ¨å­—ç¬¦é›†åˆé‡Œä½¿ç”¨çš„æ—¶å€™ï¼Œåƒ.å’Œ+è¿™æ ·çš„å…ƒå­—ç¬¦å°†<br>è¢«è§£é‡Šä¸ºæ™®é€šå­—ç¬¦ï¼Œä¸éœ€è¦è¢«è½¬ä¹‰â€”â€”ä½†è½¬ä¹‰äº†ä¹Ÿæ²¡æœ‰åå¤„ã€‚[\w.]<br>çš„ä½¿ç”¨æ•ˆæœä¸[\w\ .]æ˜¯ä¸€æ ·çš„ã€‚<br></code></pre></td></tr></table></figure><p><strong>äºŒ</strong> ã€ <strong>åŒ¹é…é›¶ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦</strong></p><p><strong>ä¾‹äºŒ</strong></p><p><strong>ç›®çš„</strong> ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">åŒ¹é…å‡ºåˆæ³•çš„é‚®ç®±åœ°å€ï¼ˆé‚®ç®±åœ°å€å¼€å¤´ä¸èƒ½ä»¥`.` å¼€å¤´ï¼Œ<br>æ‰€ä»¥æˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼éœ€è¦ å¯ä»¥å»åŒ¹é…å‡ºç¬¬ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—ï¼Œ<br>åŒæ—¶â€@â€œå‰é¢ä¹Ÿå¯ä»¥åªæœ‰é‚£**ä¸€ä¸ª**åˆæ³•å­—ç¬¦ï¼Œè€Œä¸éœ€è¦å†å‡ºç° å¤šä¸ªå­—æ¯æ•°å­—ï¼Œ<br>ä¹Ÿå°±æ˜¯**ç¬¬ä¸€ä¸ª**åˆæ³•å­—ç¬¦ä¹‹åçš„ **å­—ç¬¦**æ˜¯å¯ï¼ˆ**å¤š**ï¼‰æœ‰å¯**æ— **çš„ï¼‰<br><br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å…ƒå­—ç¬¦</strong>:<code>*</code></p><p><strong>ç”¨æ³•ä¸<code>+</code>ä¸€è‡´</strong></p><p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼š <code>\w[\w.]*@[\w.]+\.[\w]+</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/q9cBiXYts6GhTdP.png" alt="ä½¿ç”¨å…ƒå­—ç¬¦*"></p><br><p><strong>ä¸‰</strong> ï¼š <strong>åŒ¹é…é›¶ä¸ªæˆ–è€…ä¸€ä¸ªå­—ç¬¦</strong></p><p><strong>ç›®çš„</strong> ï¼š <strong>åŒ¹é…httpsæˆ–è€…http</strong></p><p><strong>ä½¿ç”¨å…ƒå­—ç¬¦</strong>ï¼š <code>?</code></p><p><code>?</code>å°†åŒ¹é…<strong>ä¸€ä¸ªæˆ–é›¶ä¸ªå­—ç¬¦</strong>æˆ–è€…<strong>å­—ç¬¦é›†ä¸€æ¬¡æˆ–é›¶æ¬¡</strong></p><br><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/ebfvxatJgZo6SY8.png" alt="ä½¿ç”¨å…ƒå­—ç¬¦ï¼Ÿ"></p><p><strong>ä¾‹ä¸‰</strong></p><p><strong>ç›®çš„</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ä»”ç»†ä½“ä¼š?ä¸+å’Œ*çš„ç›¸ä¼¼å’ŒåŒºåˆ«<br>ä¹‹å¤„ã€‚å¦‚æœéœ€è¦åœ¨ä¸€æ®µæ–‡æœ¬é‡ŒåŒ¹é…æŸä¸ªç‰¹å®šçš„å­—ç¬¦ï¼ˆæˆ–å­—ç¬¦é›†åˆï¼‰è€Œè¯¥<br>å­—ç¬¦å¯èƒ½å‡ºç°ã€ä¹Ÿå¯èƒ½ä¸å‡ºç°ï¼Œ?æ— ç–‘æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚<br></code></pre></td></tr></table></figure><p><strong>ä¾‹å››</strong> ï¼š<strong>åŒ¹é…æŒ‡å®šæ¬¡æ•°</strong></p><p><strong>ç›®çš„</strong> åŒ¹é…æ—¥æœŸæ ¼å¼</p><p><strong>ä½¿ç”¨å…ƒå­—ç¬¦</strong> ï¼š <code>&#123;&#125;</code></p><p><strong>ç”¨æ³•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">&#123;&#125;é‡Œé¢å¤©çš„æ•°å­—ä¸ºæ‰€æŒ‡å®šçš„åŒ¹é…æ¬¡æ•°<br>æˆ–è€…<br>æ•°å­—åŒºé—´&#123;x1ï¼Œx2&#125;ï¼ˆå³æœ€å°‘x1æ¬¡ï¼Œæœ€å¤šx2æ¬¡ï¼‰<br><br></code></pre></td></tr></table></figure><p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼š<code>\d&#123;1,2&#125;[/-]\d&#123;1,2&#125;[-/]\d&#123;0,4&#125;</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/NwKBYpiEIhgulCv.png" alt="ä½¿ç”¨å…ƒå­—ç¬¦{}"></p><br><br><p><strong>ç»¼åˆä¾‹äº”</strong></p><p><strong>ç›®çš„</strong>ï¼š <strong>ä½¿ç”¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æŠŠæ‰€æœ‰å¤§äºæˆ–ç­‰äº$100ç¾å…ƒçš„é‡‘é¢æ‰¾å‡ºæ¥</strong></p><p><strong>ä½¿ç”¨</strong>ï¼š <code>&#123;x,&#125;</code></p><p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼š <code>\d+: \d&#123;3,&#125;\.\d&#123;2&#125;</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/VzWmNXpZDik2CUv.png" alt="ä½¿ç”¨{x,}"></p><br><p><strong>ä¾‹å…­</strong></p><p><strong>ç›®çš„</strong>ï¼š<strong>é˜²æ­¢è¿‡åº¦åŒ¹é…</strong></p><p><strong>å‚è€ƒè¡¨æ ¼</strong></p><table><thead><tr><th>è´ªå©ªå‹å…ƒå­—ç¬¦</th><th>æ‡’æƒ°å‹å…ƒå­—ç¬¦</th></tr></thead><tbody><tr><td>*</td><td>*ï¼Ÿ</td></tr><tr><td>+</td><td>+ï¼Ÿ</td></tr><tr><td>{n,}</td><td>{n,}?</td></tr></tbody></table><p><strong>è´ªå©ªçš„ä¾‹å­</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/BY4AC2kn6W8HLQf.png" alt="è´ªå©ªçš„ä¾‹å­"></p><p><strong>åˆ†æ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;[Bb]&gt;åŒ¹é…&lt;B&gt;æ ‡ç­¾ï¼ˆå¤§å°å†™å‡å¯ï¼‰ï¼Œ&lt;/[Bb]&gt;åŒ¹é…&lt;/B&gt;æ ‡ç­¾ï¼ˆä¹Ÿæ˜¯å¤§<br>å°å†™å‡å¯ï¼‰ã€‚ä½†è¿™ä¸ªæ¨¡å¼åªæ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…è€Œä¸æ˜¯é¢„æœŸä¸­çš„ä¸¤ä¸ªï¼šç¬¬ä¸€<br>ä¸ª&lt;B&gt;æ ‡ç­¾ä¹‹åã€æœ€åä¸€ä¸ª&lt;/B&gt;æ ‡ç­¾ä¹‹å‰çš„æ‰€æœ‰ä¸œè¥¿â€”â€”AK&lt;/B&gt; and<br>&lt;B&gt;HIâ€”â€”è¢«.*ä¸€ç½‘æ‰“å°½ã€‚è™½ç„¶æ²¡æœ‰æ¼æ‰æˆ‘ä»¬æƒ³è¦åŒ¹é…çš„æ–‡æœ¬ï¼Œä½†é—®é¢˜<br>æ˜¯ç¬¬<span class="hljs-number">2</span>ä¸ª&lt;B&gt;æ ‡ç­¾ä¸æ˜ä¸ç™½åœ°â€œå¤±è¸ªâ€äº†ã€‚<br>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå› ä¸º*å’Œ+éƒ½æ˜¯æ‰€è°“çš„â€œè´ªå©ªå‹â€å…ƒå­—ç¬¦ï¼Œå®ƒä»¬åœ¨è¿›è¡ŒåŒ¹é…<br>æ—¶çš„è¡Œä¸ºæ¨¡å¼æ˜¯å¤šå¤šç›Šå–„è€Œä¸æ˜¯é€‚å¯è€Œæ­¢çš„ã€‚å®ƒä»¬ä¼šå°½å¯èƒ½åœ°ä»ä¸€æ®µæ–‡<br>æœ¬çš„å¼€å¤´ä¸€ç›´åŒ¹é…åˆ°è¿™æ®µæ–‡æœ¬çš„æœ«å°¾ï¼Œè€Œä¸æ˜¯ä»è¿™æ®µæ–‡æœ¬çš„å¼€å¤´åŒ¹é…åˆ°<br>ç¢°åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…æ—¶ä¸ºæ­¢ã€‚<br></code></pre></td></tr></table></figure><p><strong>æ‡’æƒ°ç‰ˆæ”¹è¿›ï¼ˆåŠ ä¸Šâ€ï¼Ÿâ€œï¼‰</strong></p><br><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/12/byNMS6sLkY4gJhp.png" alt="æ‡’æƒ°ç‰ˆæ”¹è¿›ï¼ˆåŠ ä¸Šâ€ï¼Ÿâ€œï¼‰"></p><br><h2 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">æ­£åˆ™è¡¨è¾¾å¼çš„çœŸæ­£å¨åŠ›ä½“ç°åœ¨é‡å¤æ¬¡æ•°åŒ¹é…æ–¹é¢ã€‚æœ¬ç« ä»‹ç»äº†+ï¼ˆåŒ¹é…<br>å­—ç¬¦æˆ–å­—ç¬¦é›†åˆçš„ä¸€æ¬¡æˆ–å¤šæ¬¡é‡å¤å‡ºç°ï¼‰ã€*ï¼ˆåŒ¹é…å­—ç¬¦æˆ–å­—ç¬¦é›†åˆçš„<br>é›¶æ¬¡æˆ–å¤šæ¬¡é‡å¤å‡ºç°ï¼‰ã€?ï¼ˆåŒ¹é…å­—ç¬¦æˆ–å­—ç¬¦é›†åˆçš„é›¶æ¬¡æˆ–ä¸€æ¬¡å‡ºç°ï¼‰<br>ç­‰å‡ ä¸ªå…ƒå­—ç¬¦çš„ç”¨æ³•ã€‚è¦æƒ³è·å¾—æ›´ç²¾ç¡®çš„æ§åˆ¶ï¼Œä½ å¯ä»¥ç”¨&#123; &#125;è¯­æ³•æ¥ç²¾<br>ç¡®åœ°è®¾å®šä¸€ä¸ªé‡å¤æ¬¡æ•°æˆ–æ˜¯é‡å¤æ¬¡æ•°çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚å…ƒå­—ç¬¦åˆ†â€œè´ª<br>å©ªå‹â€å’Œâ€œæ‡’æƒ°å‹â€ä¸¤ç§ï¼›åœ¨éœ€è¦é˜²æ­¢è¿‡åº¦åŒ¹é…çš„åœºåˆä¸‹ï¼Œè¯·ä½¿ç”¨â€œæ‡’æƒ°<br>å‹â€å…ƒå­—ç¬¦æ¥æ„é€ ä½ çš„æ­£åˆ™è¡¨è¾¾å¼.<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼_è¯­æ³•å­¦ä¹ __2è‡³4</title>
      <link href="/2022/04/09/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_2%E8%87%B34/"/>
      <url>/2022/04/09/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F_%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0_2%E8%87%B34/</url>
      
        <content type="html"><![CDATA[<h1 id="åŒ¹é…ä»»æ„å­—ç¬¦çš„"><a class="markdownIt-Anchor" href="#åŒ¹é…ä»»æ„å­—ç¬¦çš„"></a> åŒ¹é…ä»»æ„å­—ç¬¦çš„ â€œ.â€</h1><p><strong>æ³¨æ„</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">1.&quot;matches any character (expect for line terminators)&quot;<br><span class="hljs-code">         (&quot;.&quot;å¯ä»¥åŒ¹é…é™¤äº†æ¢è¡Œç¬¦çš„ä»»æ„å­—ç¬¦)</span><br><span class="hljs-code">        2.å½“è¦åŒ¹é…è¯¸å¦‚&quot;.&quot;è¿™æ ·çš„ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œè¦ç”¨&quot;\&quot;æ¥è½¬ä¹‰</span><br><span class="hljs-code">         å¦‚è‹¥è¦åŒ¹é…&quot;.&quot;</span><br></code></pre></td></tr></table></figure><p><code>åˆ™è¦ä½¿ç”¨ \.</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/10/cY7hyWxE4oGb2jm.png" alt="ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰"></p><h2 id="åŒ¹é…ä¸€ç»„å­—ç¬¦"><a class="markdownIt-Anchor" href="#åŒ¹é…ä¸€ç»„å­—ç¬¦"></a> åŒ¹é…ä¸€ç»„å­—ç¬¦</h2><p><strong>ç”¨æ³•</strong> ä½¿ç”¨å­—ç¬¦é›†åˆ&quot;[]&quot;</p><p><strong>ä¾‹ä¸€</strong></p><p>ç¬¬ä¸€ä¸ªåƒè¢«åŒ¹é…çš„å­—ç¬¦åªèƒ½æ˜¯næˆ–è€…s</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/10/MPoIZ5lmAc2J4hF.png" alt></p><p><strong>ä¾‹äºŒ</strong></p><p>åŒºé—´å­—ç¬¦</p><p>A-Z</p><p><code>[A-Z]</code></p><p>A-Z å¹¶ä¸” 0-9</p><br><p><code>[A-Z0-9]</code></p><br><p><strong>ä¾‹ä¸‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å–éæ“ä½œ<br>è¦åŒ¹é…ä»»æ„çš„éå­—æ¯æ•°å­—å­—ç¬¦<br>åˆ™å¯ä»¥<br></code></pre></td></tr></table></figure><p><code>[^A-Za-z0-9]</code></p><br><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/10/k17uFwoVx9EZd8I.png" alt="å–éæ“ä½œ"></p><p><strong>æ³¨æ„</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">^çš„æ•ˆæœå°†ä½œç”¨äºç»™å®šå­—ç¬¦é›†åˆé‡Œçš„æ‰€æœ‰å­—ç¬¦æˆ–å­—ç¬¦åŒºé—´ï¼Œè€Œ<br>ä¸æ˜¯ä»…é™äºç´§è·Ÿåœ¨^å­—ç¬¦åé¢çš„é‚£ä¸€ä¸ªå­—ç¬¦æˆ–å­—ç¬¦åŒºé—´<br></code></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å…ƒå­—ç¬¦[å’Œ]ç”¨æ¥å®šä¹‰ä¸€ä¸ªå­—ç¬¦é›†åˆï¼Œå…¶å«ä¹‰æ˜¯å¿…é¡»åŒ¹é…è¯¥é›†åˆé‡Œçš„å­—ç¬¦<br>ä¹‹ä¸€ã€‚å®šä¹‰ä¸€ä¸ªå­—ç¬¦é›†åˆçš„å…·ä½“åšæ³•æœ‰ä¸¤ç§ï¼šä¸€æ˜¯æŠŠæ‰€æœ‰çš„å­—ç¬¦éƒ½åˆ—ä¸¾<br>å‡ºæ¥ï¼›äºŒæ˜¯åˆ©ç”¨å…ƒå­—ç¬¦-ä»¥å­—ç¬¦åŒºé—´çš„æ–¹å¼ç»™å‡ºã€‚å­—ç¬¦é›†åˆå¯ä»¥ç”¨å…ƒå­—<br>ç¬¦^æ¥æ±‚éï¼›è¿™å°†æŠŠç»™å®šçš„å­—ç¬¦é›†åˆå¼ºè¡Œæ’é™¤åœ¨åŒ¹é…æ“ä½œä»¥å¤–â€”â€”é™¤äº†<br>è¯¥å­—ç¬¦é›†åˆé‡Œçš„å­—ç¬¦ï¼Œå…¶ä»–å­—ç¬¦éƒ½å¯ä»¥è¢«åŒ¹é…ã€‚<br></code></pre></td></tr></table></figure><br><h3 id="ä½¿ç”¨å…ƒå­—ç¬¦"><a class="markdownIt-Anchor" href="#ä½¿ç”¨å…ƒå­—ç¬¦"></a> ä½¿ç”¨å…ƒå­—ç¬¦</h3><p>** ä¾‹ä¸€**</p><p><strong>å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æç¤º ä»»ä½•ä¸€ä¸ªå…ƒå­—ç¬¦éƒ½å¯ä»¥é€šè¿‡ç»™å®ƒåŠ ä¸Šä¸€ä¸ªåæ–œæ å­—ç¬¦ï¼ˆ\ï¼‰ä½œ<br>ä¸ºå‰ç¼€çš„åŠæ³•æ¥è½¬ä¹‰ï¼Œèƒ½å¤Ÿè¢«è½¬ä¹‰çš„å…ƒå­—ç¬¦å¹¶ä¸ä»…å±€é™äºæˆ‘ä»¬è¿™é‡Œæ<br>åˆ°çš„é‚£å‡ ä¸ªã€‚<br>è­¦å‘Š é…å¯¹çš„å…ƒå­—ç¬¦ï¼ˆæ¯”å¦‚[æˆ–]ï¼‰ä¸ç”¨ä½œå…ƒå­—ç¬¦æ—¶å¿…é¡»è¢«è½¬ä¹‰ï¼Œå¦åˆ™<br>æ­£åˆ™è¡¨è¾¾å¼åˆ†æå™¨å¾ˆå¯èƒ½ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¦‚æœä½ åœ¨è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼é‡Œåªå†™å‡ºäº†ä¸€ä¸ª\çš„è¯<br>ä½ åº”è¯¥ä¼šçœ‹åˆ°ä¸€æ¡å‡ºé”™æ¶ˆæ¯ã€‚<br>è¿™æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼åˆ†æå™¨ä¼šè®¤ä¸ºä½ çš„æ­£åˆ™è¡¨è¾¾å¼ä¸å®Œæ•´ï¼Œ<br>åœ¨ä¸€ä¸ªå®Œæ•´çš„æ­£åˆ™è¡¨è¾¾å¼é‡Œï¼Œå­—ç¬¦\çš„åé¢æ°¸è¿œè·Ÿç€å¦ä¸€ä¸ªå­—ç¬¦ã€‚<br><br></code></pre></td></tr></table></figure><p><strong>ä¾‹äºŒ</strong></p><p><strong>åŒ¹é…ç©ºç™½å­—ç¬¦</strong></p><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>[\b]</td><td>å›é€€ï¼ˆå¹¶åˆ é™¤ï¼‰ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>\f</td><td>æ¢é¡µç¬¦</td></tr><tr><td>\n</td><td>æ¢è¡Œç¬¦</td></tr><tr><td>\r</td><td>å›è½¦ç¬¦</td></tr><tr><td>\t</td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td>\v</td><td>å‚ç›´åˆ¶è¡¨ç¬¦</td></tr></tbody></table><p><strong>æ³¨æ„ï¼ˆä¸€ä¸ªæœ‰æ„æ€çš„ç°è±¡ï¼‰</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä½ å·²ç»è§è¿‡ä¸å°‘å…ƒå­—ç¬¦äº†ï¼Œä½†ä½ æ³¨æ„åˆ°å®ƒä»¬ä¹‹é—´çš„å·®å¼‚äº†<br>å—ï¼Ÿ.å’Œ[æ˜¯å…ƒå­—ç¬¦ï¼Œä½†å‰ææ˜¯ä½ æ²¡æœ‰å¯¹å®ƒä»¬è¿›è¡Œè½¬ä¹‰ã€‚få’Œnä¹Ÿæ˜¯å…ƒå­—<br>ç¬¦ï¼Œä½†å‰ææ˜¯ä½ å¯¹å®ƒä»¬è¿›è¡Œäº†è½¬ä¹‰ã€‚å¦‚æœä½ æ²¡æœ‰å¯¹få’Œnè¿›è¡Œè½¬ä¹‰ï¼Œå®ƒ<br>ä»¬å°†è¢«è§£é‡Šä¸ºæ™®é€šå­—ç¬¦ï¼Œåªèƒ½åŒ¹é…å®ƒä»¬æœ¬èº«ã€‚<br></code></pre></td></tr></table></figure><br><p><strong>ä¾‹ä¸‰</strong></p><p><strong>ä½¿ç”¨æ•°å­—å…ƒå­—ç¬¦</strong></p><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>\d</td><td>ä»»ä½•ä¸€ä¸ªæ•°å­—å­—ç¬¦ï¼ˆç­‰ä»·äº[0-9]</td></tr><tr><td>\D</td><td>ä»»ä½•ä¸€ä¸ªéæ•°å­—å­—ç¬¦ï¼ˆç­‰ä»·äº[^0-9]</td></tr></tbody></table><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/10/I5yJbBTuH9AjLzW.png" alt="ä½¿ç”¨æ•°å­—å…ƒå­—ç¬¦"></p><p><strong>ä½¿ç”¨æ•°å­—å­—æ¯å…ƒå­—ç¬¦</strong></p><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>\w</td><td>ä»»ä½•ä¸€ä¸ªå­—æ¯æ•°å­—ï¼ˆå¤§å°å†™å‡å¯ï¼‰æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ ç­‰ä»·äº[0-9a-zA-Z_]</td></tr><tr><td>\W</td><td>ä»»ä½•ä¸€ä¸ªéæ•°å­—å­—æ¯å’Œä¸‹åˆ’çº¿ ç­‰ä»·äº[0-9a-zA-Z_]</td></tr></tbody></table><p><strong>æ ·ä¾‹</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/10/sq9bjuwDTL8WO5c.png" alt="ä½¿ç”¨æ•°å­—å­—æ¯å…ƒå­—ç¬¦"></p><p><strong>æ³¨æ„</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"> åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼è§£å†³äº†æˆ‘ä»¬çš„é—®<br>é¢˜ã€‚ä½†å®ƒæ­£ç¡®å—ï¼Ÿè¯·å¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç¾å›½çš„é‚®æ”¿ç¼–ç æ²¡æœ‰è¢«åŒ¹<br>é…å‡ºæ¥ï¼Ÿæ˜¯å› ä¸ºå®ƒä»¬åªç”±æ•°å­—æ„æˆã€è¿˜æ˜¯å› ä¸ºä»€ä¹ˆå…¶ä»–åŸå› ï¼Ÿ<br>æˆ‘ä»¬å°†ä¸ç»™å‡ºè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œç†ç”±å¾ˆç®€å•â€”â€”ä¾‹å­é‡Œçš„æ¨¡å¼è§£å†³äº†<br>é—®é¢˜ã€‚è¿™é‡Œçš„å…³é”®æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¾ˆå°‘æœ‰å¯¹é”™ä¹‹åˆ†ï¼ˆå½“ç„¶ï¼Œå‰ææ˜¯å®ƒä»¬<br>èƒ½è§£å†³é—®é¢˜ï¼‰ï¼Œæˆ‘ä»¬æ›´å…³å¿ƒçš„æ˜¯å®ƒä»¬çš„å¤æ‚ç¨‹åº¦â€”â€”è€Œè¿™è¦ç”±æ¨¡å¼åŒ¹<br>é…æ“ä½œçš„ç²¾ç¡®ç¨‹åº¦æ¥å†³å®šï¼›å¦‚æœä½ éœ€è¦æ›´ç²¾ç¡®çš„åŒ¹é…ï¼Œå°±éœ€è¦æ„é€ æ›´<br>å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚<br></code></pre></td></tr></table></figure><br><p><strong>ä¾‹å››</strong></p><p><strong>ä½¿ç”¨åŒ¹é…ç©ºç™½å­—ç¬¦çš„å…ƒå­—ç¬¦</strong></p><br><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>\s</td><td>ä»»ä½•ä¸€ä¸ªç©ºå­—ç¬¦ï¼ˆé™¤äº†\b) ç­‰ä»·äº[\f\t\n\v\r]</td></tr><tr><td>\S</td><td>ä»»ä½•ä¸€ä¸ªéç©ºå­—ç¬¦ ä»¥åŠ \b ç­‰ä»·äº[^\f\v\t\n\r]</td></tr></tbody></table><br><h3 id="ä½¿ç”¨posixå­—ç¬¦ç±»"><a class="markdownIt-Anchor" href="#ä½¿ç”¨posixå­—ç¬¦ç±»"></a> ä½¿ç”¨POSIXå­—ç¬¦ç±»</h3><table><thead><tr><th>å­—ç¬¦ç±»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>[:alnum:]</td><td>ä»»ä½•ä¸€ä¸ªå­—æ¯æˆ–æ•°å­— ç­‰ä»·äº [0-9a-zA-Z] æ³¨æ„åƒä¸‡ä¸æ˜¯ç­‰ä»·äº\w  !!</td></tr><tr><td>[:alpha:]</td><td>ä»»ä½•ä¸€ä¸ªå­—æ¯ ç­‰ä»·äº[a-zA-Z]</td></tr><tr><td>[:blank:]</td><td>ç©ºæ ¼æˆ–è€…åˆ¶è¡¨ç¬¦ ç­‰ä»·äº[\t ] æ³¨æ„\t åæœ‰ä¸€ä¸ªç©ºæ ¼</td></tr><tr><td>[:cntrl:]</td><td>ASCIIæ§åˆ¶å­—ç¬¦ï¼ˆASCII 0åˆ°31ï¼Œå†åŠ ä¸ŠASCII 127ï¼‰</td></tr><tr><td>[:digit:]</td><td>[0-9]</td></tr><tr><td>[:print:]</td><td>ä»»ä½•ä¸€ä¸ªå¯æ‰“å°å­—ç¬¦</td></tr><tr><td>[:graph:]</td><td>ä»…ä»…æ˜¯[:print:]ä¸åŒ…å«ç©ºæ ¼çš„æƒ…å†µ</td></tr><tr><td>[:lower:]</td><td>[a-z]</td></tr><tr><td>[:punct:]</td><td>æ—¢ä¸å±äº[:alnum:]ä¹Ÿä¸å±äº[:cntrl:]çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[:space:]</td><td>ä»»ä½•ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼</td></tr><tr><td>[:upper:]</td><td>ä»»ä½•ä¸€ä¸ªå¤§å†™å­—æ¯ï¼ˆç­‰ä»·äº[A-Z]ï¼‰</td></tr><tr><td>[:xdigit:]</td><td>ä»»ä½•ä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼ˆç­‰ä»·äº[a-fA-F0-9]ï¼‰</td></tr></tbody></table><p><strong>æ³¨æ„</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown"> è¿™é‡Œä½¿ç”¨çš„æ¨¡å¼ä»¥[[å¼€å¤´ã€ä»¥]]ç»“æŸï¼ˆä¸¤å¯¹æ–¹æ‹¬å·ï¼‰ã€‚è¿™æ˜¯ä½¿<br>ç”¨POSIXå­—ç¬¦ç±»æ‰€å¿…é¡»çš„ã€‚POSIXå­—ç¬¦ç±»å¿…é¡»æ‹¬åœ¨[:å’Œ:]ä¹‹é—´ï¼Œæˆ‘ä»¬<br>ä½¿ç”¨çš„POSIXå­—ç¬¦ç±»æ˜¯[:xdigit:]ï¼ˆä¸æ˜¯:xdigit:ï¼‰ã€‚å¤–å±‚çš„[å’Œ]<br>å­—ç¬¦ç”¨æ¥å®šä¹‰ä¸€ä¸ªå­—ç¬¦é›†åˆï¼Œå†…å±‚çš„[å’Œ]å­—ç¬¦æ˜¯POSIXå­—ç¬¦ç±»æœ¬èº«çš„<br>ç»„æˆéƒ¨åˆ†ã€‚<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
